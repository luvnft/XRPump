{"ast":null,"code":"\"use strict\";\n\n// WebView\n(function () {\n  var eventHandlers = {};\n  var locationHash = '';\n  try {\n    locationHash = location.hash.toString();\n  } catch (e) {}\n  var initParams = urlParseHashParams(locationHash);\n  var storedParams = sessionStorageGet('initParams');\n  if (storedParams) {\n    for (var key in storedParams) {\n      if (typeof initParams[key] === 'undefined') {\n        initParams[key] = storedParams[key];\n      }\n    }\n  }\n  sessionStorageSet('initParams', initParams);\n  var isIframe = false,\n    iFrameStyle;\n  try {\n    isIframe = window.parent != null && window != window.parent;\n    if (isIframe) {\n      window.addEventListener('message', function (event) {\n        if (event.source !== window.parent) return;\n        try {\n          var dataParsed = JSON.parse(event.data);\n        } catch (e) {\n          return;\n        }\n        if (!dataParsed || !dataParsed.eventType) {\n          return;\n        }\n        if (dataParsed.eventType == 'set_custom_style') {\n          if (event.origin === 'https://web.telegram.org') {\n            iFrameStyle.innerHTML = dataParsed.eventData;\n          }\n        } else if (dataParsed.eventType == 'reload_iframe') {\n          try {\n            window.parent.postMessage(JSON.stringify({\n              eventType: 'iframe_will_reload'\n            }), '*');\n          } catch (e) {}\n          location.reload();\n        } else {\n          receiveEvent(dataParsed.eventType, dataParsed.eventData);\n        }\n      });\n      iFrameStyle = document.createElement('style');\n      document.head.appendChild(iFrameStyle);\n      try {\n        window.parent.postMessage(JSON.stringify({\n          eventType: 'iframe_ready',\n          eventData: {\n            reload_supported: true\n          }\n        }), '*');\n      } catch (e) {}\n    }\n  } catch (e) {}\n  function urlSafeDecode(urlencoded) {\n    try {\n      urlencoded = urlencoded.replace(/\\+/g, '%20');\n      return decodeURIComponent(urlencoded);\n    } catch (e) {\n      return urlencoded;\n    }\n  }\n  function urlParseHashParams(locationHash) {\n    locationHash = locationHash.replace(/^#/, '');\n    var params = {};\n    if (!locationHash.length) {\n      return params;\n    }\n    if (locationHash.indexOf('=') < 0 && locationHash.indexOf('?') < 0) {\n      params._path = urlSafeDecode(locationHash);\n      return params;\n    }\n    var qIndex = locationHash.indexOf('?');\n    if (qIndex >= 0) {\n      var pathParam = locationHash.substr(0, qIndex);\n      params._path = urlSafeDecode(pathParam);\n      locationHash = locationHash.substr(qIndex + 1);\n    }\n    var query_params = urlParseQueryString(locationHash);\n    for (var k in query_params) {\n      params[k] = query_params[k];\n    }\n    return params;\n  }\n  function urlParseQueryString(queryString) {\n    var params = {};\n    if (!queryString.length) {\n      return params;\n    }\n    var queryStringParams = queryString.split('&');\n    var i, param, paramName, paramValue;\n    for (i = 0; i < queryStringParams.length; i++) {\n      param = queryStringParams[i].split('=');\n      paramName = urlSafeDecode(param[0]);\n      paramValue = param[1] == null ? null : urlSafeDecode(param[1]);\n      params[paramName] = paramValue;\n    }\n    return params;\n  }\n  // Telegram apps will implement this logic to add service params (e.g. tgShareScoreUrl) to game URL\n  function urlAppendHashParams(url, addHash) {\n    // url looks like 'https://game.com/path?query=1#hash'\n    // addHash looks like 'tgShareScoreUrl=' + encodeURIComponent('tgb://share_game_score?hash=very_long_hash123')\n    var ind = url.indexOf('#');\n    if (ind < 0) {\n      // https://game.com/path -> https://game.com/path#tgShareScoreUrl=etc\n      return url + '#' + addHash;\n    }\n    var curHash = url.substr(ind + 1);\n    if (curHash.indexOf('=') >= 0 || curHash.indexOf('?') >= 0) {\n      // https://game.com/#hash=1 -> https://game.com/#hash=1&tgShareScoreUrl=etc\n      // https://game.com/#path?query -> https://game.com/#path?query&tgShareScoreUrl=etc\n      return url + '&' + addHash;\n    }\n    // https://game.com/#hash -> https://game.com/#hash?tgShareScoreUrl=etc\n    if (curHash.length > 0) {\n      return url + '?' + addHash;\n    }\n    // https://game.com/# -> https://game.com/#tgShareScoreUrl=etc\n    return url + addHash;\n  }\n  function postEvent(eventType, callback, eventData) {\n    if (!callback) {\n      callback = function () {};\n    }\n    if (eventData === undefined) {\n      eventData = '';\n    }\n    console.log('[Telegram.WebView] > postEvent', eventType, eventData);\n    if (window.TelegramWebviewProxy !== undefined) {\n      TelegramWebviewProxy.postEvent(eventType, JSON.stringify(eventData));\n      callback();\n    } else if (window.external && 'notify' in window.external) {\n      window.external.notify(JSON.stringify({\n        eventType: eventType,\n        eventData: eventData\n      }));\n      callback();\n    } else if (isIframe) {\n      try {\n        var trustedTarget = 'https://web.telegram.org';\n        // For now we don't restrict target, for testing purposes\n        trustedTarget = '*';\n        window.parent.postMessage(JSON.stringify({\n          eventType: eventType,\n          eventData: eventData\n        }), trustedTarget);\n        callback();\n      } catch (e) {\n        callback(e);\n      }\n    } else {\n      callback({\n        notAvailable: true\n      });\n    }\n  }\n  ;\n  function receiveEvent(eventType, eventData) {\n    console.log('[Telegram.WebView] < receiveEvent', eventType, eventData);\n    callEventCallbacks(eventType, function (callback) {\n      callback(eventType, eventData);\n    });\n  }\n  function callEventCallbacks(eventType, func) {\n    var curEventHandlers = eventHandlers[eventType];\n    if (curEventHandlers === undefined || !curEventHandlers.length) {\n      return;\n    }\n    for (var i = 0; i < curEventHandlers.length; i++) {\n      try {\n        func(curEventHandlers[i]);\n      } catch (e) {}\n    }\n  }\n  function onEvent(eventType, callback) {\n    if (eventHandlers[eventType] === undefined) {\n      eventHandlers[eventType] = [];\n    }\n    var index = eventHandlers[eventType].indexOf(callback);\n    if (index === -1) {\n      eventHandlers[eventType].push(callback);\n    }\n  }\n  ;\n  function offEvent(eventType, callback) {\n    if (eventHandlers[eventType] === undefined) {\n      return;\n    }\n    var index = eventHandlers[eventType].indexOf(callback);\n    if (index === -1) {\n      return;\n    }\n    eventHandlers[eventType].splice(index, 1);\n  }\n  ;\n  function openProtoUrl(url) {\n    if (!url.match(/^(web\\+)?tgb?:\\/\\/./)) {\n      return false;\n    }\n    var useIframe = navigator.userAgent.match(/iOS|iPhone OS|iPhone|iPod|iPad/i) ? true : false;\n    if (useIframe) {\n      var iframeContEl = document.getElementById('tgme_frame_cont') || document.body;\n      var iframeEl = document.createElement('iframe');\n      iframeContEl.appendChild(iframeEl);\n      var pageHidden = false;\n      var enableHidden = function () {\n        pageHidden = true;\n      };\n      window.addEventListener('pagehide', enableHidden, false);\n      window.addEventListener('blur', enableHidden, false);\n      if (iframeEl !== null) {\n        iframeEl.src = url;\n      }\n      setTimeout(function () {\n        if (!pageHidden) {\n          window.location = url;\n        }\n        window.removeEventListener('pagehide', enableHidden, false);\n        window.removeEventListener('blur', enableHidden, false);\n      }, 2000);\n    } else {\n      window.location = url;\n    }\n    return true;\n  }\n  function sessionStorageSet(key, value) {\n    try {\n      window.sessionStorage.setItem('__telegram__' + key, JSON.stringify(value));\n      return true;\n    } catch (e) {}\n    return false;\n  }\n  function sessionStorageGet(key) {\n    try {\n      return JSON.parse(window.sessionStorage.getItem('__telegram__' + key));\n    } catch (e) {}\n    return null;\n  }\n  if (!window.Telegram) {\n    window.Telegram = {};\n  }\n  window.Telegram.WebView = {\n    initParams: initParams,\n    isIframe: isIframe,\n    onEvent: onEvent,\n    offEvent: offEvent,\n    postEvent: postEvent,\n    receiveEvent: receiveEvent,\n    callEventCallbacks: callEventCallbacks\n  };\n  window.Telegram.Utils = {\n    urlSafeDecode: urlSafeDecode,\n    urlParseQueryString: urlParseQueryString,\n    urlParseHashParams: urlParseHashParams,\n    urlAppendHashParams: urlAppendHashParams,\n    sessionStorageSet: sessionStorageSet,\n    sessionStorageGet: sessionStorageGet\n  };\n  // For Windows Phone app\n  window.TelegramGameProxy_receiveEvent = receiveEvent;\n  // App backward compatibility\n  window.TelegramGameProxy = {\n    receiveEvent: receiveEvent\n  };\n})();\n// WebApp\n(function () {\n  var Utils = window.Telegram.Utils;\n  var WebView = window.Telegram.WebView;\n  var initParams = WebView.initParams;\n  var isIframe = WebView.isIframe;\n  var WebApp = {};\n  var webAppInitData = '',\n    webAppInitDataUnsafe = {};\n  var themeParams = {},\n    colorScheme = 'light';\n  var webAppVersion = '6.0';\n  var webAppPlatform = 'unknown';\n  var webAppIsActive = true;\n  var webAppIsFullscreen = false;\n  var webAppIsOrientationLocked = false;\n  var webAppBackgroundColor = 'bg_color';\n  var webAppHeaderColorKey = 'bg_color';\n  var webAppHeaderColor = null;\n  if (initParams.tgWebAppData && initParams.tgWebAppData.length) {\n    webAppInitData = initParams.tgWebAppData;\n    webAppInitDataUnsafe = Utils.urlParseQueryString(webAppInitData);\n    for (var key in webAppInitDataUnsafe) {\n      var val = webAppInitDataUnsafe[key];\n      try {\n        if (val.substr(0, 1) == '{' && val.substr(-1) == '}' || val.substr(0, 1) == '[' && val.substr(-1) == ']') {\n          webAppInitDataUnsafe[key] = JSON.parse(val);\n        }\n      } catch (e) {}\n    }\n  }\n  var stored_theme_params = Utils.sessionStorageGet('themeParams');\n  if (initParams.tgWebAppThemeParams && initParams.tgWebAppThemeParams.length) {\n    var themeParamsRaw = initParams.tgWebAppThemeParams;\n    try {\n      var theme_params = JSON.parse(themeParamsRaw);\n      if (theme_params) {\n        setThemeParams(theme_params);\n      }\n    } catch (e) {}\n  }\n  if (stored_theme_params) {\n    setThemeParams(stored_theme_params);\n  }\n  var stored_def_colors = Utils.sessionStorageGet('defaultColors');\n  if (initParams.tgWebAppDefaultColors && initParams.tgWebAppDefaultColors.length) {\n    var defColorsRaw = initParams.tgWebAppDefaultColors;\n    try {\n      var def_colors = JSON.parse(defColorsRaw);\n      if (def_colors) {\n        setDefaultColors(def_colors);\n      }\n    } catch (e) {}\n  }\n  if (stored_def_colors) {\n    setDefaultColors(stored_def_colors);\n  }\n  if (initParams.tgWebAppVersion) {\n    webAppVersion = initParams.tgWebAppVersion;\n  }\n  if (initParams.tgWebAppPlatform) {\n    webAppPlatform = initParams.tgWebAppPlatform;\n  }\n  var stored_fullscreen = Utils.sessionStorageGet('isFullscreen');\n  if (initParams.tgWebAppFullscreen) {\n    setFullscreen(true);\n  }\n  if (stored_fullscreen) {\n    setFullscreen(stored_fullscreen == 'yes');\n  }\n  var stored_orientation_lock = Utils.sessionStorageGet('isOrientationLocked');\n  if (stored_orientation_lock) {\n    setOrientationLock(stored_orientation_lock == 'yes');\n  }\n  function onThemeChanged(eventType, eventData) {\n    if (eventData.theme_params) {\n      setThemeParams(eventData.theme_params);\n      window.Telegram.WebApp.MainButton.setParams({});\n      window.Telegram.WebApp.SecondaryButton.setParams({});\n      updateHeaderColor();\n      updateBackgroundColor();\n      updateBottomBarColor();\n      receiveWebViewEvent('themeChanged');\n    }\n  }\n  var lastWindowHeight = window.innerHeight;\n  function onViewportChanged(eventType, eventData) {\n    if (eventData.height) {\n      window.removeEventListener('resize', onWindowResize);\n      setViewportHeight(eventData);\n    }\n  }\n  function onWindowResize(e) {\n    if (lastWindowHeight != window.innerHeight) {\n      lastWindowHeight = window.innerHeight;\n      receiveWebViewEvent('viewportChanged', {\n        isStateStable: true\n      });\n    }\n  }\n  function onSafeAreaChanged(eventType, eventData) {\n    if (eventData) {\n      setSafeAreaInset(eventData);\n    }\n  }\n  function onContentSafeAreaChanged(eventType, eventData) {\n    if (eventData) {\n      setContentSafeAreaInset(eventData);\n    }\n  }\n  function onVisibilityChanged(eventType, eventData) {\n    if (eventData.is_visible) {\n      webAppIsActive = true;\n      receiveWebViewEvent('activated');\n    } else {\n      webAppIsActive = false;\n      receiveWebViewEvent('deactivated');\n    }\n  }\n  function linkHandler(e) {\n    if (e.metaKey || e.ctrlKey) return;\n    var el = e.target;\n    while (el.tagName != 'A' && el.parentNode) {\n      el = el.parentNode;\n    }\n    if (el.tagName == 'A' && el.target != '_blank' && (el.protocol == 'http:' || el.protocol == 'https:') && el.hostname == 't.me') {\n      WebApp.openTgLink(el.href);\n      e.preventDefault();\n    }\n  }\n  function strTrim(str) {\n    return str.toString().replace(/^\\s+|\\s+$/g, '');\n  }\n  function receiveWebViewEvent(eventType) {\n    var args = Array.prototype.slice.call(arguments);\n    eventType = args.shift();\n    WebView.callEventCallbacks('webview:' + eventType, function (callback) {\n      callback.apply(WebApp, args);\n    });\n  }\n  function onWebViewEvent(eventType, callback) {\n    WebView.onEvent('webview:' + eventType, callback);\n  }\n  ;\n  function offWebViewEvent(eventType, callback) {\n    WebView.offEvent('webview:' + eventType, callback);\n  }\n  ;\n  function setCssProperty(name, value) {\n    var root = document.documentElement;\n    if (root && root.style && root.style.setProperty) {\n      root.style.setProperty('--tg-' + name, value);\n    }\n  }\n  function setFullscreen(is_fullscreen) {\n    webAppIsFullscreen = !!is_fullscreen;\n    Utils.sessionStorageSet('isFullscreen', webAppIsFullscreen ? 'yes' : 'no');\n  }\n  function setOrientationLock(is_locked) {\n    webAppIsOrientationLocked = !!is_locked;\n    Utils.sessionStorageSet('isOrientationLocked', webAppIsOrientationLocked ? 'yes' : 'no');\n  }\n  function setThemeParams(theme_params) {\n    // temp iOS fix\n    if (theme_params.bg_color == '#1c1c1d' && theme_params.bg_color == theme_params.secondary_bg_color) {\n      theme_params.secondary_bg_color = '#2c2c2e';\n    }\n    var color;\n    for (var key in theme_params) {\n      if (color = parseColorToHex(theme_params[key])) {\n        themeParams[key] = color;\n        if (key == 'bg_color') {\n          colorScheme = isColorDark(color) ? 'dark' : 'light';\n          setCssProperty('color-scheme', colorScheme);\n        }\n        key = 'theme-' + key.split('_').join('-');\n        setCssProperty(key, color);\n      }\n    }\n    Utils.sessionStorageSet('themeParams', themeParams);\n  }\n  function setDefaultColors(def_colors) {\n    if (colorScheme == 'dark') {\n      if (def_colors.bg_dark_color) {\n        webAppBackgroundColor = def_colors.bg_dark_color;\n      }\n      if (def_colors.header_dark_color) {\n        webAppHeaderColorKey = null;\n        webAppHeaderColor = def_colors.header_dark_color;\n      }\n    } else {\n      if (def_colors.bg_color) {\n        webAppBackgroundColor = def_colors.bg_color;\n      }\n      if (def_colors.header_color) {\n        webAppHeaderColorKey = null;\n        webAppHeaderColor = def_colors.header_color;\n      }\n    }\n    Utils.sessionStorageSet('defaultColors', def_colors);\n  }\n  var webAppCallbacks = {};\n  function generateCallbackId(len) {\n    var tries = 100;\n    while (--tries) {\n      var id = '',\n        chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789',\n        chars_len = chars.length;\n      for (var i = 0; i < len; i++) {\n        id += chars[Math.floor(Math.random() * chars_len)];\n      }\n      if (!webAppCallbacks[id]) {\n        webAppCallbacks[id] = {};\n        return id;\n      }\n    }\n    throw Error('WebAppCallbackIdGenerateFailed');\n  }\n  var viewportHeight = false,\n    viewportStableHeight = false,\n    isExpanded = true;\n  function setViewportHeight(data) {\n    if (typeof data !== 'undefined') {\n      isExpanded = !!data.is_expanded;\n      viewportHeight = data.height;\n      if (data.is_state_stable) {\n        viewportStableHeight = data.height;\n      }\n      receiveWebViewEvent('viewportChanged', {\n        isStateStable: !!data.is_state_stable\n      });\n    }\n    var height, stable_height;\n    if (viewportHeight !== false) {\n      height = viewportHeight - bottomBarHeight + 'px';\n    } else {\n      height = bottomBarHeight ? 'calc(100vh - ' + bottomBarHeight + 'px)' : '100vh';\n    }\n    if (viewportStableHeight !== false) {\n      stable_height = viewportStableHeight - bottomBarHeight + 'px';\n    } else {\n      stable_height = bottomBarHeight ? 'calc(100vh - ' + bottomBarHeight + 'px)' : '100vh';\n    }\n    setCssProperty('viewport-height', height);\n    setCssProperty('viewport-stable-height', stable_height);\n  }\n  var safeAreaInset = {\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0\n  };\n  function setSafeAreaInset(data) {\n    if (typeof data !== 'undefined') {\n      if (typeof data.top !== 'undefined') {\n        safeAreaInset.top = data.top;\n      }\n      if (typeof data.bottom !== 'undefined') {\n        safeAreaInset.bottom = data.bottom;\n      }\n      if (typeof data.left !== 'undefined') {\n        safeAreaInset.left = data.left;\n      }\n      if (typeof data.right !== 'undefined') {\n        safeAreaInset.right = data.right;\n      }\n      receiveWebViewEvent('safeAreaChanged');\n    }\n    setCssProperty('safe-area-inset-top', safeAreaInset.top + 'px');\n    setCssProperty('safe-area-inset-bottom', safeAreaInset.bottom + 'px');\n    setCssProperty('safe-area-inset-left', safeAreaInset.left + 'px');\n    setCssProperty('safe-area-inset-right', safeAreaInset.right + 'px');\n  }\n  var contentSafeAreaInset = {\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0\n  };\n  function setContentSafeAreaInset(data) {\n    if (typeof data !== 'undefined') {\n      if (typeof data.top !== 'undefined') {\n        contentSafeAreaInset.top = data.top;\n      }\n      if (typeof data.bottom !== 'undefined') {\n        contentSafeAreaInset.bottom = data.bottom;\n      }\n      if (typeof data.left !== 'undefined') {\n        contentSafeAreaInset.left = data.left;\n      }\n      if (typeof data.right !== 'undefined') {\n        contentSafeAreaInset.right = data.right;\n      }\n      receiveWebViewEvent('contentSafeAreaChanged');\n    }\n    setCssProperty('content-safe-area-inset-top', contentSafeAreaInset.top + 'px');\n    setCssProperty('content-safe-area-inset-bottom', contentSafeAreaInset.bottom + 'px');\n    setCssProperty('content-safe-area-inset-left', contentSafeAreaInset.left + 'px');\n    setCssProperty('content-safe-area-inset-right', contentSafeAreaInset.right + 'px');\n  }\n  var isClosingConfirmationEnabled = false;\n  function setClosingConfirmation(need_confirmation) {\n    if (!versionAtLeast('6.2')) {\n      console.warn('[Telegram.WebApp] Closing confirmation is not supported in version ' + webAppVersion);\n      return;\n    }\n    isClosingConfirmationEnabled = !!need_confirmation;\n    WebView.postEvent('web_app_setup_closing_behavior', false, {\n      need_confirmation: isClosingConfirmationEnabled\n    });\n  }\n  var isVerticalSwipesEnabled = true;\n  function toggleVerticalSwipes(enable_swipes) {\n    if (!versionAtLeast('7.7')) {\n      console.warn('[Telegram.WebApp] Changing swipes behavior is not supported in version ' + webAppVersion);\n      return;\n    }\n    isVerticalSwipesEnabled = !!enable_swipes;\n    WebView.postEvent('web_app_setup_swipe_behavior', false, {\n      allow_vertical_swipe: isVerticalSwipesEnabled\n    });\n  }\n  function onFullscreenChanged(eventType, eventData) {\n    setFullscreen(eventData.is_fullscreen);\n    receiveWebViewEvent('fullscreenChanged');\n  }\n  function onFullscreenFailed(eventType, eventData) {\n    if (eventData.error == 'ALREADY_FULLSCREEN' && !webAppIsFullscreen) {\n      setFullscreen(true);\n    }\n    receiveWebViewEvent('fullscreenFailed', {\n      error: eventData.error\n    });\n  }\n  function toggleOrientationLock(locked) {\n    if (!versionAtLeast('8.0')) {\n      console.warn('[Telegram.WebApp] Orientation locking is not supported in version ' + webAppVersion);\n      return;\n    }\n    setOrientationLock(locked);\n    WebView.postEvent('web_app_toggle_orientation_lock', false, {\n      locked: webAppIsOrientationLocked\n    });\n  }\n  var homeScreenCallbacks = [];\n  function onHomeScreenAdded(eventType, eventData) {\n    receiveWebViewEvent('homeScreenAdded');\n  }\n  function onHomeScreenChecked(eventType, eventData) {\n    var status = eventData.status || 'unknown';\n    if (homeScreenCallbacks.length > 0) {\n      for (var i = 0; i < homeScreenCallbacks.length; i++) {\n        var callback = homeScreenCallbacks[i];\n        callback(status);\n      }\n      homeScreenCallbacks = [];\n    }\n    receiveWebViewEvent('homeScreenChecked', {\n      status: status\n    });\n  }\n  var WebAppShareMessageOpened = false;\n  function onPreparedMessageSent(eventType, eventData) {\n    if (WebAppShareMessageOpened) {\n      var requestData = WebAppShareMessageOpened;\n      WebAppShareMessageOpened = false;\n      if (requestData.callback) {\n        requestData.callback(true);\n      }\n      receiveWebViewEvent('shareMessageSent');\n    }\n  }\n  function onPreparedMessageFailed(eventType, eventData) {\n    if (WebAppShareMessageOpened) {\n      var requestData = WebAppShareMessageOpened;\n      WebAppShareMessageOpened = false;\n      if (requestData.callback) {\n        requestData.callback(false);\n      }\n      receiveWebViewEvent('shareMessageFailed', {\n        error: eventData.error\n      });\n    }\n  }\n  var WebAppEmojiStatusRequested = false;\n  function onEmojiStatusSet(eventType, eventData) {\n    if (WebAppEmojiStatusRequested) {\n      var requestData = WebAppEmojiStatusRequested;\n      WebAppEmojiStatusRequested = false;\n      if (requestData.callback) {\n        requestData.callback(true);\n      }\n      receiveWebViewEvent('emojiStatusSet');\n    }\n  }\n  function onEmojiStatusFailed(eventType, eventData) {\n    if (WebAppEmojiStatusRequested) {\n      var requestData = WebAppEmojiStatusRequested;\n      WebAppEmojiStatusRequested = false;\n      if (requestData.callback) {\n        requestData.callback(false);\n      }\n      receiveWebViewEvent('emojiStatusFailed', {\n        error: eventData.error\n      });\n    }\n  }\n  var WebAppEmojiStatusAccessRequested = false;\n  function onEmojiStatusAccessRequested(eventType, eventData) {\n    if (WebAppEmojiStatusAccessRequested) {\n      var requestData = WebAppEmojiStatusAccessRequested;\n      WebAppEmojiStatusAccessRequested = false;\n      if (requestData.callback) {\n        requestData.callback(eventData.status == 'allowed');\n      }\n      receiveWebViewEvent('emojiStatusAccessRequested', {\n        status: eventData.status\n      });\n    }\n  }\n  var webAppPopupOpened = false;\n  function onPopupClosed(eventType, eventData) {\n    if (webAppPopupOpened) {\n      var popupData = webAppPopupOpened;\n      webAppPopupOpened = false;\n      var button_id = null;\n      if (typeof eventData.button_id !== 'undefined') {\n        button_id = eventData.button_id;\n      }\n      if (popupData.callback) {\n        popupData.callback(button_id);\n      }\n      receiveWebViewEvent('popupClosed', {\n        button_id: button_id\n      });\n    }\n  }\n  function getHeaderColor() {\n    if (webAppHeaderColorKey == 'secondary_bg_color') {\n      return themeParams.secondary_bg_color;\n    } else if (webAppHeaderColorKey == 'bg_color') {\n      return themeParams.bg_color;\n    }\n    return webAppHeaderColor;\n  }\n  function setHeaderColor(color) {\n    if (!versionAtLeast('6.1')) {\n      console.warn('[Telegram.WebApp] Header color is not supported in version ' + webAppVersion);\n      return;\n    }\n    if (!versionAtLeast('6.9')) {\n      if (themeParams.bg_color && themeParams.bg_color == color) {\n        color = 'bg_color';\n      } else if (themeParams.secondary_bg_color && themeParams.secondary_bg_color == color) {\n        color = 'secondary_bg_color';\n      }\n    }\n    var head_color = null,\n      color_key = null;\n    if (color == 'bg_color' || color == 'secondary_bg_color') {\n      color_key = color;\n    } else if (versionAtLeast('6.9')) {\n      head_color = parseColorToHex(color);\n      if (!head_color) {\n        console.error('[Telegram.WebApp] Header color format is invalid', color);\n        throw Error('WebAppHeaderColorInvalid');\n      }\n    }\n    if (!versionAtLeast('6.9') && color_key != 'bg_color' && color_key != 'secondary_bg_color') {\n      console.error('[Telegram.WebApp] Header color key should be one of Telegram.WebApp.themeParams.bg_color, Telegram.WebApp.themeParams.secondary_bg_color, \\'bg_color\\', \\'secondary_bg_color\\'', color);\n      throw Error('WebAppHeaderColorKeyInvalid');\n    }\n    webAppHeaderColorKey = color_key;\n    webAppHeaderColor = head_color;\n    updateHeaderColor();\n  }\n  var appHeaderColorKey = null,\n    appHeaderColor = null;\n  function updateHeaderColor() {\n    if (appHeaderColorKey != webAppHeaderColorKey || appHeaderColor != webAppHeaderColor) {\n      appHeaderColorKey = webAppHeaderColorKey;\n      appHeaderColor = webAppHeaderColor;\n      if (appHeaderColor) {\n        WebView.postEvent('web_app_set_header_color', false, {\n          color: webAppHeaderColor\n        });\n      } else {\n        WebView.postEvent('web_app_set_header_color', false, {\n          color_key: webAppHeaderColorKey\n        });\n      }\n    }\n  }\n  function getBackgroundColor() {\n    if (webAppBackgroundColor == 'secondary_bg_color') {\n      return themeParams.secondary_bg_color;\n    } else if (webAppBackgroundColor == 'bg_color') {\n      return themeParams.bg_color;\n    }\n    return webAppBackgroundColor;\n  }\n  function setBackgroundColor(color) {\n    if (!versionAtLeast('6.1')) {\n      console.warn('[Telegram.WebApp] Background color is not supported in version ' + webAppVersion);\n      return;\n    }\n    var bg_color;\n    if (color == 'bg_color' || color == 'secondary_bg_color') {\n      bg_color = color;\n    } else {\n      bg_color = parseColorToHex(color);\n      if (!bg_color) {\n        console.error('[Telegram.WebApp] Background color format is invalid', color);\n        throw Error('WebAppBackgroundColorInvalid');\n      }\n    }\n    webAppBackgroundColor = bg_color;\n    updateBackgroundColor();\n  }\n  var appBackgroundColor = null;\n  function updateBackgroundColor() {\n    var color = getBackgroundColor();\n    if (appBackgroundColor != color) {\n      appBackgroundColor = color;\n      WebView.postEvent('web_app_set_background_color', false, {\n        color: color\n      });\n    }\n  }\n  var bottomBarColor = 'bottom_bar_bg_color';\n  function getBottomBarColor() {\n    if (bottomBarColor == 'bottom_bar_bg_color') {\n      return themeParams.bottom_bar_bg_color || themeParams.secondary_bg_color || '#ffffff';\n    } else if (bottomBarColor == 'secondary_bg_color') {\n      return themeParams.secondary_bg_color;\n    } else if (bottomBarColor == 'bg_color') {\n      return themeParams.bg_color;\n    }\n    return bottomBarColor;\n  }\n  function setBottomBarColor(color) {\n    if (!versionAtLeast('7.10')) {\n      console.warn('[Telegram.WebApp] Bottom bar color is not supported in version ' + webAppVersion);\n      return;\n    }\n    var bg_color;\n    if (color == 'bg_color' || color == 'secondary_bg_color' || color == 'bottom_bar_bg_color') {\n      bg_color = color;\n    } else {\n      bg_color = parseColorToHex(color);\n      if (!bg_color) {\n        console.error('[Telegram.WebApp] Bottom bar color format is invalid', color);\n        throw Error('WebAppBottomBarColorInvalid');\n      }\n    }\n    bottomBarColor = bg_color;\n    updateBottomBarColor();\n    window.Telegram.WebApp.SecondaryButton.setParams({});\n  }\n  var appBottomBarColor = null;\n  function updateBottomBarColor() {\n    var color = getBottomBarColor();\n    if (appBottomBarColor != color) {\n      appBottomBarColor = color;\n      WebView.postEvent('web_app_set_bottom_bar_color', false, {\n        color: color\n      });\n    }\n    if (initParams.tgWebAppDebug) {\n      updateDebugBottomBar();\n    }\n  }\n  function parseColorToHex(color) {\n    color += '';\n    var match;\n    if (match = /^\\s*#([0-9a-f]{6})\\s*$/i.exec(color)) {\n      return '#' + match[1].toLowerCase();\n    } else if (match = /^\\s*#([0-9a-f])([0-9a-f])([0-9a-f])\\s*$/i.exec(color)) {\n      return ('#' + match[1] + match[1] + match[2] + match[2] + match[3] + match[3]).toLowerCase();\n    } else if (match = /^\\s*rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+\\.{0,1}\\d*))?\\)\\s*$/.exec(color)) {\n      var r = parseInt(match[1]),\n        g = parseInt(match[2]),\n        b = parseInt(match[3]);\n      r = (r < 16 ? '0' : '') + r.toString(16);\n      g = (g < 16 ? '0' : '') + g.toString(16);\n      b = (b < 16 ? '0' : '') + b.toString(16);\n      return '#' + r + g + b;\n    }\n    return false;\n  }\n  function isColorDark(rgb) {\n    rgb = rgb.replace(/[\\s#]/g, '');\n    if (rgb.length == 3) {\n      rgb = rgb[0] + rgb[0] + rgb[1] + rgb[1] + rgb[2] + rgb[2];\n    }\n    var r = parseInt(rgb.substr(0, 2), 16);\n    var g = parseInt(rgb.substr(2, 2), 16);\n    var b = parseInt(rgb.substr(4, 2), 16);\n    var hsp = Math.sqrt(0.299 * (r * r) + 0.587 * (g * g) + 0.114 * (b * b));\n    return hsp < 120;\n  }\n  function versionCompare(v1, v2) {\n    if (typeof v1 !== 'string') v1 = '';\n    if (typeof v2 !== 'string') v2 = '';\n    v1 = v1.replace(/^\\s+|\\s+$/g, '').split('.');\n    v2 = v2.replace(/^\\s+|\\s+$/g, '').split('.');\n    var a = Math.max(v1.length, v2.length),\n      i,\n      p1,\n      p2;\n    for (i = 0; i < a; i++) {\n      p1 = parseInt(v1[i]) || 0;\n      p2 = parseInt(v2[i]) || 0;\n      if (p1 == p2) continue;\n      if (p1 > p2) return 1;\n      return -1;\n    }\n    return 0;\n  }\n  function versionAtLeast(ver) {\n    return versionCompare(webAppVersion, ver) >= 0;\n  }\n  function byteLength(str) {\n    if (window.Blob) {\n      try {\n        return new Blob([str]).size;\n      } catch (e) {}\n    }\n    var s = str.length;\n    for (var i = str.length - 1; i >= 0; i--) {\n      var code = str.charCodeAt(i);\n      if (code > 0x7f && code <= 0x7ff) s++;else if (code > 0x7ff && code <= 0xffff) s += 2;\n      if (code >= 0xdc00 && code <= 0xdfff) i--;\n    }\n    return s;\n  }\n  var BackButton = function () {\n    var isVisible = false;\n    var backButton = {};\n    Object.defineProperty(backButton, 'isVisible', {\n      set: function (val) {\n        setParams({\n          is_visible: val\n        });\n      },\n      get: function () {\n        return isVisible;\n      },\n      enumerable: true\n    });\n    var curButtonState = null;\n    WebView.onEvent('back_button_pressed', onBackButtonPressed);\n    function onBackButtonPressed() {\n      receiveWebViewEvent('backButtonClicked');\n    }\n    function buttonParams() {\n      return {\n        is_visible: isVisible\n      };\n    }\n    function buttonState(btn_params) {\n      if (typeof btn_params === 'undefined') {\n        btn_params = buttonParams();\n      }\n      return JSON.stringify(btn_params);\n    }\n    function buttonCheckVersion() {\n      if (!versionAtLeast('6.1')) {\n        console.warn('[Telegram.WebApp] BackButton is not supported in version ' + webAppVersion);\n        return false;\n      }\n      return true;\n    }\n    function updateButton() {\n      var btn_params = buttonParams();\n      var btn_state = buttonState(btn_params);\n      if (curButtonState === btn_state) {\n        return;\n      }\n      curButtonState = btn_state;\n      WebView.postEvent('web_app_setup_back_button', false, btn_params);\n    }\n    function setParams(params) {\n      if (!buttonCheckVersion()) {\n        return backButton;\n      }\n      if (typeof params.is_visible !== 'undefined') {\n        isVisible = !!params.is_visible;\n      }\n      updateButton();\n      return backButton;\n    }\n    backButton.onClick = function (callback) {\n      if (buttonCheckVersion()) {\n        onWebViewEvent('backButtonClicked', callback);\n      }\n      return backButton;\n    };\n    backButton.offClick = function (callback) {\n      if (buttonCheckVersion()) {\n        offWebViewEvent('backButtonClicked', callback);\n      }\n      return backButton;\n    };\n    backButton.show = function () {\n      return setParams({\n        is_visible: true\n      });\n    };\n    backButton.hide = function () {\n      return setParams({\n        is_visible: false\n      });\n    };\n    return backButton;\n  }();\n  var debugBottomBar = null,\n    debugBottomBarBtns = {},\n    bottomBarHeight = 0;\n  if (initParams.tgWebAppDebug) {\n    debugBottomBar = document.createElement('tg-bottom-bar');\n    var debugBottomBarStyle = {\n      display: 'flex',\n      gap: '7px',\n      font: '600 14px/18px sans-serif',\n      width: '100%',\n      background: getBottomBarColor(),\n      position: 'fixed',\n      left: '0',\n      right: '0',\n      bottom: '0',\n      margin: '0',\n      padding: '7px',\n      textAlign: 'center',\n      boxSizing: 'border-box',\n      zIndex: '10000'\n    };\n    for (var k in debugBottomBarStyle) {\n      debugBottomBar.style[k] = debugBottomBarStyle[k];\n    }\n    document.addEventListener('DOMContentLoaded', function onDomLoaded(event) {\n      document.removeEventListener('DOMContentLoaded', onDomLoaded);\n      document.body.appendChild(debugBottomBar);\n    });\n    var animStyle = document.createElement('style');\n    animStyle.innerHTML = 'tg-bottom-button.shine { position: relative; overflow: hidden; } tg-bottom-button.shine:before { content:\"\"; position: absolute; top: 0; width: 100%; height: 100%; background: linear-gradient(120deg, transparent, rgba(255, 255, 255, .2), transparent); animation: tg-bottom-button-shine 5s ease-in-out infinite; } @-webkit-keyframes tg-bottom-button-shine { 0% {left: -100%;} 12%,100% {left: 100%}} @keyframes tg-bottom-button-shine { 0% {left: -100%;} 12%,100% {left: 100%}}';\n    debugBottomBar.appendChild(animStyle);\n  }\n  function updateDebugBottomBar() {\n    var mainBtn = debugBottomBarBtns.main._bottomButton;\n    var secondaryBtn = debugBottomBarBtns.secondary._bottomButton;\n    if (mainBtn.isVisible || secondaryBtn.isVisible) {\n      debugBottomBar.style.display = 'flex';\n      bottomBarHeight = 58;\n      if (mainBtn.isVisible && secondaryBtn.isVisible) {\n        if (secondaryBtn.position == 'top') {\n          debugBottomBar.style.flexDirection = 'column-reverse';\n          bottomBarHeight += 51;\n        } else if (secondaryBtn.position == 'bottom') {\n          debugBottomBar.style.flexDirection = 'column';\n          bottomBarHeight += 51;\n        } else if (secondaryBtn.position == 'left') {\n          debugBottomBar.style.flexDirection = 'row-reverse';\n        } else if (secondaryBtn.position == 'right') {\n          debugBottomBar.style.flexDirection = 'row';\n        }\n      }\n    } else {\n      debugBottomBar.style.display = 'none';\n      bottomBarHeight = 0;\n    }\n    debugBottomBar.style.background = getBottomBarColor();\n    if (document.documentElement) {\n      document.documentElement.style.boxSizing = 'border-box';\n      document.documentElement.style.paddingBottom = bottomBarHeight + 'px';\n    }\n    setViewportHeight();\n  }\n  var BottomButtonConstructor = function (type) {\n    var isMainButton = type == 'main';\n    if (isMainButton) {\n      var setupFnName = 'web_app_setup_main_button';\n      var tgEventName = 'main_button_pressed';\n      var webViewEventName = 'mainButtonClicked';\n      var buttonTextDefault = 'Continue';\n      var buttonColorDefault = function () {\n        return themeParams.button_color || '#2481cc';\n      };\n      var buttonTextColorDefault = function () {\n        return themeParams.button_text_color || '#ffffff';\n      };\n    } else {\n      var setupFnName = 'web_app_setup_secondary_button';\n      var tgEventName = 'secondary_button_pressed';\n      var webViewEventName = 'secondaryButtonClicked';\n      var buttonTextDefault = 'Cancel';\n      var buttonColorDefault = function () {\n        return getBottomBarColor();\n      };\n      var buttonTextColorDefault = function () {\n        return themeParams.button_color || '#2481cc';\n      };\n    }\n    var isVisible = false;\n    var isActive = true;\n    var hasShineEffect = false;\n    var isProgressVisible = false;\n    var buttonType = type;\n    var buttonText = buttonTextDefault;\n    var buttonColor = false;\n    var buttonTextColor = false;\n    var buttonPosition = 'left';\n    var bottomButton = {};\n    Object.defineProperty(bottomButton, 'type', {\n      get: function () {\n        return buttonType;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(bottomButton, 'text', {\n      set: function (val) {\n        bottomButton.setParams({\n          text: val\n        });\n      },\n      get: function () {\n        return buttonText;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(bottomButton, 'color', {\n      set: function (val) {\n        bottomButton.setParams({\n          color: val\n        });\n      },\n      get: function () {\n        return buttonColor || buttonColorDefault();\n      },\n      enumerable: true\n    });\n    Object.defineProperty(bottomButton, 'textColor', {\n      set: function (val) {\n        bottomButton.setParams({\n          text_color: val\n        });\n      },\n      get: function () {\n        return buttonTextColor || buttonTextColorDefault();\n      },\n      enumerable: true\n    });\n    Object.defineProperty(bottomButton, 'isVisible', {\n      set: function (val) {\n        bottomButton.setParams({\n          is_visible: val\n        });\n      },\n      get: function () {\n        return isVisible;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(bottomButton, 'isProgressVisible', {\n      get: function () {\n        return isProgressVisible;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(bottomButton, 'isActive', {\n      set: function (val) {\n        bottomButton.setParams({\n          is_active: val\n        });\n      },\n      get: function () {\n        return isActive;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(bottomButton, 'hasShineEffect', {\n      set: function (val) {\n        bottomButton.setParams({\n          has_shine_effect: val\n        });\n      },\n      get: function () {\n        return hasShineEffect;\n      },\n      enumerable: true\n    });\n    if (!isMainButton) {\n      Object.defineProperty(bottomButton, 'position', {\n        set: function (val) {\n          bottomButton.setParams({\n            position: val\n          });\n        },\n        get: function () {\n          return buttonPosition;\n        },\n        enumerable: true\n      });\n    }\n    var curButtonState = null;\n    WebView.onEvent(tgEventName, onBottomButtonPressed);\n    var debugBtn = null;\n    if (initParams.tgWebAppDebug) {\n      debugBtn = document.createElement('tg-bottom-button');\n      var debugBtnStyle = {\n        display: 'none',\n        width: '100%',\n        height: '44px',\n        borderRadius: '0',\n        background: 'no-repeat right center',\n        padding: '13px 15px',\n        textAlign: 'center',\n        boxSizing: 'border-box'\n      };\n      for (var k in debugBtnStyle) {\n        debugBtn.style[k] = debugBtnStyle[k];\n      }\n      debugBottomBar.appendChild(debugBtn);\n      debugBtn.addEventListener('click', onBottomButtonPressed, false);\n      debugBtn._bottomButton = bottomButton;\n      debugBottomBarBtns[type] = debugBtn;\n    }\n    function onBottomButtonPressed() {\n      if (isActive) {\n        receiveWebViewEvent(webViewEventName);\n      }\n    }\n    function buttonParams() {\n      var color = bottomButton.color;\n      var text_color = bottomButton.textColor;\n      if (isVisible) {\n        var params = {\n          is_visible: true,\n          is_active: isActive,\n          is_progress_visible: isProgressVisible,\n          text: buttonText,\n          color: color,\n          text_color: text_color,\n          has_shine_effect: hasShineEffect && isActive && !isProgressVisible\n        };\n        if (!isMainButton) {\n          params.position = buttonPosition;\n        }\n      } else {\n        var params = {\n          is_visible: false\n        };\n      }\n      return params;\n    }\n    function buttonState(btn_params) {\n      if (typeof btn_params === 'undefined') {\n        btn_params = buttonParams();\n      }\n      return JSON.stringify(btn_params);\n    }\n    function updateButton() {\n      var btn_params = buttonParams();\n      var btn_state = buttonState(btn_params);\n      if (curButtonState === btn_state) {\n        return;\n      }\n      curButtonState = btn_state;\n      WebView.postEvent(setupFnName, false, btn_params);\n      if (initParams.tgWebAppDebug) {\n        updateDebugButton(btn_params);\n      }\n    }\n    function updateDebugButton(btn_params) {\n      if (btn_params.is_visible) {\n        debugBtn.style.display = 'block';\n        debugBtn.style.opacity = btn_params.is_active ? '1' : '0.8';\n        debugBtn.style.cursor = btn_params.is_active ? 'pointer' : 'auto';\n        debugBtn.disabled = !btn_params.is_active;\n        debugBtn.innerText = btn_params.text;\n        debugBtn.className = btn_params.has_shine_effect ? 'shine' : '';\n        debugBtn.style.backgroundImage = btn_params.is_progress_visible ? \"url('data:image/svg+xml,\" + encodeURIComponent('<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewport=\"0 0 48 48\" width=\"48px\" height=\"48px\"><circle cx=\"50%\" cy=\"50%\" stroke=\"' + btn_params.text_color + '\" stroke-width=\"2.25\" stroke-linecap=\"round\" fill=\"none\" stroke-dashoffset=\"106\" r=\"9\" stroke-dasharray=\"56.52\" rotate=\"-90\"><animate attributeName=\"stroke-dashoffset\" attributeType=\"XML\" dur=\"360s\" from=\"0\" to=\"12500\" repeatCount=\"indefinite\"></animate><animateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" dur=\"1s\" from=\"-90 24 24\" to=\"630 24 24\" repeatCount=\"indefinite\"></animateTransform></circle></svg>') + \"')\" : 'none';\n        debugBtn.style.backgroundColor = btn_params.color;\n        debugBtn.style.color = btn_params.text_color;\n      } else {\n        debugBtn.style.display = 'none';\n      }\n      updateDebugBottomBar();\n    }\n    function setParams(params) {\n      if (typeof params.text !== 'undefined') {\n        var text = strTrim(params.text);\n        if (!text.length) {\n          console.error('[Telegram.WebApp] Bottom button text is required', params.text);\n          throw Error('WebAppBottomButtonParamInvalid');\n        }\n        if (text.length > 64) {\n          console.error('[Telegram.WebApp] Bottom button text is too long', text);\n          throw Error('WebAppBottomButtonParamInvalid');\n        }\n        buttonText = text;\n      }\n      if (typeof params.color !== 'undefined') {\n        if (params.color === false || params.color === null) {\n          buttonColor = false;\n        } else {\n          var color = parseColorToHex(params.color);\n          if (!color) {\n            console.error('[Telegram.WebApp] Bottom button color format is invalid', params.color);\n            throw Error('WebAppBottomButtonParamInvalid');\n          }\n          buttonColor = color;\n        }\n      }\n      if (typeof params.text_color !== 'undefined') {\n        if (params.text_color === false || params.text_color === null) {\n          buttonTextColor = false;\n        } else {\n          var text_color = parseColorToHex(params.text_color);\n          if (!text_color) {\n            console.error('[Telegram.WebApp] Bottom button text color format is invalid', params.text_color);\n            throw Error('WebAppBottomButtonParamInvalid');\n          }\n          buttonTextColor = text_color;\n        }\n      }\n      if (typeof params.is_visible !== 'undefined') {\n        if (params.is_visible && !bottomButton.text.length) {\n          console.error('[Telegram.WebApp] Bottom button text is required');\n          throw Error('WebAppBottomButtonParamInvalid');\n        }\n        isVisible = !!params.is_visible;\n      }\n      if (typeof params.has_shine_effect !== 'undefined') {\n        hasShineEffect = !!params.has_shine_effect;\n      }\n      if (!isMainButton && typeof params.position !== 'undefined') {\n        if (params.position != 'left' && params.position != 'right' && params.position != 'top' && params.position != 'bottom') {\n          console.error('[Telegram.WebApp] Bottom button posiition is invalid', params.position);\n          throw Error('WebAppBottomButtonParamInvalid');\n        }\n        buttonPosition = params.position;\n      }\n      if (typeof params.is_active !== 'undefined') {\n        isActive = !!params.is_active;\n      }\n      updateButton();\n      return bottomButton;\n    }\n    bottomButton.setText = function (text) {\n      return bottomButton.setParams({\n        text: text\n      });\n    };\n    bottomButton.onClick = function (callback) {\n      onWebViewEvent(webViewEventName, callback);\n      return bottomButton;\n    };\n    bottomButton.offClick = function (callback) {\n      offWebViewEvent(webViewEventName, callback);\n      return bottomButton;\n    };\n    bottomButton.show = function () {\n      return bottomButton.setParams({\n        is_visible: true\n      });\n    };\n    bottomButton.hide = function () {\n      return bottomButton.setParams({\n        is_visible: false\n      });\n    };\n    bottomButton.enable = function () {\n      return bottomButton.setParams({\n        is_active: true\n      });\n    };\n    bottomButton.disable = function () {\n      return bottomButton.setParams({\n        is_active: false\n      });\n    };\n    bottomButton.showProgress = function (leaveActive) {\n      isActive = !!leaveActive;\n      isProgressVisible = true;\n      updateButton();\n      return bottomButton;\n    };\n    bottomButton.hideProgress = function () {\n      if (!bottomButton.isActive) {\n        isActive = true;\n      }\n      isProgressVisible = false;\n      updateButton();\n      return bottomButton;\n    };\n    bottomButton.setParams = setParams;\n    return bottomButton;\n  };\n  var MainButton = BottomButtonConstructor('main');\n  var SecondaryButton = BottomButtonConstructor('secondary');\n  var SettingsButton = function () {\n    var isVisible = false;\n    var settingsButton = {};\n    Object.defineProperty(settingsButton, 'isVisible', {\n      set: function (val) {\n        setParams({\n          is_visible: val\n        });\n      },\n      get: function () {\n        return isVisible;\n      },\n      enumerable: true\n    });\n    var curButtonState = null;\n    WebView.onEvent('settings_button_pressed', onSettingsButtonPressed);\n    function onSettingsButtonPressed() {\n      receiveWebViewEvent('settingsButtonClicked');\n    }\n    function buttonParams() {\n      return {\n        is_visible: isVisible\n      };\n    }\n    function buttonState(btn_params) {\n      if (typeof btn_params === 'undefined') {\n        btn_params = buttonParams();\n      }\n      return JSON.stringify(btn_params);\n    }\n    function buttonCheckVersion() {\n      if (!versionAtLeast('6.10')) {\n        console.warn('[Telegram.WebApp] SettingsButton is not supported in version ' + webAppVersion);\n        return false;\n      }\n      return true;\n    }\n    function updateButton() {\n      var btn_params = buttonParams();\n      var btn_state = buttonState(btn_params);\n      if (curButtonState === btn_state) {\n        return;\n      }\n      curButtonState = btn_state;\n      WebView.postEvent('web_app_setup_settings_button', false, btn_params);\n    }\n    function setParams(params) {\n      if (!buttonCheckVersion()) {\n        return settingsButton;\n      }\n      if (typeof params.is_visible !== 'undefined') {\n        isVisible = !!params.is_visible;\n      }\n      updateButton();\n      return settingsButton;\n    }\n    settingsButton.onClick = function (callback) {\n      if (buttonCheckVersion()) {\n        onWebViewEvent('settingsButtonClicked', callback);\n      }\n      return settingsButton;\n    };\n    settingsButton.offClick = function (callback) {\n      if (buttonCheckVersion()) {\n        offWebViewEvent('settingsButtonClicked', callback);\n      }\n      return settingsButton;\n    };\n    settingsButton.show = function () {\n      return setParams({\n        is_visible: true\n      });\n    };\n    settingsButton.hide = function () {\n      return setParams({\n        is_visible: false\n      });\n    };\n    return settingsButton;\n  }();\n  var HapticFeedback = function () {\n    var hapticFeedback = {};\n    function triggerFeedback(params) {\n      if (!versionAtLeast('6.1')) {\n        console.warn('[Telegram.WebApp] HapticFeedback is not supported in version ' + webAppVersion);\n        return hapticFeedback;\n      }\n      if (params.type == 'impact') {\n        if (params.impact_style != 'light' && params.impact_style != 'medium' && params.impact_style != 'heavy' && params.impact_style != 'rigid' && params.impact_style != 'soft') {\n          console.error('[Telegram.WebApp] Haptic impact style is invalid', params.impact_style);\n          throw Error('WebAppHapticImpactStyleInvalid');\n        }\n      } else if (params.type == 'notification') {\n        if (params.notification_type != 'error' && params.notification_type != 'success' && params.notification_type != 'warning') {\n          console.error('[Telegram.WebApp] Haptic notification type is invalid', params.notification_type);\n          throw Error('WebAppHapticNotificationTypeInvalid');\n        }\n      } else if (params.type == 'selection_change') {\n        // no params needed\n      } else {\n        console.error('[Telegram.WebApp] Haptic feedback type is invalid', params.type);\n        throw Error('WebAppHapticFeedbackTypeInvalid');\n      }\n      WebView.postEvent('web_app_trigger_haptic_feedback', false, params);\n      return hapticFeedback;\n    }\n    hapticFeedback.impactOccurred = function (style) {\n      return triggerFeedback({\n        type: 'impact',\n        impact_style: style\n      });\n    };\n    hapticFeedback.notificationOccurred = function (type) {\n      return triggerFeedback({\n        type: 'notification',\n        notification_type: type\n      });\n    };\n    hapticFeedback.selectionChanged = function () {\n      return triggerFeedback({\n        type: 'selection_change'\n      });\n    };\n    return hapticFeedback;\n  }();\n  var CloudStorage = function () {\n    var cloudStorage = {};\n    function invokeStorageMethod(method, params, callback) {\n      if (!versionAtLeast('6.9')) {\n        console.error('[Telegram.WebApp] CloudStorage is not supported in version ' + webAppVersion);\n        throw Error('WebAppMethodUnsupported');\n      }\n      invokeCustomMethod(method, params, callback);\n      return cloudStorage;\n    }\n    cloudStorage.setItem = function (key, value, callback) {\n      return invokeStorageMethod('saveStorageValue', {\n        key: key,\n        value: value\n      }, callback);\n    };\n    cloudStorage.getItem = function (key, callback) {\n      return cloudStorage.getItems([key], callback ? function (err, res) {\n        if (err) callback(err);else callback(null, res[key]);\n      } : null);\n    };\n    cloudStorage.getItems = function (keys, callback) {\n      return invokeStorageMethod('getStorageValues', {\n        keys: keys\n      }, callback);\n    };\n    cloudStorage.removeItem = function (key, callback) {\n      return cloudStorage.removeItems([key], callback);\n    };\n    cloudStorage.removeItems = function (keys, callback) {\n      return invokeStorageMethod('deleteStorageValues', {\n        keys: keys\n      }, callback);\n    };\n    cloudStorage.getKeys = function (callback) {\n      return invokeStorageMethod('getStorageKeys', {}, callback);\n    };\n    return cloudStorage;\n  }();\n  var BiometricManager = function () {\n    var isInited = false;\n    var isBiometricAvailable = false;\n    var biometricType = 'unknown';\n    var isAccessRequested = false;\n    var isAccessGranted = false;\n    var isBiometricTokenSaved = false;\n    var deviceId = '';\n    var biometricManager = {};\n    Object.defineProperty(biometricManager, 'isInited', {\n      get: function () {\n        return isInited;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(biometricManager, 'isBiometricAvailable', {\n      get: function () {\n        return isInited && isBiometricAvailable;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(biometricManager, 'biometricType', {\n      get: function () {\n        return biometricType || 'unknown';\n      },\n      enumerable: true\n    });\n    Object.defineProperty(biometricManager, 'isAccessRequested', {\n      get: function () {\n        return isAccessRequested;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(biometricManager, 'isAccessGranted', {\n      get: function () {\n        return isAccessRequested && isAccessGranted;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(biometricManager, 'isBiometricTokenSaved', {\n      get: function () {\n        return isBiometricTokenSaved;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(biometricManager, 'deviceId', {\n      get: function () {\n        return deviceId || '';\n      },\n      enumerable: true\n    });\n    var initRequestState = {\n      callbacks: []\n    };\n    var accessRequestState = false;\n    var authRequestState = false;\n    var tokenRequestState = false;\n    WebView.onEvent('biometry_info_received', onBiometryInfoReceived);\n    WebView.onEvent('biometry_auth_requested', onBiometryAuthRequested);\n    WebView.onEvent('biometry_token_updated', onBiometryTokenUpdated);\n    function onBiometryInfoReceived(eventType, eventData) {\n      isInited = true;\n      if (eventData.available) {\n        isBiometricAvailable = true;\n        biometricType = eventData.type || 'unknown';\n        if (eventData.access_requested) {\n          isAccessRequested = true;\n          isAccessGranted = !!eventData.access_granted;\n          isBiometricTokenSaved = !!eventData.token_saved;\n        } else {\n          isAccessRequested = false;\n          isAccessGranted = false;\n          isBiometricTokenSaved = false;\n        }\n      } else {\n        isBiometricAvailable = false;\n        biometricType = 'unknown';\n        isAccessRequested = false;\n        isAccessGranted = false;\n        isBiometricTokenSaved = false;\n      }\n      deviceId = eventData.device_id || '';\n      if (initRequestState.callbacks.length > 0) {\n        for (var i = 0; i < initRequestState.callbacks.length; i++) {\n          var callback = initRequestState.callbacks[i];\n          callback();\n        }\n        initRequestState.callbacks = [];\n      }\n      if (accessRequestState) {\n        var state = accessRequestState;\n        accessRequestState = false;\n        if (state.callback) {\n          state.callback(isAccessGranted);\n        }\n      }\n      receiveWebViewEvent('biometricManagerUpdated');\n    }\n    function onBiometryAuthRequested(eventType, eventData) {\n      var isAuthenticated = eventData.status == 'authorized',\n        biometricToken = eventData.token || '';\n      if (authRequestState) {\n        var state = authRequestState;\n        authRequestState = false;\n        if (state.callback) {\n          state.callback(isAuthenticated, isAuthenticated ? biometricToken : null);\n        }\n      }\n      receiveWebViewEvent('biometricAuthRequested', isAuthenticated ? {\n        isAuthenticated: true,\n        biometricToken: biometricToken\n      } : {\n        isAuthenticated: false\n      });\n    }\n    function onBiometryTokenUpdated(eventType, eventData) {\n      var applied = false;\n      if (isBiometricAvailable && isAccessRequested) {\n        if (eventData.status == 'updated') {\n          isBiometricTokenSaved = true;\n          applied = true;\n        } else if (eventData.status == 'removed') {\n          isBiometricTokenSaved = false;\n          applied = true;\n        }\n      }\n      if (tokenRequestState) {\n        var state = tokenRequestState;\n        tokenRequestState = false;\n        if (state.callback) {\n          state.callback(applied);\n        }\n      }\n      receiveWebViewEvent('biometricTokenUpdated', {\n        isUpdated: applied\n      });\n    }\n    function checkVersion() {\n      if (!versionAtLeast('7.2')) {\n        console.warn('[Telegram.WebApp] BiometricManager is not supported in version ' + webAppVersion);\n        return false;\n      }\n      return true;\n    }\n    function checkInit() {\n      if (!isInited) {\n        console.error('[Telegram.WebApp] BiometricManager should be inited before using.');\n        throw Error('WebAppBiometricManagerNotInited');\n      }\n      return true;\n    }\n    biometricManager.init = function (callback) {\n      if (!checkVersion()) {\n        return biometricManager;\n      }\n      if (isInited) {\n        return biometricManager;\n      }\n      if (callback) {\n        initRequestState.callbacks.push(callback);\n      }\n      WebView.postEvent('web_app_biometry_get_info', false);\n      return biometricManager;\n    };\n    biometricManager.requestAccess = function (params, callback) {\n      if (!checkVersion()) {\n        return biometricManager;\n      }\n      checkInit();\n      if (!isBiometricAvailable) {\n        console.error('[Telegram.WebApp] Biometrics is not available on this device.');\n        throw Error('WebAppBiometricManagerBiometricsNotAvailable');\n      }\n      if (accessRequestState) {\n        console.error('[Telegram.WebApp] Access is already requested');\n        throw Error('WebAppBiometricManagerAccessRequested');\n      }\n      var popup_params = {};\n      if (typeof params.reason !== 'undefined') {\n        var reason = strTrim(params.reason);\n        if (reason.length > 128) {\n          console.error('[Telegram.WebApp] Biometric reason is too long', reason);\n          throw Error('WebAppBiometricRequestAccessParamInvalid');\n        }\n        if (reason.length > 0) {\n          popup_params.reason = reason;\n        }\n      }\n      accessRequestState = {\n        callback: callback\n      };\n      WebView.postEvent('web_app_biometry_request_access', false, popup_params);\n      return biometricManager;\n    };\n    biometricManager.authenticate = function (params, callback) {\n      if (!checkVersion()) {\n        return biometricManager;\n      }\n      checkInit();\n      if (!isBiometricAvailable) {\n        console.error('[Telegram.WebApp] Biometrics is not available on this device.');\n        throw Error('WebAppBiometricManagerBiometricsNotAvailable');\n      }\n      if (!isAccessGranted) {\n        console.error('[Telegram.WebApp] Biometric access was not granted by the user.');\n        throw Error('WebAppBiometricManagerBiometricAccessNotGranted');\n      }\n      if (authRequestState) {\n        console.error('[Telegram.WebApp] Authentication request is already in progress.');\n        throw Error('WebAppBiometricManagerAuthenticationRequested');\n      }\n      var popup_params = {};\n      if (typeof params.reason !== 'undefined') {\n        var reason = strTrim(params.reason);\n        if (reason.length > 128) {\n          console.error('[Telegram.WebApp] Biometric reason is too long', reason);\n          throw Error('WebAppBiometricRequestAccessParamInvalid');\n        }\n        if (reason.length > 0) {\n          popup_params.reason = reason;\n        }\n      }\n      authRequestState = {\n        callback: callback\n      };\n      WebView.postEvent('web_app_biometry_request_auth', false, popup_params);\n      return biometricManager;\n    };\n    biometricManager.updateBiometricToken = function (token, callback) {\n      if (!checkVersion()) {\n        return biometricManager;\n      }\n      token = token || '';\n      if (token.length > 1024) {\n        console.error('[Telegram.WebApp] Token is too long', token);\n        throw Error('WebAppBiometricManagerTokenInvalid');\n      }\n      checkInit();\n      if (!isBiometricAvailable) {\n        console.error('[Telegram.WebApp] Biometrics is not available on this device.');\n        throw Error('WebAppBiometricManagerBiometricsNotAvailable');\n      }\n      if (!isAccessGranted) {\n        console.error('[Telegram.WebApp] Biometric access was not granted by the user.');\n        throw Error('WebAppBiometricManagerBiometricAccessNotGranted');\n      }\n      if (tokenRequestState) {\n        console.error('[Telegram.WebApp] Token request is already in progress.');\n        throw Error('WebAppBiometricManagerTokenUpdateRequested');\n      }\n      tokenRequestState = {\n        callback: callback\n      };\n      WebView.postEvent('web_app_biometry_update_token', false, {\n        token: token\n      });\n      return biometricManager;\n    };\n    biometricManager.openSettings = function () {\n      if (!checkVersion()) {\n        return biometricManager;\n      }\n      checkInit();\n      if (!isBiometricAvailable) {\n        console.error('[Telegram.WebApp] Biometrics is not available on this device.');\n        throw Error('WebAppBiometricManagerBiometricsNotAvailable');\n      }\n      if (!isAccessRequested) {\n        console.error('[Telegram.WebApp] Biometric access was not requested yet.');\n        throw Error('WebAppBiometricManagerBiometricsAccessNotRequested');\n      }\n      if (isAccessGranted) {\n        console.warn('[Telegram.WebApp] Biometric access was granted by the user, no need to go to settings.');\n        return biometricManager;\n      }\n      WebView.postEvent('web_app_biometry_open_settings', false);\n      return biometricManager;\n    };\n    return biometricManager;\n  }();\n  var LocationManager = function () {\n    var isInited = false;\n    var isLocationAvailable = false;\n    var isAccessRequested = false;\n    var isAccessGranted = false;\n    var locationManager = {};\n    Object.defineProperty(locationManager, 'isInited', {\n      get: function () {\n        return isInited;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(locationManager, 'isLocationAvailable', {\n      get: function () {\n        return isInited && isLocationAvailable;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(locationManager, 'isAccessRequested', {\n      get: function () {\n        return isAccessRequested;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(locationManager, 'isAccessGranted', {\n      get: function () {\n        return isAccessRequested && isAccessGranted;\n      },\n      enumerable: true\n    });\n    var initRequestState = {\n      callbacks: []\n    };\n    var getRequestState = {\n      callbacks: []\n    };\n    WebView.onEvent('location_checked', onLocationChecked);\n    WebView.onEvent('location_requested', onLocationRequested);\n    function onLocationChecked(eventType, eventData) {\n      isInited = true;\n      if (eventData.available) {\n        isLocationAvailable = true;\n        if (eventData.access_requested) {\n          isAccessRequested = true;\n          isAccessGranted = !!eventData.access_granted;\n        } else {\n          isAccessRequested = false;\n          isAccessGranted = false;\n        }\n      } else {\n        isLocationAvailable = false;\n        isAccessRequested = false;\n        isAccessGranted = false;\n      }\n      if (initRequestState.callbacks.length > 0) {\n        for (var i = 0; i < initRequestState.callbacks.length; i++) {\n          var callback = initRequestState.callbacks[i];\n          callback();\n        }\n        initRequestState.callbacks = [];\n      }\n      receiveWebViewEvent('locationManagerUpdated');\n    }\n    function onLocationRequested(eventType, eventData) {\n      if (!eventData.available) {\n        locationData = null;\n      } else {\n        var locationData = {\n          latitude: eventData.latitude,\n          longitude: eventData.longitude,\n          altitude: null,\n          course: null,\n          speed: null,\n          horizontal_accuracy: null,\n          vertical_accuracy: null,\n          course_accuracy: null,\n          speed_accuracy: null\n        };\n        if (typeof eventData.altitude !== 'undefined' && eventData.altitude !== null) {\n          locationData.altitude = eventData.altitude;\n        }\n        if (typeof eventData.course !== 'undefined' && eventData.course !== null) {\n          locationData.course = eventData.course % 360;\n        }\n        if (typeof eventData.speed !== 'undefined' && eventData.speed !== null) {\n          locationData.speed = eventData.speed;\n        }\n        if (typeof eventData.horizontal_accuracy !== 'undefined' && eventData.horizontal_accuracy !== null) {\n          locationData.horizontal_accuracy = eventData.horizontal_accuracy;\n        }\n        if (typeof eventData.vertical_accuracy !== 'undefined' && eventData.vertical_accuracy !== null) {\n          locationData.vertical_accuracy = eventData.vertical_accuracy;\n        }\n        if (typeof eventData.course_accuracy !== 'undefined' && eventData.course_accuracy !== null) {\n          locationData.course_accuracy = eventData.course_accuracy;\n        }\n        if (typeof eventData.speed_accuracy !== 'undefined' && eventData.speed_accuracy !== null) {\n          locationData.speed_accuracy = eventData.speed_accuracy;\n        }\n      }\n      if (!eventData.available || !isLocationAvailable || !isAccessRequested || !isAccessGranted) {\n        initRequestState.callbacks.push(function () {\n          locationResponse(locationData);\n        });\n        WebView.postEvent('web_app_check_location', false);\n      } else {\n        locationResponse(locationData);\n      }\n    }\n    function locationResponse(response) {\n      if (getRequestState.callbacks.length > 0) {\n        for (var i = 0; i < getRequestState.callbacks.length; i++) {\n          var callback = getRequestState.callbacks[i];\n          callback(response);\n        }\n        getRequestState.callbacks = [];\n      }\n      if (response !== null) {\n        receiveWebViewEvent('locationRequested', {\n          locationData: response\n        });\n      }\n    }\n    function checkVersion() {\n      if (!versionAtLeast('8.0')) {\n        console.warn('[Telegram.WebApp] LocationManager is not supported in version ' + webAppVersion);\n        return false;\n      }\n      return true;\n    }\n    function checkInit() {\n      if (!isInited) {\n        console.error('[Telegram.WebApp] LocationManager should be inited before using.');\n        throw Error('WebAppLocationManagerNotInited');\n      }\n      return true;\n    }\n    locationManager.init = function (callback) {\n      if (!checkVersion()) {\n        return locationManager;\n      }\n      if (isInited) {\n        return locationManager;\n      }\n      if (callback) {\n        initRequestState.callbacks.push(callback);\n      }\n      WebView.postEvent('web_app_check_location', false);\n      return locationManager;\n    };\n    locationManager.getLocation = function (callback) {\n      if (!checkVersion()) {\n        return locationManager;\n      }\n      checkInit();\n      if (!isLocationAvailable) {\n        console.error('[Telegram.WebApp] Location is not available on this device.');\n        throw Error('WebAppLocationManagerLocationNotAvailable');\n      }\n      getRequestState.callbacks.push(callback);\n      WebView.postEvent('web_app_request_location');\n      return locationManager;\n    };\n    locationManager.openSettings = function () {\n      if (!checkVersion()) {\n        return locationManager;\n      }\n      checkInit();\n      if (!isLocationAvailable) {\n        console.error('[Telegram.WebApp] Location is not available on this device.');\n        throw Error('WebAppLocationManagerLocationNotAvailable');\n      }\n      if (!isAccessRequested) {\n        console.error('[Telegram.WebApp] Location access was not requested yet.');\n        throw Error('WebAppLocationManagerLocationAccessNotRequested');\n      }\n      if (isAccessGranted) {\n        console.warn('[Telegram.WebApp] Location access was granted by the user, no need to go to settings.');\n        return locationManager;\n      }\n      WebView.postEvent('web_app_open_location_settings', false);\n      return locationManager;\n    };\n    return locationManager;\n  }();\n  var Accelerometer = function () {\n    var isStarted = false;\n    var valueX = null,\n      valueY = null,\n      valueZ = null;\n    var startCallbacks = [],\n      stopCallbacks = [];\n    var accelerometer = {};\n    Object.defineProperty(accelerometer, 'isStarted', {\n      get: function () {\n        return isStarted;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(accelerometer, 'x', {\n      get: function () {\n        return valueX;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(accelerometer, 'y', {\n      get: function () {\n        return valueY;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(accelerometer, 'z', {\n      get: function () {\n        return valueZ;\n      },\n      enumerable: true\n    });\n    WebView.onEvent('accelerometer_started', onAccelerometerStarted);\n    WebView.onEvent('accelerometer_stopped', onAccelerometerStopped);\n    WebView.onEvent('accelerometer_changed', onAccelerometerChanged);\n    WebView.onEvent('accelerometer_failed', onAccelerometerFailed);\n    function onAccelerometerStarted(eventType, eventData) {\n      isStarted = true;\n      if (startCallbacks.length > 0) {\n        for (var i = 0; i < startCallbacks.length; i++) {\n          var callback = startCallbacks[i];\n          callback(true);\n        }\n        startCallbacks = [];\n      }\n      receiveWebViewEvent('accelerometerStarted');\n    }\n    function onAccelerometerStopped(eventType, eventData) {\n      isStarted = false;\n      if (stopCallbacks.length > 0) {\n        for (var i = 0; i < stopCallbacks.length; i++) {\n          var callback = stopCallbacks[i];\n          callback(true);\n        }\n        stopCallbacks = [];\n      }\n      receiveWebViewEvent('accelerometerStopped');\n    }\n    function onAccelerometerChanged(eventType, eventData) {\n      valueX = eventData.x;\n      valueY = eventData.y;\n      valueZ = eventData.z;\n      receiveWebViewEvent('accelerometerChanged');\n    }\n    function onAccelerometerFailed(eventType, eventData) {\n      if (startCallbacks.length > 0) {\n        for (var i = 0; i < startCallbacks.length; i++) {\n          var callback = startCallbacks[i];\n          callback(false);\n        }\n        startCallbacks = [];\n      }\n      receiveWebViewEvent('accelerometerFailed', {\n        error: eventData.error\n      });\n    }\n    function checkVersion() {\n      if (!versionAtLeast('8.0')) {\n        console.warn('[Telegram.WebApp] Accelerometer is not supported in version ' + webAppVersion);\n        return false;\n      }\n      return true;\n    }\n    accelerometer.start = function (params, callback) {\n      params = params || {};\n      if (!checkVersion()) {\n        return accelerometer;\n      }\n      var req_params = {};\n      var refresh_rate = parseInt(params.refresh_rate || 1000);\n      if (isNaN(refresh_rate) || refresh_rate < 20 || refresh_rate > 1000) {\n        console.warn('[Telegram.WebApp] Accelerometer refresh_rate is invalid', refresh_rate);\n      } else {\n        req_params.refresh_rate = refresh_rate;\n      }\n      if (callback) {\n        startCallbacks.push(callback);\n      }\n      WebView.postEvent('web_app_start_accelerometer', false, req_params);\n      return accelerometer;\n    };\n    accelerometer.stop = function (callback) {\n      if (!checkVersion()) {\n        return accelerometer;\n      }\n      if (callback) {\n        stopCallbacks.push(callback);\n      }\n      WebView.postEvent('web_app_stop_accelerometer');\n      return accelerometer;\n    };\n    return accelerometer;\n  }();\n  var DeviceOrientation = function () {\n    var isStarted = false;\n    var valueAlpha = null,\n      valueBeta = null,\n      valueGamma = null,\n      valueAbsolute = false;\n    var startCallbacks = [],\n      stopCallbacks = [];\n    var deviceOrientation = {};\n    Object.defineProperty(deviceOrientation, 'isStarted', {\n      get: function () {\n        return isStarted;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(deviceOrientation, 'absolute', {\n      get: function () {\n        return valueAbsolute;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(deviceOrientation, 'alpha', {\n      get: function () {\n        return valueAlpha;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(deviceOrientation, 'beta', {\n      get: function () {\n        return valueBeta;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(deviceOrientation, 'gamma', {\n      get: function () {\n        return valueGamma;\n      },\n      enumerable: true\n    });\n    WebView.onEvent('device_orientation_started', onDeviceOrientationStarted);\n    WebView.onEvent('device_orientation_stopped', onDeviceOrientationStopped);\n    WebView.onEvent('device_orientation_changed', onDeviceOrientationChanged);\n    WebView.onEvent('device_orientation_failed', onDeviceOrientationFailed);\n    function onDeviceOrientationStarted(eventType, eventData) {\n      isStarted = true;\n      if (startCallbacks.length > 0) {\n        for (var i = 0; i < startCallbacks.length; i++) {\n          var callback = startCallbacks[i];\n          callback(true);\n        }\n        startCallbacks = [];\n      }\n      receiveWebViewEvent('deviceOrientationStarted');\n    }\n    function onDeviceOrientationStopped(eventType, eventData) {\n      isStarted = false;\n      if (stopCallbacks.length > 0) {\n        for (var i = 0; i < stopCallbacks.length; i++) {\n          var callback = stopCallbacks[i];\n          callback(true);\n        }\n        stopCallbacks = [];\n      }\n      receiveWebViewEvent('deviceOrientationStopped');\n    }\n    function onDeviceOrientationChanged(eventType, eventData) {\n      valueAbsolute = !!eventData.absolute;\n      valueAlpha = eventData.alpha;\n      valueBeta = eventData.beta;\n      valueGamma = eventData.gamma;\n      receiveWebViewEvent('deviceOrientationChanged');\n    }\n    function onDeviceOrientationFailed(eventType, eventData) {\n      if (startCallbacks.length > 0) {\n        for (var i = 0; i < startCallbacks.length; i++) {\n          var callback = startCallbacks[i];\n          callback(false);\n        }\n        startCallbacks = [];\n      }\n      receiveWebViewEvent('deviceOrientationFailed', {\n        error: eventData.error\n      });\n    }\n    function checkVersion() {\n      if (!versionAtLeast('8.0')) {\n        console.warn('[Telegram.WebApp] DeviceOrientation is not supported in version ' + webAppVersion);\n        return false;\n      }\n      return true;\n    }\n    deviceOrientation.start = function (params, callback) {\n      params = params || {};\n      if (!checkVersion()) {\n        return deviceOrientation;\n      }\n      var req_params = {};\n      var refresh_rate = parseInt(params.refresh_rate || 1000);\n      if (isNaN(refresh_rate) || refresh_rate < 20 || refresh_rate > 1000) {\n        console.warn('[Telegram.WebApp] DeviceOrientation refresh_rate is invalid', refresh_rate);\n      } else {\n        req_params.refresh_rate = refresh_rate;\n      }\n      req_params.need_absolute = !!params.need_absolute;\n      if (callback) {\n        startCallbacks.push(callback);\n      }\n      WebView.postEvent('web_app_start_device_orientation', false, req_params);\n      return deviceOrientation;\n    };\n    deviceOrientation.stop = function (callback) {\n      if (!checkVersion()) {\n        return deviceOrientation;\n      }\n      if (callback) {\n        stopCallbacks.push(callback);\n      }\n      WebView.postEvent('web_app_stop_device_orientation');\n      return deviceOrientation;\n    };\n    return deviceOrientation;\n  }();\n  var Gyroscope = function () {\n    var isStarted = false;\n    var valueX = null,\n      valueY = null,\n      valueZ = null;\n    var startCallbacks = [],\n      stopCallbacks = [];\n    var gyroscope = {};\n    Object.defineProperty(gyroscope, 'isStarted', {\n      get: function () {\n        return isStarted;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(gyroscope, 'x', {\n      get: function () {\n        return valueX;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(gyroscope, 'y', {\n      get: function () {\n        return valueY;\n      },\n      enumerable: true\n    });\n    Object.defineProperty(gyroscope, 'z', {\n      get: function () {\n        return valueZ;\n      },\n      enumerable: true\n    });\n    WebView.onEvent('gyroscope_started', onGyroscopeStarted);\n    WebView.onEvent('gyroscope_stopped', onGyroscopeStopped);\n    WebView.onEvent('gyroscope_changed', onGyroscopeChanged);\n    WebView.onEvent('gyroscope_failed', onGyroscopeFailed);\n    function onGyroscopeStarted(eventType, eventData) {\n      isStarted = true;\n      if (startCallbacks.length > 0) {\n        for (var i = 0; i < startCallbacks.length; i++) {\n          var callback = startCallbacks[i];\n          callback(true);\n        }\n        startCallbacks = [];\n      }\n      receiveWebViewEvent('gyroscopeStarted');\n    }\n    function onGyroscopeStopped(eventType, eventData) {\n      isStarted = false;\n      if (stopCallbacks.length > 0) {\n        for (var i = 0; i < stopCallbacks.length; i++) {\n          var callback = stopCallbacks[i];\n          callback(true);\n        }\n        stopCallbacks = [];\n      }\n      receiveWebViewEvent('gyroscopeStopped');\n    }\n    function onGyroscopeChanged(eventType, eventData) {\n      valueX = eventData.x;\n      valueY = eventData.y;\n      valueZ = eventData.z;\n      receiveWebViewEvent('gyroscopeChanged');\n    }\n    function onGyroscopeFailed(eventType, eventData) {\n      if (startCallbacks.length > 0) {\n        for (var i = 0; i < startCallbacks.length; i++) {\n          var callback = startCallbacks[i];\n          callback(false);\n        }\n        startCallbacks = [];\n      }\n      receiveWebViewEvent('gyroscopeFailed', {\n        error: eventData.error\n      });\n    }\n    function checkVersion() {\n      if (!versionAtLeast('8.0')) {\n        console.warn('[Telegram.WebApp] Gyroscope is not supported in version ' + webAppVersion);\n        return false;\n      }\n      return true;\n    }\n    gyroscope.start = function (params, callback) {\n      params = params || {};\n      if (!checkVersion()) {\n        return gyroscope;\n      }\n      var req_params = {};\n      var refresh_rate = parseInt(params.refresh_rate || 1000);\n      if (isNaN(refresh_rate) || refresh_rate < 20 || refresh_rate > 1000) {\n        console.warn('[Telegram.WebApp] Gyroscope refresh_rate is invalid', refresh_rate);\n      } else {\n        req_params.refresh_rate = refresh_rate;\n      }\n      if (callback) {\n        startCallbacks.push(callback);\n      }\n      WebView.postEvent('web_app_start_gyroscope', false, req_params);\n      return gyroscope;\n    };\n    gyroscope.stop = function (callback) {\n      if (!checkVersion()) {\n        return gyroscope;\n      }\n      if (callback) {\n        stopCallbacks.push(callback);\n      }\n      WebView.postEvent('web_app_stop_gyroscope');\n      return gyroscope;\n    };\n    return gyroscope;\n  }();\n  var webAppInvoices = {};\n  function onInvoiceClosed(eventType, eventData) {\n    if (eventData.slug && webAppInvoices[eventData.slug]) {\n      var invoiceData = webAppInvoices[eventData.slug];\n      delete webAppInvoices[eventData.slug];\n      if (invoiceData.callback) {\n        invoiceData.callback(eventData.status);\n      }\n      receiveWebViewEvent('invoiceClosed', {\n        url: invoiceData.url,\n        status: eventData.status\n      });\n    }\n  }\n  var webAppPopupOpened = false;\n  function onPopupClosed(eventType, eventData) {\n    if (webAppPopupOpened) {\n      var popupData = webAppPopupOpened;\n      webAppPopupOpened = false;\n      var button_id = null;\n      if (typeof eventData.button_id !== 'undefined') {\n        button_id = eventData.button_id;\n      }\n      if (popupData.callback) {\n        popupData.callback(button_id);\n      }\n      receiveWebViewEvent('popupClosed', {\n        button_id: button_id\n      });\n    }\n  }\n  var webAppScanQrPopupOpened = false;\n  function onQrTextReceived(eventType, eventData) {\n    if (webAppScanQrPopupOpened) {\n      var popupData = webAppScanQrPopupOpened;\n      var data = null;\n      if (typeof eventData.data !== 'undefined') {\n        data = eventData.data;\n      }\n      if (popupData.callback) {\n        if (popupData.callback(data)) {\n          webAppScanQrPopupOpened = false;\n          WebView.postEvent('web_app_close_scan_qr_popup', false);\n        }\n      }\n      receiveWebViewEvent('qrTextReceived', {\n        data: data\n      });\n    }\n  }\n  function onScanQrPopupClosed(eventType, eventData) {\n    webAppScanQrPopupOpened = false;\n    receiveWebViewEvent('scanQrPopupClosed');\n  }\n  function onClipboardTextReceived(eventType, eventData) {\n    if (eventData.req_id && webAppCallbacks[eventData.req_id]) {\n      var requestData = webAppCallbacks[eventData.req_id];\n      delete webAppCallbacks[eventData.req_id];\n      var data = null;\n      if (typeof eventData.data !== 'undefined') {\n        data = eventData.data;\n      }\n      if (requestData.callback) {\n        requestData.callback(data);\n      }\n      receiveWebViewEvent('clipboardTextReceived', {\n        data: data\n      });\n    }\n  }\n  var WebAppWriteAccessRequested = false;\n  function onWriteAccessRequested(eventType, eventData) {\n    if (WebAppWriteAccessRequested) {\n      var requestData = WebAppWriteAccessRequested;\n      WebAppWriteAccessRequested = false;\n      if (requestData.callback) {\n        requestData.callback(eventData.status == 'allowed');\n      }\n      receiveWebViewEvent('writeAccessRequested', {\n        status: eventData.status\n      });\n    }\n  }\n  function getRequestedContact(callback, timeout) {\n    var reqTo,\n      fallbackTo,\n      reqDelay = 0;\n    var reqInvoke = function () {\n      invokeCustomMethod('getRequestedContact', {}, function (err, res) {\n        if (res && res.length) {\n          clearTimeout(fallbackTo);\n          callback(res);\n        } else {\n          reqDelay += 50;\n          reqTo = setTimeout(reqInvoke, reqDelay);\n        }\n      });\n    };\n    var fallbackInvoke = function () {\n      clearTimeout(reqTo);\n      callback('');\n    };\n    fallbackTo = setTimeout(fallbackInvoke, timeout);\n    reqInvoke();\n  }\n  var WebAppContactRequested = false;\n  function onPhoneRequested(eventType, eventData) {\n    if (WebAppContactRequested) {\n      var requestData = WebAppContactRequested;\n      WebAppContactRequested = false;\n      var requestSent = eventData.status == 'sent';\n      var webViewEvent = {\n        status: eventData.status\n      };\n      if (requestSent) {\n        getRequestedContact(function (res) {\n          if (res && res.length) {\n            webViewEvent.response = res;\n            webViewEvent.responseUnsafe = Utils.urlParseQueryString(res);\n            for (var key in webViewEvent.responseUnsafe) {\n              var val = webViewEvent.responseUnsafe[key];\n              try {\n                if (val.substr(0, 1) == '{' && val.substr(-1) == '}' || val.substr(0, 1) == '[' && val.substr(-1) == ']') {\n                  webViewEvent.responseUnsafe[key] = JSON.parse(val);\n                }\n              } catch (e) {}\n            }\n          }\n          if (requestData.callback) {\n            requestData.callback(requestSent, webViewEvent);\n          }\n          receiveWebViewEvent('contactRequested', webViewEvent);\n        }, 3000);\n      } else {\n        if (requestData.callback) {\n          requestData.callback(requestSent, webViewEvent);\n        }\n        receiveWebViewEvent('contactRequested', webViewEvent);\n      }\n    }\n  }\n  var webAppDownloadFileRequested = false;\n  function onFileDownloadRequested(eventType, eventData) {\n    if (webAppDownloadFileRequested) {\n      var requestData = webAppDownloadFileRequested;\n      webAppDownloadFileRequested = false;\n      var isDownloading = eventData.status == 'downloading';\n      if (requestData.callback) {\n        requestData.callback(isDownloading);\n      }\n      receiveWebViewEvent('fileDownloadRequested', {\n        status: isDownloading ? 'downloading' : 'cancelled'\n      });\n    }\n  }\n  function onCustomMethodInvoked(eventType, eventData) {\n    if (eventData.req_id && webAppCallbacks[eventData.req_id]) {\n      var requestData = webAppCallbacks[eventData.req_id];\n      delete webAppCallbacks[eventData.req_id];\n      var res = null,\n        err = null;\n      if (typeof eventData.result !== 'undefined') {\n        res = eventData.result;\n      }\n      if (typeof eventData.error !== 'undefined') {\n        err = eventData.error;\n      }\n      if (requestData.callback) {\n        requestData.callback(err, res);\n      }\n    }\n  }\n  function invokeCustomMethod(method, params, callback) {\n    if (!versionAtLeast('6.9')) {\n      console.error('[Telegram.WebApp] Method invokeCustomMethod is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    var req_id = generateCallbackId(16);\n    var req_params = {\n      req_id: req_id,\n      method: method,\n      params: params || {}\n    };\n    webAppCallbacks[req_id] = {\n      callback: callback\n    };\n    WebView.postEvent('web_app_invoke_custom_method', false, req_params);\n  }\n  ;\n  if (!window.Telegram) {\n    window.Telegram = {};\n  }\n  Object.defineProperty(WebApp, 'initData', {\n    get: function () {\n      return webAppInitData;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'initDataUnsafe', {\n    get: function () {\n      return webAppInitDataUnsafe;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'version', {\n    get: function () {\n      return webAppVersion;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'platform', {\n    get: function () {\n      return webAppPlatform;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'colorScheme', {\n    get: function () {\n      return colorScheme;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'themeParams', {\n    get: function () {\n      return themeParams;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'isExpanded', {\n    get: function () {\n      return isExpanded;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'viewportHeight', {\n    get: function () {\n      return (viewportHeight === false ? window.innerHeight : viewportHeight) - bottomBarHeight;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'viewportStableHeight', {\n    get: function () {\n      return (viewportStableHeight === false ? window.innerHeight : viewportStableHeight) - bottomBarHeight;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'safeAreaInset', {\n    get: function () {\n      return safeAreaInset;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'contentSafeAreaInset', {\n    get: function () {\n      return contentSafeAreaInset;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'isClosingConfirmationEnabled', {\n    set: function (val) {\n      setClosingConfirmation(val);\n    },\n    get: function () {\n      return isClosingConfirmationEnabled;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'isVerticalSwipesEnabled', {\n    set: function (val) {\n      toggleVerticalSwipes(val);\n    },\n    get: function () {\n      return isVerticalSwipesEnabled;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'isFullscreen', {\n    get: function () {\n      return webAppIsFullscreen;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'isOrientationLocked', {\n    set: function (val) {\n      toggleOrientationLock(val);\n    },\n    get: function () {\n      return webAppIsOrientationLocked;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'isActive', {\n    get: function () {\n      return webAppIsActive;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'headerColor', {\n    set: function (val) {\n      setHeaderColor(val);\n    },\n    get: function () {\n      return getHeaderColor();\n    },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'backgroundColor', {\n    set: function (val) {\n      setBackgroundColor(val);\n    },\n    get: function () {\n      return getBackgroundColor();\n    },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'bottomBarColor', {\n    set: function (val) {\n      setBottomBarColor(val);\n    },\n    get: function () {\n      return getBottomBarColor();\n    },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'BackButton', {\n    value: BackButton,\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'MainButton', {\n    value: MainButton,\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'SecondaryButton', {\n    value: SecondaryButton,\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'SettingsButton', {\n    value: SettingsButton,\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'HapticFeedback', {\n    value: HapticFeedback,\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'CloudStorage', {\n    value: CloudStorage,\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'BiometricManager', {\n    value: BiometricManager,\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'Accelerometer', {\n    value: Accelerometer,\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'DeviceOrientation', {\n    value: DeviceOrientation,\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'Gyroscope', {\n    value: Gyroscope,\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'LocationManager', {\n    value: LocationManager,\n    enumerable: true\n  });\n  WebApp.isVersionAtLeast = function (ver) {\n    return versionAtLeast(ver);\n  };\n  WebApp.setHeaderColor = function (color_key) {\n    WebApp.headerColor = color_key;\n  };\n  WebApp.setBackgroundColor = function (color) {\n    WebApp.backgroundColor = color;\n  };\n  WebApp.setBottomBarColor = function (color) {\n    WebApp.bottomBarColor = color;\n  };\n  WebApp.enableClosingConfirmation = function () {\n    WebApp.isClosingConfirmationEnabled = true;\n  };\n  WebApp.disableClosingConfirmation = function () {\n    WebApp.isClosingConfirmationEnabled = false;\n  };\n  WebApp.enableVerticalSwipes = function () {\n    WebApp.isVerticalSwipesEnabled = true;\n  };\n  WebApp.disableVerticalSwipes = function () {\n    WebApp.isVerticalSwipesEnabled = false;\n  };\n  WebApp.lockOrientation = function () {\n    WebApp.isOrientationLocked = true;\n  };\n  WebApp.unlockOrientation = function () {\n    WebApp.isOrientationLocked = false;\n  };\n  WebApp.requestFullscreen = function () {\n    if (!versionAtLeast('8.0')) {\n      console.error('[Telegram.WebApp] Method requestFullscreen is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    WebView.postEvent('web_app_request_fullscreen');\n  };\n  WebApp.exitFullscreen = function () {\n    if (!versionAtLeast('8.0')) {\n      console.error('[Telegram.WebApp] Method exitFullscreen is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    WebView.postEvent('web_app_exit_fullscreen');\n  };\n  WebApp.addToHomeScreen = function () {\n    if (!versionAtLeast('8.0')) {\n      console.error('[Telegram.WebApp] Method addToHomeScreen is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    WebView.postEvent('web_app_add_to_home_screen');\n  };\n  WebApp.checkHomeScreenStatus = function (callback) {\n    if (!versionAtLeast('8.0')) {\n      console.error('[Telegram.WebApp] Method checkHomeScreenStatus is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    if (callback) {\n      homeScreenCallbacks.push(callback);\n    }\n    WebView.postEvent('web_app_check_home_screen');\n  };\n  WebApp.onEvent = function (eventType, callback) {\n    onWebViewEvent(eventType, callback);\n  };\n  WebApp.offEvent = function (eventType, callback) {\n    offWebViewEvent(eventType, callback);\n  };\n  WebApp.sendData = function (data) {\n    if (!data || !data.length) {\n      console.error('[Telegram.WebApp] Data is required', data);\n      throw Error('WebAppDataInvalid');\n    }\n    if (byteLength(data) > 4096) {\n      console.error('[Telegram.WebApp] Data is too long', data);\n      throw Error('WebAppDataInvalid');\n    }\n    WebView.postEvent('web_app_data_send', false, {\n      data: data\n    });\n  };\n  WebApp.switchInlineQuery = function (query, choose_chat_types) {\n    if (!versionAtLeast('6.6')) {\n      console.error('[Telegram.WebApp] Method switchInlineQuery is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    if (!initParams.tgWebAppBotInline) {\n      console.error('[Telegram.WebApp] Inline mode is disabled for this bot. Read more about inline mode: https://core.telegram.org/bots/inline');\n      throw Error('WebAppInlineModeDisabled');\n    }\n    query = query || '';\n    if (query.length > 256) {\n      console.error('[Telegram.WebApp] Inline query is too long', query);\n      throw Error('WebAppInlineQueryInvalid');\n    }\n    var chat_types = [];\n    if (choose_chat_types) {\n      if (!Array.isArray(choose_chat_types)) {\n        console.error('[Telegram.WebApp] Choose chat types should be an array', choose_chat_types);\n        throw Error('WebAppInlineChooseChatTypesInvalid');\n      }\n      var good_types = {\n        users: 1,\n        bots: 1,\n        groups: 1,\n        channels: 1\n      };\n      for (var i = 0; i < choose_chat_types.length; i++) {\n        var chat_type = choose_chat_types[i];\n        if (!good_types[chat_type]) {\n          console.error('[Telegram.WebApp] Choose chat type is invalid', chat_type);\n          throw Error('WebAppInlineChooseChatTypeInvalid');\n        }\n        if (good_types[chat_type] != 2) {\n          good_types[chat_type] = 2;\n          chat_types.push(chat_type);\n        }\n      }\n    }\n    WebView.postEvent('web_app_switch_inline_query', false, {\n      query: query,\n      chat_types: chat_types\n    });\n  };\n  WebApp.openLink = function (url, options) {\n    var a = document.createElement('A');\n    a.href = url;\n    if (a.protocol != 'http:' && a.protocol != 'https:') {\n      console.error('[Telegram.WebApp] Url protocol is not supported', url);\n      throw Error('WebAppTgUrlInvalid');\n    }\n    var url = a.href;\n    options = options || {};\n    if (versionAtLeast('6.1')) {\n      var req_params = {\n        url: url\n      };\n      if (versionAtLeast('6.4') && options.try_instant_view) {\n        req_params.try_instant_view = true;\n      }\n      if (versionAtLeast('7.6') && options.try_browser) {\n        req_params.try_browser = options.try_browser;\n      }\n      WebView.postEvent('web_app_open_link', false, req_params);\n    } else {\n      window.open(url, '_blank');\n    }\n  };\n  WebApp.openTelegramLink = function (url, options) {\n    var a = document.createElement('A');\n    a.href = url;\n    if (a.protocol != 'http:' && a.protocol != 'https:') {\n      console.error('[Telegram.WebApp] Url protocol is not supported', url);\n      throw Error('WebAppTgUrlInvalid');\n    }\n    if (a.hostname != 't.me') {\n      console.error('[Telegram.WebApp] Url host is not supported', url);\n      throw Error('WebAppTgUrlInvalid');\n    }\n    var path_full = a.pathname + a.search;\n    options = options || {};\n    if (isIframe || versionAtLeast('6.1')) {\n      var req_params = {\n        path_full: path_full\n      };\n      if (options.force_request) {\n        req_params.force_request = true;\n      }\n      WebView.postEvent('web_app_open_tg_link', false, req_params);\n    } else {\n      location.href = 'https://t.me' + path_full;\n    }\n  };\n  WebApp.openInvoice = function (url, callback) {\n    var a = document.createElement('A'),\n      match,\n      slug;\n    a.href = url;\n    if (a.protocol != 'http:' && a.protocol != 'https:' || a.hostname != 't.me' || !(match = a.pathname.match(/^\\/(\\$|invoice\\/)([A-Za-z0-9\\-_=]+)$/)) || !(slug = match[2])) {\n      console.error('[Telegram.WebApp] Invoice url is invalid', url);\n      throw Error('WebAppInvoiceUrlInvalid');\n    }\n    if (!versionAtLeast('6.1')) {\n      console.error('[Telegram.WebApp] Method openInvoice is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    if (webAppInvoices[slug]) {\n      console.error('[Telegram.WebApp] Invoice is already opened');\n      throw Error('WebAppInvoiceOpened');\n    }\n    webAppInvoices[slug] = {\n      url: url,\n      callback: callback\n    };\n    WebView.postEvent('web_app_open_invoice', false, {\n      slug: slug\n    });\n  };\n  WebApp.showPopup = function (params, callback) {\n    if (!versionAtLeast('6.2')) {\n      console.error('[Telegram.WebApp] Method showPopup is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    if (webAppPopupOpened) {\n      console.error('[Telegram.WebApp] Popup is already opened');\n      throw Error('WebAppPopupOpened');\n    }\n    var title = '';\n    var message = '';\n    var buttons = [];\n    var popup_buttons = {};\n    var popup_params = {};\n    if (typeof params.title !== 'undefined') {\n      title = strTrim(params.title);\n      if (title.length > 64) {\n        console.error('[Telegram.WebApp] Popup title is too long', title);\n        throw Error('WebAppPopupParamInvalid');\n      }\n      if (title.length > 0) {\n        popup_params.title = title;\n      }\n    }\n    if (typeof params.message !== 'undefined') {\n      message = strTrim(params.message);\n    }\n    if (!message.length) {\n      console.error('[Telegram.WebApp] Popup message is required', params.message);\n      throw Error('WebAppPopupParamInvalid');\n    }\n    if (message.length > 256) {\n      console.error('[Telegram.WebApp] Popup message is too long', message);\n      throw Error('WebAppPopupParamInvalid');\n    }\n    popup_params.message = message;\n    if (typeof params.buttons !== 'undefined') {\n      if (!Array.isArray(params.buttons)) {\n        console.error('[Telegram.WebApp] Popup buttons should be an array', params.buttons);\n        throw Error('WebAppPopupParamInvalid');\n      }\n      for (var i = 0; i < params.buttons.length; i++) {\n        var button = params.buttons[i];\n        var btn = {};\n        var id = '';\n        if (typeof button.id !== 'undefined') {\n          id = button.id.toString();\n          if (id.length > 64) {\n            console.error('[Telegram.WebApp] Popup button id is too long', id);\n            throw Error('WebAppPopupParamInvalid');\n          }\n        }\n        btn.id = id;\n        var button_type = button.type;\n        if (typeof button_type === 'undefined') {\n          button_type = 'default';\n        }\n        btn.type = button_type;\n        if (button_type == 'ok' || button_type == 'close' || button_type == 'cancel') {\n          // no params needed\n        } else if (button_type == 'default' || button_type == 'destructive') {\n          var text = '';\n          if (typeof button.text !== 'undefined') {\n            text = strTrim(button.text);\n          }\n          if (!text.length) {\n            console.error('[Telegram.WebApp] Popup button text is required for type ' + button_type, button.text);\n            throw Error('WebAppPopupParamInvalid');\n          }\n          if (text.length > 64) {\n            console.error('[Telegram.WebApp] Popup button text is too long', text);\n            throw Error('WebAppPopupParamInvalid');\n          }\n          btn.text = text;\n        } else {\n          console.error('[Telegram.WebApp] Popup button type is invalid', button_type);\n          throw Error('WebAppPopupParamInvalid');\n        }\n        buttons.push(btn);\n      }\n    } else {\n      buttons.push({\n        id: '',\n        type: 'close'\n      });\n    }\n    if (buttons.length < 1) {\n      console.error('[Telegram.WebApp] Popup should have at least one button');\n      throw Error('WebAppPopupParamInvalid');\n    }\n    if (buttons.length > 3) {\n      console.error('[Telegram.WebApp] Popup should not have more than 3 buttons');\n      throw Error('WebAppPopupParamInvalid');\n    }\n    popup_params.buttons = buttons;\n    webAppPopupOpened = {\n      callback: callback\n    };\n    WebView.postEvent('web_app_open_popup', false, popup_params);\n  };\n  WebApp.showAlert = function (message, callback) {\n    WebApp.showPopup({\n      message: message\n    }, callback ? function () {\n      callback();\n    } : null);\n  };\n  WebApp.showConfirm = function (message, callback) {\n    WebApp.showPopup({\n      message: message,\n      buttons: [{\n        type: 'ok',\n        id: 'ok'\n      }, {\n        type: 'cancel'\n      }]\n    }, callback ? function (button_id) {\n      callback(button_id == 'ok');\n    } : null);\n  };\n  WebApp.showScanQrPopup = function (params, callback) {\n    if (!versionAtLeast('6.4')) {\n      console.error('[Telegram.WebApp] Method showScanQrPopup is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    if (webAppScanQrPopupOpened) {\n      console.error('[Telegram.WebApp] Popup is already opened');\n      throw Error('WebAppScanQrPopupOpened');\n    }\n    var text = '';\n    var popup_params = {};\n    if (typeof params.text !== 'undefined') {\n      text = strTrim(params.text);\n      if (text.length > 64) {\n        console.error('[Telegram.WebApp] Scan QR popup text is too long', text);\n        throw Error('WebAppScanQrPopupParamInvalid');\n      }\n      if (text.length > 0) {\n        popup_params.text = text;\n      }\n    }\n    webAppScanQrPopupOpened = {\n      callback: callback\n    };\n    WebView.postEvent('web_app_open_scan_qr_popup', false, popup_params);\n  };\n  WebApp.closeScanQrPopup = function () {\n    if (!versionAtLeast('6.4')) {\n      console.error('[Telegram.WebApp] Method closeScanQrPopup is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    webAppScanQrPopupOpened = false;\n    WebView.postEvent('web_app_close_scan_qr_popup', false);\n  };\n  WebApp.readTextFromClipboard = function (callback) {\n    if (!versionAtLeast('6.4')) {\n      console.error('[Telegram.WebApp] Method readTextFromClipboard is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    var req_id = generateCallbackId(16);\n    var req_params = {\n      req_id: req_id\n    };\n    webAppCallbacks[req_id] = {\n      callback: callback\n    };\n    WebView.postEvent('web_app_read_text_from_clipboard', false, req_params);\n  };\n  WebApp.requestWriteAccess = function (callback) {\n    if (!versionAtLeast('6.9')) {\n      console.error('[Telegram.WebApp] Method requestWriteAccess is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    if (WebAppWriteAccessRequested) {\n      console.error('[Telegram.WebApp] Write access is already requested');\n      throw Error('WebAppWriteAccessRequested');\n    }\n    WebAppWriteAccessRequested = {\n      callback: callback\n    };\n    WebView.postEvent('web_app_request_write_access');\n  };\n  WebApp.requestContact = function (callback) {\n    if (!versionAtLeast('6.9')) {\n      console.error('[Telegram.WebApp] Method requestContact is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    if (WebAppContactRequested) {\n      console.error('[Telegram.WebApp] Contact is already requested');\n      throw Error('WebAppContactRequested');\n    }\n    WebAppContactRequested = {\n      callback: callback\n    };\n    WebView.postEvent('web_app_request_phone');\n  };\n  WebApp.downloadFile = function (params, callback) {\n    if (!versionAtLeast('8.0')) {\n      console.error('[Telegram.WebApp] Method downloadFile is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    if (webAppDownloadFileRequested) {\n      console.error('[Telegram.WebApp] Popup is already opened');\n      throw Error('WebAppDownloadFilePopupOpened');\n    }\n    var a = document.createElement('A');\n    var dl_params = {};\n    if (!params || !params.url || !params.url.length) {\n      console.error('[Telegram.WebApp] Url is required');\n      throw Error('WebAppDownloadFileParamInvalid');\n    }\n    a.href = params.url;\n    if (a.protocol != 'https:') {\n      console.error('[Telegram.WebApp] Url protocol is not supported', url);\n      throw Error('WebAppDownloadFileParamInvalid');\n    }\n    dl_params.url = a.href;\n    if (!params || !params.file_name || !params.file_name.length) {\n      console.error('[Telegram.WebApp] File name is required');\n      throw Error('WebAppDownloadFileParamInvalid');\n    }\n    dl_params.file_name = params.file_name;\n    webAppDownloadFileRequested = {\n      callback: callback\n    };\n    WebView.postEvent('web_app_request_file_download', false, dl_params);\n  };\n  WebApp.shareToStory = function (media_url, params) {\n    params = params || {};\n    if (!versionAtLeast('7.8')) {\n      console.error('[Telegram.WebApp] Method shareToStory is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    var a = document.createElement('A');\n    a.href = media_url;\n    if (a.protocol != 'http:' && a.protocol != 'https:') {\n      console.error('[Telegram.WebApp] Media url protocol is not supported', url);\n      throw Error('WebAppMediaUrlInvalid');\n    }\n    var share_params = {};\n    share_params.media_url = a.href;\n    if (typeof params.text !== 'undefined') {\n      var text = strTrim(params.text);\n      if (text.length > 2048) {\n        console.error('[Telegram.WebApp] Text is too long', text);\n        throw Error('WebAppShareToStoryParamInvalid');\n      }\n      if (text.length > 0) {\n        share_params.text = text;\n      }\n    }\n    if (typeof params.widget_link !== 'undefined') {\n      params.widget_link = params.widget_link || {};\n      a.href = params.widget_link.url;\n      if (a.protocol != 'http:' && a.protocol != 'https:') {\n        console.error('[Telegram.WebApp] Link protocol is not supported', url);\n        throw Error('WebAppShareToStoryParamInvalid');\n      }\n      var widget_link = {\n        url: a.href\n      };\n      if (typeof params.widget_link.name !== 'undefined') {\n        var link_name = strTrim(params.widget_link.name);\n        if (link_name.length > 48) {\n          console.error('[Telegram.WebApp] Link name is too long', link_name);\n          throw Error('WebAppShareToStoryParamInvalid');\n        }\n        if (link_name.length > 0) {\n          widget_link.name = link_name;\n        }\n      }\n      share_params.widget_link = widget_link;\n    }\n    WebView.postEvent('web_app_share_to_story', false, share_params);\n  };\n  WebApp.shareMessage = function (msg_id, callback) {\n    if (!versionAtLeast('8.0')) {\n      console.error('[Telegram.WebApp] Method shareMessage is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    if (WebAppShareMessageOpened) {\n      console.error('[Telegram.WebApp] Share message is already opened');\n      throw Error('WebAppShareMessageOpened');\n    }\n    WebAppShareMessageOpened = {\n      callback: callback\n    };\n    WebView.postEvent('web_app_send_prepared_message', false, {\n      id: msg_id\n    });\n  };\n  WebApp.setEmojiStatus = function (custom_emoji_id, params, callback) {\n    params = params || {};\n    if (!versionAtLeast('8.0')) {\n      console.error('[Telegram.WebApp] Method setEmojiStatus is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    var status_params = {};\n    status_params.custom_emoji_id = custom_emoji_id;\n    if (typeof params.duration !== 'undefined') {\n      status_params.duration = params.duration;\n    }\n    if (WebAppEmojiStatusRequested) {\n      console.error('[Telegram.WebApp] Emoji status is already requested');\n      throw Error('WebAppEmojiStatusRequested');\n    }\n    WebAppEmojiStatusRequested = {\n      callback: callback\n    };\n    WebView.postEvent('web_app_set_emoji_status', false, status_params);\n  };\n  WebApp.requestEmojiStatusAccess = function (callback) {\n    if (!versionAtLeast('8.0')) {\n      console.error('[Telegram.WebApp] Method requestEmojiStatusAccess is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    if (WebAppEmojiStatusAccessRequested) {\n      console.error('[Telegram.WebApp] Emoji status permission is already requested');\n      throw Error('WebAppEmojiStatusAccessRequested');\n    }\n    WebAppEmojiStatusAccessRequested = {\n      callback: callback\n    };\n    WebView.postEvent('web_app_request_emoji_status_access');\n  };\n  WebApp.invokeCustomMethod = function (method, params, callback) {\n    invokeCustomMethod(method, params, callback);\n  };\n  WebApp.ready = function () {\n    WebView.postEvent('web_app_ready');\n  };\n  WebApp.expand = function () {\n    WebView.postEvent('web_app_expand');\n  };\n  WebApp.close = function (options) {\n    options = options || {};\n    var req_params = {};\n    if (versionAtLeast('7.6') && options.return_back) {\n      req_params.return_back = true;\n    }\n    WebView.postEvent('web_app_close', false, req_params);\n  };\n  window.Telegram.WebApp = WebApp;\n  updateHeaderColor();\n  updateBackgroundColor();\n  updateBottomBarColor();\n  setViewportHeight();\n  if (initParams.tgWebAppShowSettings) {\n    SettingsButton.show();\n  }\n  window.addEventListener('resize', onWindowResize);\n  if (isIframe) {\n    document.addEventListener('click', linkHandler);\n  }\n  WebView.onEvent('theme_changed', onThemeChanged);\n  WebView.onEvent('viewport_changed', onViewportChanged);\n  WebView.onEvent('safe_area_changed', onSafeAreaChanged);\n  WebView.onEvent('content_safe_area_changed', onContentSafeAreaChanged);\n  WebView.onEvent('visibility_changed', onVisibilityChanged);\n  WebView.onEvent('invoice_closed', onInvoiceClosed);\n  WebView.onEvent('popup_closed', onPopupClosed);\n  WebView.onEvent('qr_text_received', onQrTextReceived);\n  WebView.onEvent('scan_qr_popup_closed', onScanQrPopupClosed);\n  WebView.onEvent('clipboard_text_received', onClipboardTextReceived);\n  WebView.onEvent('write_access_requested', onWriteAccessRequested);\n  WebView.onEvent('phone_requested', onPhoneRequested);\n  WebView.onEvent('file_download_requested', onFileDownloadRequested);\n  WebView.onEvent('custom_method_invoked', onCustomMethodInvoked);\n  WebView.onEvent('fullscreen_changed', onFullscreenChanged);\n  WebView.onEvent('fullscreen_failed', onFullscreenFailed);\n  WebView.onEvent('home_screen_added', onHomeScreenAdded);\n  WebView.onEvent('home_screen_checked', onHomeScreenChecked);\n  WebView.onEvent('prepared_message_sent', onPreparedMessageSent);\n  WebView.onEvent('prepared_message_failed', onPreparedMessageFailed);\n  WebView.onEvent('emoji_status_set', onEmojiStatusSet);\n  WebView.onEvent('emoji_status_failed', onEmojiStatusFailed);\n  WebView.onEvent('emoji_status_access_requested', onEmojiStatusAccessRequested);\n  WebView.postEvent('web_app_request_theme');\n  WebView.postEvent('web_app_request_viewport');\n  WebView.postEvent('web_app_request_safe_area');\n  WebView.postEvent('web_app_request_content_safe_area');\n})();","map":{"version":3,"names":["eventHandlers","locationHash","location","hash","toString","e","initParams","urlParseHashParams","storedParams","sessionStorageGet","key","sessionStorageSet","isIframe","iFrameStyle","window","parent","addEventListener","event","source","dataParsed","JSON","parse","data","eventType","origin","innerHTML","eventData","postMessage","stringify","reload","receiveEvent","document","createElement","head","appendChild","reload_supported","urlSafeDecode","urlencoded","replace","decodeURIComponent","params","length","indexOf","_path","qIndex","pathParam","substr","query_params","urlParseQueryString","k","queryString","queryStringParams","split","i","param","paramName","paramValue","urlAppendHashParams","url","addHash","ind","curHash","postEvent","callback","undefined","console","log","TelegramWebviewProxy","external","notify","trustedTarget","notAvailable","callEventCallbacks","func","curEventHandlers","onEvent","index","push","offEvent","splice","openProtoUrl","match","useIframe","navigator","userAgent","iframeContEl","getElementById","body","iframeEl","pageHidden","enableHidden","src","setTimeout","removeEventListener","value","sessionStorage","setItem","getItem","Telegram","WebView","Utils","TelegramGameProxy_receiveEvent","TelegramGameProxy","WebApp","webAppInitData","webAppInitDataUnsafe","themeParams","colorScheme","webAppVersion","webAppPlatform","webAppIsActive","webAppIsFullscreen","webAppIsOrientationLocked","webAppBackgroundColor","webAppHeaderColorKey","webAppHeaderColor","tgWebAppData","val","stored_theme_params","tgWebAppThemeParams","themeParamsRaw","theme_params","setThemeParams","stored_def_colors","tgWebAppDefaultColors","defColorsRaw","def_colors","setDefaultColors","tgWebAppVersion","tgWebAppPlatform","stored_fullscreen","tgWebAppFullscreen","setFullscreen","stored_orientation_lock","setOrientationLock","onThemeChanged","MainButton","setParams","SecondaryButton","updateHeaderColor","updateBackgroundColor","updateBottomBarColor","receiveWebViewEvent","lastWindowHeight","innerHeight","onViewportChanged","height","onWindowResize","setViewportHeight","isStateStable","onSafeAreaChanged","setSafeAreaInset","onContentSafeAreaChanged","setContentSafeAreaInset","onVisibilityChanged","is_visible","linkHandler","metaKey","ctrlKey","el","target","tagName","parentNode","protocol","hostname","openTgLink","href","preventDefault","strTrim","str","args","Array","prototype","slice","call","arguments","shift","apply","onWebViewEvent","offWebViewEvent","setCssProperty","name","root","documentElement","style","setProperty","is_fullscreen","is_locked","bg_color","secondary_bg_color","color","parseColorToHex","isColorDark","join","bg_dark_color","header_dark_color","header_color","webAppCallbacks","generateCallbackId","len","tries","id","chars","chars_len","Math","floor","random","Error","viewportHeight","viewportStableHeight","isExpanded","is_expanded","is_state_stable","stable_height","bottomBarHeight","safeAreaInset","top","bottom","left","right","contentSafeAreaInset","isClosingConfirmationEnabled","setClosingConfirmation","need_confirmation","versionAtLeast","warn","isVerticalSwipesEnabled","toggleVerticalSwipes","enable_swipes","allow_vertical_swipe","onFullscreenChanged","onFullscreenFailed","error","toggleOrientationLock","locked","homeScreenCallbacks","onHomeScreenAdded","onHomeScreenChecked","status","WebAppShareMessageOpened","onPreparedMessageSent","requestData","onPreparedMessageFailed","WebAppEmojiStatusRequested","onEmojiStatusSet","onEmojiStatusFailed","WebAppEmojiStatusAccessRequested","onEmojiStatusAccessRequested","webAppPopupOpened","onPopupClosed","popupData","button_id","getHeaderColor","setHeaderColor","head_color","color_key","appHeaderColorKey","appHeaderColor","getBackgroundColor","setBackgroundColor","appBackgroundColor","bottomBarColor","getBottomBarColor","bottom_bar_bg_color","setBottomBarColor","appBottomBarColor","tgWebAppDebug","updateDebugBottomBar","exec","toLowerCase","r","parseInt","g","b","rgb","hsp","sqrt","versionCompare","v1","v2","a","max","p1","p2","ver","byteLength","Blob","size","s","code","charCodeAt","BackButton","isVisible","backButton","Object","defineProperty","set","get","enumerable","curButtonState","onBackButtonPressed","buttonParams","buttonState","btn_params","buttonCheckVersion","updateButton","btn_state","onClick","offClick","show","hide","debugBottomBar","debugBottomBarBtns","debugBottomBarStyle","display","gap","font","width","background","position","margin","padding","textAlign","boxSizing","zIndex","onDomLoaded","animStyle","mainBtn","main","_bottomButton","secondaryBtn","secondary","flexDirection","paddingBottom","BottomButtonConstructor","type","isMainButton","setupFnName","tgEventName","webViewEventName","buttonTextDefault","buttonColorDefault","button_color","buttonTextColorDefault","button_text_color","isActive","hasShineEffect","isProgressVisible","buttonType","buttonText","buttonColor","buttonTextColor","buttonPosition","bottomButton","text","text_color","is_active","has_shine_effect","onBottomButtonPressed","debugBtn","debugBtnStyle","borderRadius","textColor","is_progress_visible","updateDebugButton","opacity","cursor","disabled","innerText","className","backgroundImage","encodeURIComponent","backgroundColor","setText","enable","disable","showProgress","leaveActive","hideProgress","SettingsButton","settingsButton","onSettingsButtonPressed","HapticFeedback","hapticFeedback","triggerFeedback","impact_style","notification_type","impactOccurred","notificationOccurred","selectionChanged","CloudStorage","cloudStorage","invokeStorageMethod","method","invokeCustomMethod","getItems","err","res","keys","removeItem","removeItems","getKeys","BiometricManager","isInited","isBiometricAvailable","biometricType","isAccessRequested","isAccessGranted","isBiometricTokenSaved","deviceId","biometricManager","initRequestState","callbacks","accessRequestState","authRequestState","tokenRequestState","onBiometryInfoReceived","onBiometryAuthRequested","onBiometryTokenUpdated","available","access_requested","access_granted","token_saved","device_id","state","isAuthenticated","biometricToken","token","applied","isUpdated","checkVersion","checkInit","init","requestAccess","popup_params","reason","authenticate","updateBiometricToken","openSettings","LocationManager","isLocationAvailable","locationManager","getRequestState","onLocationChecked","onLocationRequested","locationData","latitude","longitude","altitude","course","speed","horizontal_accuracy","vertical_accuracy","course_accuracy","speed_accuracy","locationResponse","response","getLocation","Accelerometer","isStarted","valueX","valueY","valueZ","startCallbacks","stopCallbacks","accelerometer","onAccelerometerStarted","onAccelerometerStopped","onAccelerometerChanged","onAccelerometerFailed","x","y","z","start","req_params","refresh_rate","isNaN","stop","DeviceOrientation","valueAlpha","valueBeta","valueGamma","valueAbsolute","deviceOrientation","onDeviceOrientationStarted","onDeviceOrientationStopped","onDeviceOrientationChanged","onDeviceOrientationFailed","absolute","alpha","beta","gamma","need_absolute","Gyroscope","gyroscope","onGyroscopeStarted","onGyroscopeStopped","onGyroscopeChanged","onGyroscopeFailed","webAppInvoices","onInvoiceClosed","slug","invoiceData","webAppScanQrPopupOpened","onQrTextReceived","onScanQrPopupClosed","onClipboardTextReceived","req_id","WebAppWriteAccessRequested","onWriteAccessRequested","getRequestedContact","timeout","reqTo","fallbackTo","reqDelay","reqInvoke","clearTimeout","fallbackInvoke","WebAppContactRequested","onPhoneRequested","requestSent","webViewEvent","responseUnsafe","webAppDownloadFileRequested","onFileDownloadRequested","isDownloading","onCustomMethodInvoked","result","isVersionAtLeast","headerColor","enableClosingConfirmation","disableClosingConfirmation","enableVerticalSwipes","disableVerticalSwipes","lockOrientation","isOrientationLocked","unlockOrientation","requestFullscreen","exitFullscreen","addToHomeScreen","checkHomeScreenStatus","sendData","switchInlineQuery","query","choose_chat_types","tgWebAppBotInline","chat_types","isArray","good_types","users","bots","groups","channels","chat_type","openLink","options","try_instant_view","try_browser","open","openTelegramLink","path_full","pathname","search","force_request","openInvoice","showPopup","title","message","buttons","popup_buttons","button","btn","button_type","showAlert","showConfirm","showScanQrPopup","closeScanQrPopup","readTextFromClipboard","requestWriteAccess","requestContact","downloadFile","dl_params","file_name","shareToStory","media_url","share_params","widget_link","link_name","shareMessage","msg_id","setEmojiStatus","custom_emoji_id","status_params","duration","requestEmojiStatusAccess","ready","expand","close","return_back","tgWebAppShowSettings"],"sources":["C:\\Users\\sande\\Desktop\\react app test\\wallet-connect-app\\my-wallet-app\\node_modules\\@twa-dev\\sdk\\src\\telegram-web-apps.js"],"sourcesContent":["// WebView\n(function () {\n  var eventHandlers = {};\n\n  var locationHash = '';\n  try {\n    locationHash = location.hash.toString();\n  } catch (e) {}\n\n  var initParams = urlParseHashParams(locationHash);\n  var storedParams = sessionStorageGet('initParams');\n  if (storedParams) {\n    for (var key in storedParams) {\n      if (typeof initParams[key] === 'undefined') {\n        initParams[key] = storedParams[key];\n      }\n    }\n  }\n  sessionStorageSet('initParams', initParams);\n\n  var isIframe = false, iFrameStyle;\n  try {\n    isIframe = (window.parent != null && window != window.parent);\n    if (isIframe) {\n      window.addEventListener('message', function (event) {\n        if (event.source !== window.parent) return;\n        try {\n          var dataParsed = JSON.parse(event.data);\n        } catch (e) {\n          return;\n        }\n        if (!dataParsed || !dataParsed.eventType) {\n          return;\n        }\n        if (dataParsed.eventType == 'set_custom_style') {\n          if (event.origin === 'https://web.telegram.org') {\n            iFrameStyle.innerHTML = dataParsed.eventData;\n          }\n        } else if (dataParsed.eventType == 'reload_iframe') {\n          try {\n            window.parent.postMessage(JSON.stringify({eventType: 'iframe_will_reload'}), '*');\n          } catch (e) {}\n          location.reload();\n        } else {\n          receiveEvent(dataParsed.eventType, dataParsed.eventData);\n        }\n      });\n      iFrameStyle = document.createElement('style');\n      document.head.appendChild(iFrameStyle);\n      try {\n        window.parent.postMessage(JSON.stringify({eventType: 'iframe_ready', eventData: {reload_supported: true}}), '*');\n      } catch (e) {}\n    }\n  } catch (e) {}\n\n  function urlSafeDecode(urlencoded) {\n    try {\n      urlencoded = urlencoded.replace(/\\+/g, '%20');\n      return decodeURIComponent(urlencoded);\n    } catch (e) {\n      return urlencoded;\n    }\n  }\n\n  function urlParseHashParams(locationHash) {\n    locationHash = locationHash.replace(/^#/, '');\n    var params = {};\n    if (!locationHash.length) {\n      return params;\n    }\n    if (locationHash.indexOf('=') < 0 && locationHash.indexOf('?') < 0) {\n      params._path = urlSafeDecode(locationHash);\n      return params;\n    }\n    var qIndex = locationHash.indexOf('?');\n    if (qIndex >= 0) {\n      var pathParam = locationHash.substr(0, qIndex);\n      params._path = urlSafeDecode(pathParam);\n      locationHash = locationHash.substr(qIndex + 1);\n    }\n    var query_params = urlParseQueryString(locationHash);\n    for (var k in query_params) {\n      params[k] = query_params[k];\n    }\n    return params;\n  }\n\n  function urlParseQueryString(queryString) {\n    var params = {};\n    if (!queryString.length) {\n      return params;\n    }\n    var queryStringParams = queryString.split('&');\n    var i, param, paramName, paramValue;\n    for (i = 0; i < queryStringParams.length; i++) {\n      param = queryStringParams[i].split('=');\n      paramName = urlSafeDecode(param[0]);\n      paramValue = param[1] == null ? null : urlSafeDecode(param[1]);\n      params[paramName] = paramValue;\n    }\n    return params;\n  }\n\n  // Telegram apps will implement this logic to add service params (e.g. tgShareScoreUrl) to game URL\n  function urlAppendHashParams(url, addHash) {\n    // url looks like 'https://game.com/path?query=1#hash'\n    // addHash looks like 'tgShareScoreUrl=' + encodeURIComponent('tgb://share_game_score?hash=very_long_hash123')\n\n    var ind = url.indexOf('#');\n    if (ind < 0) {\n      // https://game.com/path -> https://game.com/path#tgShareScoreUrl=etc\n      return url + '#' + addHash;\n    }\n    var curHash = url.substr(ind + 1);\n    if (curHash.indexOf('=') >= 0 || curHash.indexOf('?') >= 0) {\n      // https://game.com/#hash=1 -> https://game.com/#hash=1&tgShareScoreUrl=etc\n      // https://game.com/#path?query -> https://game.com/#path?query&tgShareScoreUrl=etc\n      return url + '&' + addHash;\n    }\n    // https://game.com/#hash -> https://game.com/#hash?tgShareScoreUrl=etc\n    if (curHash.length > 0) {\n      return url + '?' + addHash;\n    }\n    // https://game.com/# -> https://game.com/#tgShareScoreUrl=etc\n    return url + addHash;\n  }\n\n  function postEvent(eventType, callback, eventData) {\n    if (!callback) {\n      callback = function () {};\n    }\n    if (eventData === undefined) {\n      eventData = '';\n    }\n    console.log('[Telegram.WebView] > postEvent', eventType, eventData);\n\n    if (window.TelegramWebviewProxy !== undefined) {\n      TelegramWebviewProxy.postEvent(eventType, JSON.stringify(eventData));\n      callback();\n    }\n    else if (window.external && 'notify' in window.external) {\n      window.external.notify(JSON.stringify({eventType: eventType, eventData: eventData}));\n      callback();\n    }\n    else if (isIframe) {\n      try {\n        var trustedTarget = 'https://web.telegram.org';\n        // For now we don't restrict target, for testing purposes\n        trustedTarget = '*';\n        window.parent.postMessage(JSON.stringify({eventType: eventType, eventData: eventData}), trustedTarget);\n        callback();\n      } catch (e) {\n        callback(e);\n      }\n    }\n    else {\n      callback({notAvailable: true});\n    }\n  };\n\n  function receiveEvent(eventType, eventData) {\n    console.log('[Telegram.WebView] < receiveEvent', eventType, eventData);\n    callEventCallbacks(eventType, function(callback) {\n      callback(eventType, eventData);\n    });\n  }\n\n  function callEventCallbacks(eventType, func) {\n    var curEventHandlers = eventHandlers[eventType];\n    if (curEventHandlers === undefined ||\n        !curEventHandlers.length) {\n      return;\n    }\n    for (var i = 0; i < curEventHandlers.length; i++) {\n      try {\n        func(curEventHandlers[i]);\n      } catch (e) {}\n    }\n  }\n\n  function onEvent(eventType, callback) {\n    if (eventHandlers[eventType] === undefined) {\n      eventHandlers[eventType] = [];\n    }\n    var index = eventHandlers[eventType].indexOf(callback);\n    if (index === -1) {\n      eventHandlers[eventType].push(callback);\n    }\n  };\n\n  function offEvent(eventType, callback) {\n    if (eventHandlers[eventType] === undefined) {\n      return;\n    }\n    var index = eventHandlers[eventType].indexOf(callback);\n    if (index === -1) {\n      return;\n    }\n    eventHandlers[eventType].splice(index, 1);\n  };\n\n  function openProtoUrl(url) {\n    if (!url.match(/^(web\\+)?tgb?:\\/\\/./)) {\n      return false;\n    }\n    var useIframe = navigator.userAgent.match(/iOS|iPhone OS|iPhone|iPod|iPad/i) ? true : false;\n    if (useIframe) {\n      var iframeContEl = document.getElementById('tgme_frame_cont') || document.body;\n      var iframeEl = document.createElement('iframe');\n      iframeContEl.appendChild(iframeEl);\n      var pageHidden = false;\n      var enableHidden = function () {\n        pageHidden = true;\n      };\n      window.addEventListener('pagehide', enableHidden, false);\n      window.addEventListener('blur', enableHidden, false);\n      if (iframeEl !== null) {\n        iframeEl.src = url;\n      }\n      setTimeout(function() {\n        if (!pageHidden) {\n          window.location = url;\n        }\n        window.removeEventListener('pagehide', enableHidden, false);\n        window.removeEventListener('blur', enableHidden, false);\n      }, 2000);\n    }\n    else {\n      window.location = url;\n    }\n    return true;\n  }\n\n  function sessionStorageSet(key, value) {\n    try {\n      window.sessionStorage.setItem('__telegram__' + key, JSON.stringify(value));\n      return true;\n    } catch(e) {}\n    return false;\n  }\n  function sessionStorageGet(key) {\n    try {\n      return JSON.parse(window.sessionStorage.getItem('__telegram__' + key));\n    } catch(e) {}\n    return null;\n  }\n\n  if (!window.Telegram) {\n    window.Telegram = {};\n  }\n  window.Telegram.WebView = {\n    initParams: initParams,\n    isIframe: isIframe,\n    onEvent: onEvent,\n    offEvent: offEvent,\n    postEvent: postEvent,\n    receiveEvent: receiveEvent,\n    callEventCallbacks: callEventCallbacks\n  };\n\n  window.Telegram.Utils = {\n    urlSafeDecode: urlSafeDecode,\n    urlParseQueryString: urlParseQueryString,\n    urlParseHashParams: urlParseHashParams,\n    urlAppendHashParams: urlAppendHashParams,\n    sessionStorageSet: sessionStorageSet,\n    sessionStorageGet: sessionStorageGet\n  };\n\n  // For Windows Phone app\n  window.TelegramGameProxy_receiveEvent = receiveEvent;\n\n  // App backward compatibility\n  window.TelegramGameProxy = {\n    receiveEvent: receiveEvent\n  };\n})();\n\n// WebApp\n(function () {\n  var Utils = window.Telegram.Utils;\n  var WebView = window.Telegram.WebView;\n  var initParams = WebView.initParams;\n  var isIframe = WebView.isIframe;\n\n  var WebApp = {};\n  var webAppInitData = '', webAppInitDataUnsafe = {};\n  var themeParams = {}, colorScheme = 'light';\n  var webAppVersion = '6.0';\n  var webAppPlatform = 'unknown';\n  var webAppIsActive = true;\n  var webAppIsFullscreen = false;\n  var webAppIsOrientationLocked = false;\n  var webAppBackgroundColor = 'bg_color';\n  var webAppHeaderColorKey = 'bg_color';\n  var webAppHeaderColor = null;\n\n  if (initParams.tgWebAppData && initParams.tgWebAppData.length) {\n    webAppInitData = initParams.tgWebAppData;\n    webAppInitDataUnsafe = Utils.urlParseQueryString(webAppInitData);\n    for (var key in webAppInitDataUnsafe) {\n      var val = webAppInitDataUnsafe[key];\n      try {\n        if (val.substr(0, 1) == '{' && val.substr(-1) == '}' ||\n            val.substr(0, 1) == '[' && val.substr(-1) == ']') {\n          webAppInitDataUnsafe[key] = JSON.parse(val);\n        }\n      } catch (e) {}\n    }\n  }\n  var stored_theme_params = Utils.sessionStorageGet('themeParams');\n  if (initParams.tgWebAppThemeParams && initParams.tgWebAppThemeParams.length) {\n    var themeParamsRaw = initParams.tgWebAppThemeParams;\n    try {\n      var theme_params = JSON.parse(themeParamsRaw);\n      if (theme_params) {\n        setThemeParams(theme_params);\n      }\n    } catch (e) {}\n  }\n  if (stored_theme_params) {\n    setThemeParams(stored_theme_params);\n  }\n  var stored_def_colors = Utils.sessionStorageGet('defaultColors');\n  if (initParams.tgWebAppDefaultColors && initParams.tgWebAppDefaultColors.length) {\n    var defColorsRaw = initParams.tgWebAppDefaultColors;\n    try {\n      var def_colors = JSON.parse(defColorsRaw);\n      if (def_colors) {\n        setDefaultColors(def_colors);\n      }\n    } catch (e) {}\n  }\n  if (stored_def_colors) {\n    setDefaultColors(stored_def_colors);\n  }\n  if (initParams.tgWebAppVersion) {\n    webAppVersion = initParams.tgWebAppVersion;\n  }\n  if (initParams.tgWebAppPlatform) {\n    webAppPlatform = initParams.tgWebAppPlatform;\n  }\n\n  var stored_fullscreen = Utils.sessionStorageGet('isFullscreen');\n  if (initParams.tgWebAppFullscreen) {\n    setFullscreen(true);\n  }\n  if (stored_fullscreen) {\n    setFullscreen(stored_fullscreen == 'yes');\n  }\n\n  var stored_orientation_lock = Utils.sessionStorageGet('isOrientationLocked');\n  if (stored_orientation_lock) {\n    setOrientationLock(stored_orientation_lock == 'yes');\n  }\n\n  function onThemeChanged(eventType, eventData) {\n    if (eventData.theme_params) {\n      setThemeParams(eventData.theme_params);\n      window.Telegram.WebApp.MainButton.setParams({});\n      window.Telegram.WebApp.SecondaryButton.setParams({});\n      updateHeaderColor();\n      updateBackgroundColor();\n      updateBottomBarColor();\n      receiveWebViewEvent('themeChanged');\n    }\n  }\n\n  var lastWindowHeight = window.innerHeight;\n  function onViewportChanged(eventType, eventData) {\n    if (eventData.height) {\n      window.removeEventListener('resize', onWindowResize);\n      setViewportHeight(eventData);\n    }\n  }\n\n  function onWindowResize(e) {\n    if (lastWindowHeight != window.innerHeight) {\n      lastWindowHeight = window.innerHeight;\n      receiveWebViewEvent('viewportChanged', {\n        isStateStable: true\n      });\n    }\n  }\n\n  function onSafeAreaChanged(eventType, eventData) {\n    if (eventData) {\n      setSafeAreaInset(eventData);\n    }\n  }\n  function onContentSafeAreaChanged(eventType, eventData) {\n    if (eventData) {\n      setContentSafeAreaInset(eventData);\n    }\n  }\n\n  function onVisibilityChanged(eventType, eventData) {\n    if (eventData.is_visible) {\n      webAppIsActive = true;\n      receiveWebViewEvent('activated');\n    } else {\n      webAppIsActive = false;\n      receiveWebViewEvent('deactivated');\n    }\n  }\n\n  function linkHandler(e) {\n    if (e.metaKey || e.ctrlKey) return;\n    var el = e.target;\n    while (el.tagName != 'A' && el.parentNode) {\n      el = el.parentNode;\n    }\n    if (el.tagName == 'A' &&\n        el.target != '_blank' &&\n        (el.protocol == 'http:' || el.protocol == 'https:') &&\n        el.hostname == 't.me') {\n      WebApp.openTgLink(el.href);\n      e.preventDefault();\n    }\n  }\n\n  function strTrim(str) {\n    return str.toString().replace(/^\\s+|\\s+$/g, '');\n  }\n\n  function receiveWebViewEvent(eventType) {\n    var args = Array.prototype.slice.call(arguments);\n    eventType = args.shift();\n    WebView.callEventCallbacks('webview:' + eventType, function(callback) {\n      callback.apply(WebApp, args);\n    });\n  }\n\n  function onWebViewEvent(eventType, callback) {\n    WebView.onEvent('webview:' + eventType, callback);\n  };\n\n  function offWebViewEvent(eventType, callback) {\n    WebView.offEvent('webview:' + eventType, callback);\n  };\n\n  function setCssProperty(name, value) {\n    var root = document.documentElement;\n    if (root && root.style && root.style.setProperty) {\n      root.style.setProperty('--tg-' + name, value);\n    }\n  }\n\n  function setFullscreen(is_fullscreen) {\n    webAppIsFullscreen = !!is_fullscreen;\n    Utils.sessionStorageSet('isFullscreen', webAppIsFullscreen ? 'yes' : 'no');\n  }\n\n  function setOrientationLock(is_locked) {\n    webAppIsOrientationLocked = !!is_locked;\n    Utils.sessionStorageSet('isOrientationLocked', webAppIsOrientationLocked ? 'yes' : 'no');\n  }\n\n  function setThemeParams(theme_params) {\n    // temp iOS fix\n    if (theme_params.bg_color == '#1c1c1d' &&\n        theme_params.bg_color == theme_params.secondary_bg_color) {\n      theme_params.secondary_bg_color = '#2c2c2e';\n    }\n    var color;\n    for (var key in theme_params) {\n      if (color = parseColorToHex(theme_params[key])) {\n        themeParams[key] = color;\n        if (key == 'bg_color') {\n          colorScheme = isColorDark(color) ? 'dark' : 'light'\n          setCssProperty('color-scheme', colorScheme);\n        }\n        key = 'theme-' + key.split('_').join('-');\n        setCssProperty(key, color);\n      }\n    }\n    Utils.sessionStorageSet('themeParams', themeParams);\n  }\n\n  function setDefaultColors(def_colors) {\n    if (colorScheme == 'dark') {\n      if (def_colors.bg_dark_color) {\n        webAppBackgroundColor = def_colors.bg_dark_color;\n      }\n      if (def_colors.header_dark_color) {\n        webAppHeaderColorKey = null;\n        webAppHeaderColor = def_colors.header_dark_color;\n      }\n    } else {\n      if (def_colors.bg_color) {\n        webAppBackgroundColor = def_colors.bg_color;\n      }\n      if (def_colors.header_color) {\n        webAppHeaderColorKey = null;\n        webAppHeaderColor = def_colors.header_color;\n      }\n    }\n    Utils.sessionStorageSet('defaultColors', def_colors);\n  }\n\n  var webAppCallbacks = {};\n  function generateCallbackId(len) {\n    var tries = 100;\n    while (--tries) {\n      var id = '', chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789', chars_len = chars.length;\n      for (var i = 0; i < len; i++) {\n        id += chars[Math.floor(Math.random() * chars_len)];\n      }\n      if (!webAppCallbacks[id]) {\n        webAppCallbacks[id] = {};\n        return id;\n      }\n    }\n    throw Error('WebAppCallbackIdGenerateFailed');\n  }\n\n  var viewportHeight = false, viewportStableHeight = false, isExpanded = true;\n  function setViewportHeight(data) {\n    if (typeof data !== 'undefined') {\n      isExpanded = !!data.is_expanded;\n      viewportHeight = data.height;\n      if (data.is_state_stable) {\n        viewportStableHeight = data.height;\n      }\n      receiveWebViewEvent('viewportChanged', {\n        isStateStable: !!data.is_state_stable\n      });\n    }\n    var height, stable_height;\n    if (viewportHeight !== false) {\n      height = (viewportHeight - bottomBarHeight) + 'px';\n    } else {\n      height = bottomBarHeight ? 'calc(100vh - ' + bottomBarHeight + 'px)' : '100vh';\n    }\n    if (viewportStableHeight !== false) {\n      stable_height = (viewportStableHeight - bottomBarHeight) + 'px';\n    } else {\n      stable_height = bottomBarHeight ? 'calc(100vh - ' + bottomBarHeight + 'px)' : '100vh';\n    }\n    setCssProperty('viewport-height', height);\n    setCssProperty('viewport-stable-height', stable_height);\n  }\n\n  var safeAreaInset = {top: 0, bottom: 0, left: 0, right: 0};\n  function setSafeAreaInset(data) {\n    if (typeof data !== 'undefined') {\n      if (typeof data.top !== 'undefined') {\n        safeAreaInset.top = data.top;\n      }\n      if (typeof data.bottom !== 'undefined') {\n        safeAreaInset.bottom = data.bottom;\n      }\n      if (typeof data.left !== 'undefined') {\n        safeAreaInset.left = data.left;\n      }\n      if (typeof data.right !== 'undefined') {\n        safeAreaInset.right = data.right;\n      }\n      receiveWebViewEvent('safeAreaChanged');\n    }\n    setCssProperty('safe-area-inset-top', safeAreaInset.top + 'px');\n    setCssProperty('safe-area-inset-bottom', safeAreaInset.bottom + 'px');\n    setCssProperty('safe-area-inset-left', safeAreaInset.left + 'px');\n    setCssProperty('safe-area-inset-right', safeAreaInset.right + 'px');\n  }\n\n  var contentSafeAreaInset = {top: 0, bottom: 0, left: 0, right: 0};\n  function setContentSafeAreaInset(data) {\n    if (typeof data !== 'undefined') {\n      if (typeof data.top !== 'undefined') {\n        contentSafeAreaInset.top = data.top;\n      }\n      if (typeof data.bottom !== 'undefined') {\n        contentSafeAreaInset.bottom = data.bottom;\n      }\n      if (typeof data.left !== 'undefined') {\n        contentSafeAreaInset.left = data.left;\n      }\n      if (typeof data.right !== 'undefined') {\n        contentSafeAreaInset.right = data.right;\n      }\n      receiveWebViewEvent('contentSafeAreaChanged');\n    }\n    setCssProperty('content-safe-area-inset-top', contentSafeAreaInset.top + 'px');\n    setCssProperty('content-safe-area-inset-bottom', contentSafeAreaInset.bottom + 'px');\n    setCssProperty('content-safe-area-inset-left', contentSafeAreaInset.left + 'px');\n    setCssProperty('content-safe-area-inset-right', contentSafeAreaInset.right + 'px');\n  }\n\n  var isClosingConfirmationEnabled = false;\n  function setClosingConfirmation(need_confirmation) {\n    if (!versionAtLeast('6.2')) {\n      console.warn('[Telegram.WebApp] Closing confirmation is not supported in version ' + webAppVersion);\n      return;\n    }\n    isClosingConfirmationEnabled = !!need_confirmation;\n    WebView.postEvent('web_app_setup_closing_behavior', false, {need_confirmation: isClosingConfirmationEnabled});\n  }\n\n  var isVerticalSwipesEnabled = true;\n  function toggleVerticalSwipes(enable_swipes) {\n    if (!versionAtLeast('7.7')) {\n      console.warn('[Telegram.WebApp] Changing swipes behavior is not supported in version ' + webAppVersion);\n      return;\n    }\n    isVerticalSwipesEnabled = !!enable_swipes;\n    WebView.postEvent('web_app_setup_swipe_behavior', false, {allow_vertical_swipe: isVerticalSwipesEnabled});\n  }\n\n  function onFullscreenChanged(eventType, eventData) {\n    setFullscreen(eventData.is_fullscreen);\n    receiveWebViewEvent('fullscreenChanged');\n  }\n  function onFullscreenFailed(eventType, eventData) {\n    if (eventData.error == 'ALREADY_FULLSCREEN' && !webAppIsFullscreen) {\n      setFullscreen(true);\n    }\n    receiveWebViewEvent('fullscreenFailed', {\n      error: eventData.error\n    });\n  }\n\n  function toggleOrientationLock(locked) {\n    if (!versionAtLeast('8.0')) {\n      console.warn('[Telegram.WebApp] Orientation locking is not supported in version ' + webAppVersion);\n      return;\n    }\n    setOrientationLock(locked);\n    WebView.postEvent('web_app_toggle_orientation_lock', false, {locked: webAppIsOrientationLocked});\n  }\n\n  var homeScreenCallbacks = [];\n  function onHomeScreenAdded(eventType, eventData) {\n    receiveWebViewEvent('homeScreenAdded');\n  }\n  function onHomeScreenChecked(eventType, eventData) {\n    var status = eventData.status || 'unknown';\n    if (homeScreenCallbacks.length > 0) {\n      for (var i = 0; i < homeScreenCallbacks.length; i++) {\n        var callback = homeScreenCallbacks[i];\n        callback(status);\n      }\n      homeScreenCallbacks = [];\n    }\n    receiveWebViewEvent('homeScreenChecked', {\n      status: status\n    });\n  }\n\n  var WebAppShareMessageOpened = false;\n  function onPreparedMessageSent(eventType, eventData) {\n    if (WebAppShareMessageOpened) {\n      var requestData = WebAppShareMessageOpened;\n      WebAppShareMessageOpened = false;\n      if (requestData.callback) {\n        requestData.callback(true);\n      }\n      receiveWebViewEvent('shareMessageSent');\n    }\n  }\n  function onPreparedMessageFailed(eventType, eventData) {\n    if (WebAppShareMessageOpened) {\n      var requestData = WebAppShareMessageOpened;\n      WebAppShareMessageOpened = false;\n      if (requestData.callback) {\n        requestData.callback(false);\n      }\n      receiveWebViewEvent('shareMessageFailed', {\n        error: eventData.error\n      });\n    }\n  }\n\n  var WebAppEmojiStatusRequested = false;\n  function onEmojiStatusSet(eventType, eventData) {\n    if (WebAppEmojiStatusRequested) {\n      var requestData = WebAppEmojiStatusRequested;\n      WebAppEmojiStatusRequested = false;\n      if (requestData.callback) {\n        requestData.callback(true);\n      }\n      receiveWebViewEvent('emojiStatusSet');\n    }\n  }\n  function onEmojiStatusFailed(eventType, eventData) {\n    if (WebAppEmojiStatusRequested) {\n      var requestData = WebAppEmojiStatusRequested;\n      WebAppEmojiStatusRequested = false;\n      if (requestData.callback) {\n        requestData.callback(false);\n      }\n      receiveWebViewEvent('emojiStatusFailed', {\n        error: eventData.error\n      });\n    }\n  }\n  var WebAppEmojiStatusAccessRequested = false;\n  function onEmojiStatusAccessRequested(eventType, eventData) {\n    if (WebAppEmojiStatusAccessRequested) {\n      var requestData = WebAppEmojiStatusAccessRequested;\n      WebAppEmojiStatusAccessRequested = false;\n      if (requestData.callback) {\n        requestData.callback(eventData.status == 'allowed');\n      }\n      receiveWebViewEvent('emojiStatusAccessRequested', {\n        status: eventData.status\n      });\n    }\n  }\n\n  var webAppPopupOpened = false;\n  function onPopupClosed(eventType, eventData) {\n    if (webAppPopupOpened) {\n      var popupData = webAppPopupOpened;\n      webAppPopupOpened = false;\n      var button_id = null;\n      if (typeof eventData.button_id !== 'undefined') {\n        button_id = eventData.button_id;\n      }\n      if (popupData.callback) {\n        popupData.callback(button_id);\n      }\n      receiveWebViewEvent('popupClosed', {\n        button_id: button_id\n      });\n    }\n  }\n\n\n  function getHeaderColor() {\n    if (webAppHeaderColorKey == 'secondary_bg_color') {\n      return themeParams.secondary_bg_color;\n    } else if (webAppHeaderColorKey == 'bg_color') {\n      return themeParams.bg_color;\n    }\n    return webAppHeaderColor;\n  }\n  function setHeaderColor(color) {\n    if (!versionAtLeast('6.1')) {\n      console.warn('[Telegram.WebApp] Header color is not supported in version ' + webAppVersion);\n      return;\n    }\n    if (!versionAtLeast('6.9')) {\n      if (themeParams.bg_color &&\n          themeParams.bg_color == color) {\n        color = 'bg_color';\n      } else if (themeParams.secondary_bg_color &&\n          themeParams.secondary_bg_color == color) {\n        color = 'secondary_bg_color';\n      }\n    }\n    var head_color = null, color_key = null;\n    if (color == 'bg_color' || color == 'secondary_bg_color') {\n      color_key = color;\n    } else if (versionAtLeast('6.9')) {\n      head_color = parseColorToHex(color);\n      if (!head_color) {\n        console.error('[Telegram.WebApp] Header color format is invalid', color);\n        throw Error('WebAppHeaderColorInvalid');\n      }\n    }\n    if (!versionAtLeast('6.9') &&\n        color_key != 'bg_color' &&\n        color_key != 'secondary_bg_color') {\n      console.error('[Telegram.WebApp] Header color key should be one of Telegram.WebApp.themeParams.bg_color, Telegram.WebApp.themeParams.secondary_bg_color, \\'bg_color\\', \\'secondary_bg_color\\'', color);\n      throw Error('WebAppHeaderColorKeyInvalid');\n    }\n    webAppHeaderColorKey = color_key;\n    webAppHeaderColor = head_color;\n    updateHeaderColor();\n  }\n  var appHeaderColorKey = null, appHeaderColor = null;\n  function updateHeaderColor() {\n    if (appHeaderColorKey != webAppHeaderColorKey ||\n        appHeaderColor != webAppHeaderColor) {\n      appHeaderColorKey = webAppHeaderColorKey;\n      appHeaderColor = webAppHeaderColor;\n      if (appHeaderColor) {\n        WebView.postEvent('web_app_set_header_color', false, {color: webAppHeaderColor});\n      } else {\n        WebView.postEvent('web_app_set_header_color', false, {color_key: webAppHeaderColorKey});\n      }\n    }\n  }\n\n  function getBackgroundColor() {\n    if (webAppBackgroundColor == 'secondary_bg_color') {\n      return themeParams.secondary_bg_color;\n    } else if (webAppBackgroundColor == 'bg_color') {\n      return themeParams.bg_color;\n    }\n    return webAppBackgroundColor;\n  }\n  function setBackgroundColor(color) {\n    if (!versionAtLeast('6.1')) {\n      console.warn('[Telegram.WebApp] Background color is not supported in version ' + webAppVersion);\n      return;\n    }\n    var bg_color;\n    if (color == 'bg_color' || color == 'secondary_bg_color') {\n      bg_color = color;\n    } else {\n      bg_color = parseColorToHex(color);\n      if (!bg_color) {\n        console.error('[Telegram.WebApp] Background color format is invalid', color);\n        throw Error('WebAppBackgroundColorInvalid');\n      }\n    }\n    webAppBackgroundColor = bg_color;\n    updateBackgroundColor();\n  }\n  var appBackgroundColor = null;\n  function updateBackgroundColor() {\n    var color = getBackgroundColor();\n    if (appBackgroundColor != color) {\n      appBackgroundColor = color;\n      WebView.postEvent('web_app_set_background_color', false, {color: color});\n    }\n  }\n\n  var bottomBarColor = 'bottom_bar_bg_color';\n  function getBottomBarColor() {\n    if (bottomBarColor == 'bottom_bar_bg_color') {\n      return themeParams.bottom_bar_bg_color || themeParams.secondary_bg_color || '#ffffff';\n    } else if (bottomBarColor == 'secondary_bg_color') {\n      return themeParams.secondary_bg_color;\n    } else if (bottomBarColor == 'bg_color') {\n      return themeParams.bg_color;\n    }\n    return bottomBarColor;\n  }\n  function setBottomBarColor(color) {\n    if (!versionAtLeast('7.10')) {\n      console.warn('[Telegram.WebApp] Bottom bar color is not supported in version ' + webAppVersion);\n      return;\n    }\n    var bg_color;\n    if (color == 'bg_color' || color == 'secondary_bg_color' || color == 'bottom_bar_bg_color') {\n      bg_color = color;\n    } else {\n      bg_color = parseColorToHex(color);\n      if (!bg_color) {\n        console.error('[Telegram.WebApp] Bottom bar color format is invalid', color);\n        throw Error('WebAppBottomBarColorInvalid');\n      }\n    }\n    bottomBarColor = bg_color;\n    updateBottomBarColor();\n    window.Telegram.WebApp.SecondaryButton.setParams({});\n  }\n  var appBottomBarColor = null;\n  function updateBottomBarColor() {\n    var color = getBottomBarColor();\n    if (appBottomBarColor != color) {\n      appBottomBarColor = color;\n      WebView.postEvent('web_app_set_bottom_bar_color', false, {color: color});\n    }\n    if (initParams.tgWebAppDebug) {\n      updateDebugBottomBar();\n    }\n  }\n\n\n  function parseColorToHex(color) {\n    color += '';\n    var match;\n    if (match = /^\\s*#([0-9a-f]{6})\\s*$/i.exec(color)) {\n      return '#' + match[1].toLowerCase();\n    }\n    else if (match = /^\\s*#([0-9a-f])([0-9a-f])([0-9a-f])\\s*$/i.exec(color)) {\n      return ('#' + match[1] + match[1] + match[2] + match[2] + match[3] + match[3]).toLowerCase();\n    }\n    else if (match = /^\\s*rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+\\.{0,1}\\d*))?\\)\\s*$/.exec(color)) {\n      var r = parseInt(match[1]), g = parseInt(match[2]), b = parseInt(match[3]);\n      r = (r < 16 ? '0' : '') + r.toString(16);\n      g = (g < 16 ? '0' : '') + g.toString(16);\n      b = (b < 16 ? '0' : '') + b.toString(16);\n      return '#' + r + g + b;\n    }\n    return false;\n  }\n\n  function isColorDark(rgb) {\n    rgb = rgb.replace(/[\\s#]/g, '');\n    if (rgb.length == 3) {\n      rgb = rgb[0] + rgb[0] + rgb[1] + rgb[1] + rgb[2] + rgb[2];\n    }\n    var r = parseInt(rgb.substr(0, 2), 16);\n    var g = parseInt(rgb.substr(2, 2), 16);\n    var b = parseInt(rgb.substr(4, 2), 16);\n    var hsp = Math.sqrt(0.299 * (r * r) + 0.587 * (g * g) + 0.114 * (b * b));\n    return hsp < 120;\n  }\n\n  function versionCompare(v1, v2) {\n    if (typeof v1 !== 'string') v1 = '';\n    if (typeof v2 !== 'string') v2 = '';\n    v1 = v1.replace(/^\\s+|\\s+$/g, '').split('.');\n    v2 = v2.replace(/^\\s+|\\s+$/g, '').split('.');\n    var a = Math.max(v1.length, v2.length), i, p1, p2;\n    for (i = 0; i < a; i++) {\n      p1 = parseInt(v1[i]) || 0;\n      p2 = parseInt(v2[i]) || 0;\n      if (p1 == p2) continue;\n      if (p1 > p2) return 1;\n      return -1;\n    }\n    return 0;\n  }\n\n  function versionAtLeast(ver) {\n    return versionCompare(webAppVersion, ver) >= 0;\n  }\n\n  function byteLength(str) {\n    if (window.Blob) {\n      try { return new Blob([str]).size; } catch (e) {}\n    }\n    var s = str.length;\n    for (var i=str.length-1; i>=0; i--) {\n      var code = str.charCodeAt(i);\n      if (code > 0x7f && code <= 0x7ff) s++;\n      else if (code > 0x7ff && code <= 0xffff) s+=2;\n      if (code >= 0xdc00 && code <= 0xdfff) i--;\n    }\n    return s;\n  }\n\n  var BackButton = (function() {\n    var isVisible = false;\n\n    var backButton = {};\n    Object.defineProperty(backButton, 'isVisible', {\n      set: function(val){ setParams({is_visible: val}); },\n      get: function(){ return isVisible; },\n      enumerable: true\n    });\n\n    var curButtonState = null;\n\n    WebView.onEvent('back_button_pressed', onBackButtonPressed);\n\n    function onBackButtonPressed() {\n      receiveWebViewEvent('backButtonClicked');\n    }\n\n    function buttonParams() {\n      return {is_visible: isVisible};\n    }\n\n    function buttonState(btn_params) {\n      if (typeof btn_params === 'undefined') {\n        btn_params = buttonParams();\n      }\n      return JSON.stringify(btn_params);\n    }\n\n    function buttonCheckVersion() {\n      if (!versionAtLeast('6.1')) {\n        console.warn('[Telegram.WebApp] BackButton is not supported in version ' + webAppVersion);\n        return false;\n      }\n      return true;\n    }\n\n    function updateButton() {\n      var btn_params = buttonParams();\n      var btn_state = buttonState(btn_params);\n      if (curButtonState === btn_state) {\n        return;\n      }\n      curButtonState = btn_state;\n      WebView.postEvent('web_app_setup_back_button', false, btn_params);\n    }\n\n    function setParams(params) {\n      if (!buttonCheckVersion()) {\n        return backButton;\n      }\n      if (typeof params.is_visible !== 'undefined') {\n        isVisible = !!params.is_visible;\n      }\n      updateButton();\n      return backButton;\n    }\n\n    backButton.onClick = function(callback) {\n      if (buttonCheckVersion()) {\n        onWebViewEvent('backButtonClicked', callback);\n      }\n      return backButton;\n    };\n    backButton.offClick = function(callback) {\n      if (buttonCheckVersion()) {\n        offWebViewEvent('backButtonClicked', callback);\n      }\n      return backButton;\n    };\n    backButton.show = function() {\n      return setParams({is_visible: true});\n    };\n    backButton.hide = function() {\n      return setParams({is_visible: false});\n    };\n    return backButton;\n  })();\n\n  var debugBottomBar = null, debugBottomBarBtns = {}, bottomBarHeight = 0;\n  if (initParams.tgWebAppDebug) {\n    debugBottomBar = document.createElement('tg-bottom-bar');\n    var debugBottomBarStyle = {\n      display: 'flex',\n      gap: '7px',\n      font: '600 14px/18px sans-serif',\n      width: '100%',\n      background: getBottomBarColor(),\n      position: 'fixed',\n      left: '0',\n      right: '0',\n      bottom: '0',\n      margin: '0',\n      padding: '7px',\n      textAlign: 'center',\n      boxSizing: 'border-box',\n      zIndex: '10000'\n    };\n    for (var k in debugBottomBarStyle) {\n      debugBottomBar.style[k] = debugBottomBarStyle[k];\n    }\n    document.addEventListener('DOMContentLoaded', function onDomLoaded(event) {\n      document.removeEventListener('DOMContentLoaded', onDomLoaded);\n      document.body.appendChild(debugBottomBar);\n    });\n    var animStyle = document.createElement('style');\n    animStyle.innerHTML = 'tg-bottom-button.shine { position: relative; overflow: hidden; } tg-bottom-button.shine:before { content:\"\"; position: absolute; top: 0; width: 100%; height: 100%; background: linear-gradient(120deg, transparent, rgba(255, 255, 255, .2), transparent); animation: tg-bottom-button-shine 5s ease-in-out infinite; } @-webkit-keyframes tg-bottom-button-shine { 0% {left: -100%;} 12%,100% {left: 100%}} @keyframes tg-bottom-button-shine { 0% {left: -100%;} 12%,100% {left: 100%}}';\n    debugBottomBar.appendChild(animStyle);\n  }\n  function updateDebugBottomBar() {\n    var mainBtn = debugBottomBarBtns.main._bottomButton;\n    var secondaryBtn = debugBottomBarBtns.secondary._bottomButton;\n    if (mainBtn.isVisible || secondaryBtn.isVisible) {\n      debugBottomBar.style.display = 'flex';\n      bottomBarHeight = 58;\n      if (mainBtn.isVisible && secondaryBtn.isVisible) {\n        if (secondaryBtn.position == 'top') {\n          debugBottomBar.style.flexDirection = 'column-reverse';\n          bottomBarHeight += 51;\n        } else if (secondaryBtn.position == 'bottom') {\n          debugBottomBar.style.flexDirection = 'column';\n          bottomBarHeight += 51;\n        } else if (secondaryBtn.position == 'left') {\n          debugBottomBar.style.flexDirection = 'row-reverse';\n        } else if (secondaryBtn.position == 'right') {\n          debugBottomBar.style.flexDirection = 'row';\n        }\n      }\n    } else {\n      debugBottomBar.style.display = 'none';\n      bottomBarHeight = 0;\n    }\n    debugBottomBar.style.background = getBottomBarColor();\n    if (document.documentElement) {\n      document.documentElement.style.boxSizing = 'border-box';\n      document.documentElement.style.paddingBottom = bottomBarHeight + 'px';\n    }\n    setViewportHeight();\n  }\n\n\n  var BottomButtonConstructor = function(type) {\n    var isMainButton = (type == 'main');\n    if (isMainButton) {\n      var setupFnName = 'web_app_setup_main_button';\n      var tgEventName = 'main_button_pressed';\n      var webViewEventName = 'mainButtonClicked';\n      var buttonTextDefault = 'Continue';\n      var buttonColorDefault = function(){ return themeParams.button_color || '#2481cc'; };\n      var buttonTextColorDefault = function(){ return themeParams.button_text_color || '#ffffff'; };\n    } else {\n      var setupFnName = 'web_app_setup_secondary_button';\n      var tgEventName = 'secondary_button_pressed';\n      var webViewEventName = 'secondaryButtonClicked';\n      var buttonTextDefault = 'Cancel';\n      var buttonColorDefault = function(){ return getBottomBarColor(); };\n      var buttonTextColorDefault = function(){ return themeParams.button_color || '#2481cc'; };\n    }\n\n    var isVisible = false;\n    var isActive = true;\n    var hasShineEffect = false;\n    var isProgressVisible = false;\n    var buttonType = type;\n    var buttonText = buttonTextDefault;\n    var buttonColor = false;\n    var buttonTextColor = false;\n    var buttonPosition = 'left';\n\n    var bottomButton = {};\n    Object.defineProperty(bottomButton, 'type', {\n      get: function(){ return buttonType; },\n      enumerable: true\n    });\n    Object.defineProperty(bottomButton, 'text', {\n      set: function(val){ bottomButton.setParams({text: val}); },\n      get: function(){ return buttonText; },\n      enumerable: true\n    });\n    Object.defineProperty(bottomButton, 'color', {\n      set: function(val){ bottomButton.setParams({color: val}); },\n      get: function(){ return buttonColor || buttonColorDefault(); },\n      enumerable: true\n    });\n    Object.defineProperty(bottomButton, 'textColor', {\n      set: function(val){ bottomButton.setParams({text_color: val}); },\n      get: function(){ return buttonTextColor || buttonTextColorDefault(); },\n      enumerable: true\n    });\n    Object.defineProperty(bottomButton, 'isVisible', {\n      set: function(val){ bottomButton.setParams({is_visible: val}); },\n      get: function(){ return isVisible; },\n      enumerable: true\n    });\n    Object.defineProperty(bottomButton, 'isProgressVisible', {\n      get: function(){ return isProgressVisible; },\n      enumerable: true\n    });\n    Object.defineProperty(bottomButton, 'isActive', {\n      set: function(val){ bottomButton.setParams({is_active: val}); },\n      get: function(){ return isActive; },\n      enumerable: true\n    });\n    Object.defineProperty(bottomButton, 'hasShineEffect', {\n      set: function(val){ bottomButton.setParams({has_shine_effect: val}); },\n      get: function(){ return hasShineEffect; },\n      enumerable: true\n    });\n    if (!isMainButton) {\n      Object.defineProperty(bottomButton, 'position', {\n        set: function(val){ bottomButton.setParams({position: val}); },\n        get: function(){ return buttonPosition; },\n        enumerable: true\n      });\n    }\n\n    var curButtonState = null;\n\n    WebView.onEvent(tgEventName, onBottomButtonPressed);\n\n    var debugBtn = null;\n    if (initParams.tgWebAppDebug) {\n      debugBtn = document.createElement('tg-bottom-button');\n      var debugBtnStyle = {\n        display: 'none',\n        width: '100%',\n        height: '44px',\n        borderRadius: '0',\n        background: 'no-repeat right center',\n        padding: '13px 15px',\n        textAlign: 'center',\n        boxSizing: 'border-box'\n      };\n      for (var k in debugBtnStyle) {\n        debugBtn.style[k] = debugBtnStyle[k];\n      }\n      debugBottomBar.appendChild(debugBtn);\n      debugBtn.addEventListener('click', onBottomButtonPressed, false);\n      debugBtn._bottomButton = bottomButton;\n      debugBottomBarBtns[type] = debugBtn;\n    }\n\n    function onBottomButtonPressed() {\n      if (isActive) {\n        receiveWebViewEvent(webViewEventName);\n      }\n    }\n\n    function buttonParams() {\n      var color = bottomButton.color;\n      var text_color = bottomButton.textColor;\n      if (isVisible) {\n        var params = {\n          is_visible: true,\n          is_active: isActive,\n          is_progress_visible: isProgressVisible,\n          text: buttonText,\n          color: color,\n          text_color: text_color,\n          has_shine_effect: hasShineEffect && isActive && !isProgressVisible\n        };\n        if (!isMainButton) {\n          params.position = buttonPosition;\n        }\n      } else {\n        var params = {\n          is_visible: false\n        };\n      }\n      return params;\n    }\n\n    function buttonState(btn_params) {\n      if (typeof btn_params === 'undefined') {\n        btn_params = buttonParams();\n      }\n      return JSON.stringify(btn_params);\n    }\n\n    function updateButton() {\n      var btn_params = buttonParams();\n      var btn_state = buttonState(btn_params);\n      if (curButtonState === btn_state) {\n        return;\n      }\n      curButtonState = btn_state;\n      WebView.postEvent(setupFnName, false, btn_params);\n      if (initParams.tgWebAppDebug) {\n        updateDebugButton(btn_params);\n      }\n    }\n\n    function updateDebugButton(btn_params) {\n      if (btn_params.is_visible) {\n        debugBtn.style.display = 'block';\n\n        debugBtn.style.opacity = btn_params.is_active ? '1' : '0.8';\n        debugBtn.style.cursor = btn_params.is_active ? 'pointer' : 'auto';\n        debugBtn.disabled = !btn_params.is_active;\n        debugBtn.innerText = btn_params.text;\n        debugBtn.className = btn_params.has_shine_effect ? 'shine' : '';\n        debugBtn.style.backgroundImage = btn_params.is_progress_visible ? \"url('data:image/svg+xml,\" + encodeURIComponent('<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewport=\"0 0 48 48\" width=\"48px\" height=\"48px\"><circle cx=\"50%\" cy=\"50%\" stroke=\"' + btn_params.text_color + '\" stroke-width=\"2.25\" stroke-linecap=\"round\" fill=\"none\" stroke-dashoffset=\"106\" r=\"9\" stroke-dasharray=\"56.52\" rotate=\"-90\"><animate attributeName=\"stroke-dashoffset\" attributeType=\"XML\" dur=\"360s\" from=\"0\" to=\"12500\" repeatCount=\"indefinite\"></animate><animateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" dur=\"1s\" from=\"-90 24 24\" to=\"630 24 24\" repeatCount=\"indefinite\"></animateTransform></circle></svg>') + \"')\" : 'none';\n        debugBtn.style.backgroundColor = btn_params.color;\n        debugBtn.style.color = btn_params.text_color;\n      } else {\n        debugBtn.style.display = 'none';\n      }\n      updateDebugBottomBar();\n    }\n\n    function setParams(params) {\n      if (typeof params.text !== 'undefined') {\n        var text = strTrim(params.text);\n        if (!text.length) {\n          console.error('[Telegram.WebApp] Bottom button text is required', params.text);\n          throw Error('WebAppBottomButtonParamInvalid');\n        }\n        if (text.length > 64) {\n          console.error('[Telegram.WebApp] Bottom button text is too long', text);\n          throw Error('WebAppBottomButtonParamInvalid');\n        }\n        buttonText = text;\n      }\n      if (typeof params.color !== 'undefined') {\n        if (params.color === false ||\n            params.color === null) {\n          buttonColor = false;\n        } else {\n          var color = parseColorToHex(params.color);\n          if (!color) {\n            console.error('[Telegram.WebApp] Bottom button color format is invalid', params.color);\n            throw Error('WebAppBottomButtonParamInvalid');\n          }\n          buttonColor = color;\n        }\n      }\n      if (typeof params.text_color !== 'undefined') {\n        if (params.text_color === false ||\n            params.text_color === null) {\n          buttonTextColor = false;\n        } else {\n          var text_color = parseColorToHex(params.text_color);\n          if (!text_color) {\n            console.error('[Telegram.WebApp] Bottom button text color format is invalid', params.text_color);\n            throw Error('WebAppBottomButtonParamInvalid');\n          }\n          buttonTextColor = text_color;\n        }\n      }\n      if (typeof params.is_visible !== 'undefined') {\n        if (params.is_visible &&\n            !bottomButton.text.length) {\n          console.error('[Telegram.WebApp] Bottom button text is required');\n          throw Error('WebAppBottomButtonParamInvalid');\n        }\n        isVisible = !!params.is_visible;\n      }\n      if (typeof params.has_shine_effect !== 'undefined') {\n        hasShineEffect = !!params.has_shine_effect;\n      }\n      if (!isMainButton && typeof params.position !== 'undefined') {\n        if (params.position != 'left' && params.position != 'right' &&\n            params.position != 'top' && params.position != 'bottom') {\n          console.error('[Telegram.WebApp] Bottom button posiition is invalid', params.position);\n          throw Error('WebAppBottomButtonParamInvalid');\n        }\n        buttonPosition = params.position;\n      }\n      if (typeof params.is_active !== 'undefined') {\n        isActive = !!params.is_active;\n      }\n      updateButton();\n      return bottomButton;\n    }\n\n    bottomButton.setText = function(text) {\n      return bottomButton.setParams({text: text});\n    };\n    bottomButton.onClick = function(callback) {\n      onWebViewEvent(webViewEventName, callback);\n      return bottomButton;\n    };\n    bottomButton.offClick = function(callback) {\n      offWebViewEvent(webViewEventName, callback);\n      return bottomButton;\n    };\n    bottomButton.show = function() {\n      return bottomButton.setParams({is_visible: true});\n    };\n    bottomButton.hide = function() {\n      return bottomButton.setParams({is_visible: false});\n    };\n    bottomButton.enable = function() {\n      return bottomButton.setParams({is_active: true});\n    };\n    bottomButton.disable = function() {\n      return bottomButton.setParams({is_active: false});\n    };\n    bottomButton.showProgress = function(leaveActive) {\n      isActive = !!leaveActive;\n      isProgressVisible = true;\n      updateButton();\n      return bottomButton;\n    };\n    bottomButton.hideProgress = function() {\n      if (!bottomButton.isActive) {\n        isActive = true;\n      }\n      isProgressVisible = false;\n      updateButton();\n      return bottomButton;\n    }\n    bottomButton.setParams = setParams;\n    return bottomButton;\n  };\n  var MainButton = BottomButtonConstructor('main');\n  var SecondaryButton = BottomButtonConstructor('secondary');\n\n  var SettingsButton = (function() {\n    var isVisible = false;\n\n    var settingsButton = {};\n    Object.defineProperty(settingsButton, 'isVisible', {\n      set: function(val){ setParams({is_visible: val}); },\n      get: function(){ return isVisible; },\n      enumerable: true\n    });\n\n    var curButtonState = null;\n\n    WebView.onEvent('settings_button_pressed', onSettingsButtonPressed);\n\n    function onSettingsButtonPressed() {\n      receiveWebViewEvent('settingsButtonClicked');\n    }\n\n    function buttonParams() {\n      return {is_visible: isVisible};\n    }\n\n    function buttonState(btn_params) {\n      if (typeof btn_params === 'undefined') {\n        btn_params = buttonParams();\n      }\n      return JSON.stringify(btn_params);\n    }\n\n    function buttonCheckVersion() {\n      if (!versionAtLeast('6.10')) {\n        console.warn('[Telegram.WebApp] SettingsButton is not supported in version ' + webAppVersion);\n        return false;\n      }\n      return true;\n    }\n\n    function updateButton() {\n      var btn_params = buttonParams();\n      var btn_state = buttonState(btn_params);\n      if (curButtonState === btn_state) {\n        return;\n      }\n      curButtonState = btn_state;\n      WebView.postEvent('web_app_setup_settings_button', false, btn_params);\n    }\n\n    function setParams(params) {\n      if (!buttonCheckVersion()) {\n        return settingsButton;\n      }\n      if (typeof params.is_visible !== 'undefined') {\n        isVisible = !!params.is_visible;\n      }\n      updateButton();\n      return settingsButton;\n    }\n\n    settingsButton.onClick = function(callback) {\n      if (buttonCheckVersion()) {\n        onWebViewEvent('settingsButtonClicked', callback);\n      }\n      return settingsButton;\n    };\n    settingsButton.offClick = function(callback) {\n      if (buttonCheckVersion()) {\n        offWebViewEvent('settingsButtonClicked', callback);\n      }\n      return settingsButton;\n    };\n    settingsButton.show = function() {\n      return setParams({is_visible: true});\n    };\n    settingsButton.hide = function() {\n      return setParams({is_visible: false});\n    };\n    return settingsButton;\n  })();\n\n  var HapticFeedback = (function() {\n    var hapticFeedback = {};\n\n    function triggerFeedback(params) {\n      if (!versionAtLeast('6.1')) {\n        console.warn('[Telegram.WebApp] HapticFeedback is not supported in version ' + webAppVersion);\n        return hapticFeedback;\n      }\n      if (params.type == 'impact') {\n        if (params.impact_style != 'light' &&\n            params.impact_style != 'medium' &&\n            params.impact_style != 'heavy' &&\n            params.impact_style != 'rigid' &&\n            params.impact_style != 'soft') {\n          console.error('[Telegram.WebApp] Haptic impact style is invalid', params.impact_style);\n          throw Error('WebAppHapticImpactStyleInvalid');\n        }\n      } else if (params.type == 'notification') {\n        if (params.notification_type != 'error' &&\n            params.notification_type != 'success' &&\n            params.notification_type != 'warning') {\n          console.error('[Telegram.WebApp] Haptic notification type is invalid', params.notification_type);\n          throw Error('WebAppHapticNotificationTypeInvalid');\n        }\n      } else if (params.type == 'selection_change') {\n        // no params needed\n      } else {\n        console.error('[Telegram.WebApp] Haptic feedback type is invalid', params.type);\n        throw Error('WebAppHapticFeedbackTypeInvalid');\n      }\n      WebView.postEvent('web_app_trigger_haptic_feedback', false, params);\n      return hapticFeedback;\n    }\n\n    hapticFeedback.impactOccurred = function(style) {\n      return triggerFeedback({type: 'impact', impact_style: style});\n    };\n    hapticFeedback.notificationOccurred = function(type) {\n      return triggerFeedback({type: 'notification', notification_type: type});\n    };\n    hapticFeedback.selectionChanged = function() {\n      return triggerFeedback({type: 'selection_change'});\n    };\n    return hapticFeedback;\n  })();\n\n  var CloudStorage = (function() {\n    var cloudStorage = {};\n\n    function invokeStorageMethod(method, params, callback) {\n      if (!versionAtLeast('6.9')) {\n        console.error('[Telegram.WebApp] CloudStorage is not supported in version ' + webAppVersion);\n        throw Error('WebAppMethodUnsupported');\n      }\n      invokeCustomMethod(method, params, callback);\n      return cloudStorage;\n    }\n\n    cloudStorage.setItem = function(key, value, callback) {\n      return invokeStorageMethod('saveStorageValue', {key: key, value: value}, callback);\n    };\n    cloudStorage.getItem = function(key, callback) {\n      return cloudStorage.getItems([key], callback ? function(err, res) {\n        if (err) callback(err);\n        else callback(null, res[key]);\n      } : null);\n    };\n    cloudStorage.getItems = function(keys, callback) {\n      return invokeStorageMethod('getStorageValues', {keys: keys}, callback);\n    };\n    cloudStorage.removeItem = function(key, callback) {\n      return cloudStorage.removeItems([key], callback);\n    };\n    cloudStorage.removeItems = function(keys, callback) {\n      return invokeStorageMethod('deleteStorageValues', {keys: keys}, callback);\n    };\n    cloudStorage.getKeys = function(callback) {\n      return invokeStorageMethod('getStorageKeys', {}, callback);\n    };\n    return cloudStorage;\n  })();\n\n  var BiometricManager = (function() {\n    var isInited = false;\n    var isBiometricAvailable = false;\n    var biometricType = 'unknown';\n    var isAccessRequested = false;\n    var isAccessGranted = false;\n    var isBiometricTokenSaved = false;\n    var deviceId = '';\n\n    var biometricManager = {};\n    Object.defineProperty(biometricManager, 'isInited', {\n      get: function(){ return isInited; },\n      enumerable: true\n    });\n    Object.defineProperty(biometricManager, 'isBiometricAvailable', {\n      get: function(){ return isInited && isBiometricAvailable; },\n      enumerable: true\n    });\n    Object.defineProperty(biometricManager, 'biometricType', {\n      get: function(){ return biometricType || 'unknown'; },\n      enumerable: true\n    });\n    Object.defineProperty(biometricManager, 'isAccessRequested', {\n      get: function(){ return isAccessRequested; },\n      enumerable: true\n    });\n    Object.defineProperty(biometricManager, 'isAccessGranted', {\n      get: function(){ return isAccessRequested && isAccessGranted; },\n      enumerable: true\n    });\n    Object.defineProperty(biometricManager, 'isBiometricTokenSaved', {\n      get: function(){ return isBiometricTokenSaved; },\n      enumerable: true\n    });\n    Object.defineProperty(biometricManager, 'deviceId', {\n      get: function(){ return deviceId || ''; },\n      enumerable: true\n    });\n\n    var initRequestState = {callbacks: []};\n    var accessRequestState = false;\n    var authRequestState = false;\n    var tokenRequestState = false;\n\n    WebView.onEvent('biometry_info_received',  onBiometryInfoReceived);\n    WebView.onEvent('biometry_auth_requested', onBiometryAuthRequested);\n    WebView.onEvent('biometry_token_updated',  onBiometryTokenUpdated);\n\n    function onBiometryInfoReceived(eventType, eventData) {\n      isInited = true;\n      if (eventData.available) {\n        isBiometricAvailable = true;\n        biometricType = eventData.type || 'unknown';\n        if (eventData.access_requested) {\n          isAccessRequested = true;\n          isAccessGranted = !!eventData.access_granted;\n          isBiometricTokenSaved = !!eventData.token_saved;\n        } else {\n          isAccessRequested = false;\n          isAccessGranted = false;\n          isBiometricTokenSaved = false;\n        }\n      } else {\n        isBiometricAvailable = false;\n        biometricType = 'unknown';\n        isAccessRequested = false;\n        isAccessGranted = false;\n        isBiometricTokenSaved = false;\n      }\n      deviceId = eventData.device_id || '';\n\n      if (initRequestState.callbacks.length > 0) {\n        for (var i = 0; i < initRequestState.callbacks.length; i++) {\n          var callback = initRequestState.callbacks[i];\n          callback();\n        }\n        initRequestState.callbacks = [];\n      }\n      if (accessRequestState) {\n        var state = accessRequestState;\n        accessRequestState = false;\n        if (state.callback) {\n          state.callback(isAccessGranted);\n        }\n      }\n      receiveWebViewEvent('biometricManagerUpdated');\n    }\n    function onBiometryAuthRequested(eventType, eventData) {\n      var isAuthenticated = (eventData.status == 'authorized'),\n          biometricToken = eventData.token || '';\n      if (authRequestState) {\n        var state = authRequestState;\n        authRequestState = false;\n        if (state.callback) {\n          state.callback(isAuthenticated, isAuthenticated ? biometricToken : null);\n        }\n      }\n      receiveWebViewEvent('biometricAuthRequested', isAuthenticated ? {\n        isAuthenticated: true,\n        biometricToken: biometricToken\n      } : {\n        isAuthenticated: false\n      });\n    }\n    function onBiometryTokenUpdated(eventType, eventData) {\n      var applied = false;\n      if (isBiometricAvailable &&\n          isAccessRequested) {\n        if (eventData.status == 'updated') {\n          isBiometricTokenSaved = true;\n          applied = true;\n        }\n        else if (eventData.status == 'removed') {\n          isBiometricTokenSaved = false;\n          applied = true;\n        }\n      }\n      if (tokenRequestState) {\n        var state = tokenRequestState;\n        tokenRequestState = false;\n        if (state.callback) {\n          state.callback(applied);\n        }\n      }\n      receiveWebViewEvent('biometricTokenUpdated', {\n        isUpdated: applied\n      });\n    }\n\n    function checkVersion() {\n      if (!versionAtLeast('7.2')) {\n        console.warn('[Telegram.WebApp] BiometricManager is not supported in version ' + webAppVersion);\n        return false;\n      }\n      return true;\n    }\n\n    function checkInit() {\n      if (!isInited) {\n        console.error('[Telegram.WebApp] BiometricManager should be inited before using.');\n        throw Error('WebAppBiometricManagerNotInited');\n      }\n      return true;\n    }\n\n    biometricManager.init = function(callback) {\n      if (!checkVersion()) {\n        return biometricManager;\n      }\n      if (isInited) {\n        return biometricManager;\n      }\n      if (callback) {\n        initRequestState.callbacks.push(callback);\n      }\n      WebView.postEvent('web_app_biometry_get_info', false);\n      return biometricManager;\n    };\n    biometricManager.requestAccess = function(params, callback) {\n      if (!checkVersion()) {\n        return biometricManager;\n      }\n      checkInit();\n      if (!isBiometricAvailable) {\n        console.error('[Telegram.WebApp] Biometrics is not available on this device.');\n        throw Error('WebAppBiometricManagerBiometricsNotAvailable');\n      }\n      if (accessRequestState) {\n        console.error('[Telegram.WebApp] Access is already requested');\n        throw Error('WebAppBiometricManagerAccessRequested');\n      }\n      var popup_params = {};\n      if (typeof params.reason !== 'undefined') {\n        var reason = strTrim(params.reason);\n        if (reason.length > 128) {\n          console.error('[Telegram.WebApp] Biometric reason is too long', reason);\n          throw Error('WebAppBiometricRequestAccessParamInvalid');\n        }\n        if (reason.length > 0) {\n          popup_params.reason = reason;\n        }\n      }\n\n      accessRequestState = {\n        callback: callback\n      };\n      WebView.postEvent('web_app_biometry_request_access', false, popup_params);\n      return biometricManager;\n    };\n    biometricManager.authenticate = function(params, callback) {\n      if (!checkVersion()) {\n        return biometricManager;\n      }\n      checkInit();\n      if (!isBiometricAvailable) {\n        console.error('[Telegram.WebApp] Biometrics is not available on this device.');\n        throw Error('WebAppBiometricManagerBiometricsNotAvailable');\n      }\n      if (!isAccessGranted) {\n        console.error('[Telegram.WebApp] Biometric access was not granted by the user.');\n        throw Error('WebAppBiometricManagerBiometricAccessNotGranted');\n      }\n      if (authRequestState) {\n        console.error('[Telegram.WebApp] Authentication request is already in progress.');\n        throw Error('WebAppBiometricManagerAuthenticationRequested');\n      }\n      var popup_params = {};\n      if (typeof params.reason !== 'undefined') {\n        var reason = strTrim(params.reason);\n        if (reason.length > 128) {\n          console.error('[Telegram.WebApp] Biometric reason is too long', reason);\n          throw Error('WebAppBiometricRequestAccessParamInvalid');\n        }\n        if (reason.length > 0) {\n          popup_params.reason = reason;\n        }\n      }\n\n      authRequestState = {\n        callback: callback\n      };\n      WebView.postEvent('web_app_biometry_request_auth', false, popup_params);\n      return biometricManager;\n    };\n    biometricManager.updateBiometricToken = function(token, callback) {\n      if (!checkVersion()) {\n        return biometricManager;\n      }\n      token = token || '';\n      if (token.length > 1024) {\n        console.error('[Telegram.WebApp] Token is too long', token);\n        throw Error('WebAppBiometricManagerTokenInvalid');\n      }\n      checkInit();\n      if (!isBiometricAvailable) {\n        console.error('[Telegram.WebApp] Biometrics is not available on this device.');\n        throw Error('WebAppBiometricManagerBiometricsNotAvailable');\n      }\n      if (!isAccessGranted) {\n        console.error('[Telegram.WebApp] Biometric access was not granted by the user.');\n        throw Error('WebAppBiometricManagerBiometricAccessNotGranted');\n      }\n      if (tokenRequestState) {\n        console.error('[Telegram.WebApp] Token request is already in progress.');\n        throw Error('WebAppBiometricManagerTokenUpdateRequested');\n      }\n      tokenRequestState = {\n        callback: callback\n      };\n      WebView.postEvent('web_app_biometry_update_token', false, {token: token});\n      return biometricManager;\n    };\n    biometricManager.openSettings = function() {\n      if (!checkVersion()) {\n        return biometricManager;\n      }\n      checkInit();\n      if (!isBiometricAvailable) {\n        console.error('[Telegram.WebApp] Biometrics is not available on this device.');\n        throw Error('WebAppBiometricManagerBiometricsNotAvailable');\n      }\n      if (!isAccessRequested) {\n        console.error('[Telegram.WebApp] Biometric access was not requested yet.');\n        throw Error('WebAppBiometricManagerBiometricsAccessNotRequested');\n      }\n      if (isAccessGranted) {\n        console.warn('[Telegram.WebApp] Biometric access was granted by the user, no need to go to settings.');\n        return biometricManager;\n      }\n      WebView.postEvent('web_app_biometry_open_settings', false);\n      return biometricManager;\n    };\n    return biometricManager;\n  })();\n\n  var LocationManager = (function() {\n    var isInited = false;\n    var isLocationAvailable = false;\n    var isAccessRequested = false;\n    var isAccessGranted = false;\n\n    var locationManager = {};\n    Object.defineProperty(locationManager, 'isInited', {\n      get: function(){ return isInited; },\n      enumerable: true\n    });\n    Object.defineProperty(locationManager, 'isLocationAvailable', {\n      get: function(){ return isInited && isLocationAvailable; },\n      enumerable: true\n    });\n    Object.defineProperty(locationManager, 'isAccessRequested', {\n      get: function(){ return isAccessRequested; },\n      enumerable: true\n    });\n    Object.defineProperty(locationManager, 'isAccessGranted', {\n      get: function(){ return isAccessRequested && isAccessGranted; },\n      enumerable: true\n    });\n\n    var initRequestState = {callbacks: []};\n    var getRequestState = {callbacks: []};\n\n    WebView.onEvent('location_checked',  onLocationChecked);\n    WebView.onEvent('location_requested', onLocationRequested);\n\n    function onLocationChecked(eventType, eventData) {\n      isInited = true;\n      if (eventData.available) {\n        isLocationAvailable = true;\n        if (eventData.access_requested) {\n          isAccessRequested = true;\n          isAccessGranted = !!eventData.access_granted;\n        } else {\n          isAccessRequested = false;\n          isAccessGranted = false;\n        }\n      } else {\n        isLocationAvailable = false;\n        isAccessRequested = false;\n        isAccessGranted = false;\n      }\n\n      if (initRequestState.callbacks.length > 0) {\n        for (var i = 0; i < initRequestState.callbacks.length; i++) {\n          var callback = initRequestState.callbacks[i];\n          callback();\n        }\n        initRequestState.callbacks = [];\n      }\n      receiveWebViewEvent('locationManagerUpdated');\n    }\n    function onLocationRequested(eventType, eventData) {\n      if (!eventData.available) {\n        locationData = null;\n      } else {\n        var locationData = {\n          latitude: eventData.latitude,\n          longitude: eventData.longitude,\n          altitude: null,\n          course: null,\n          speed: null,\n          horizontal_accuracy: null,\n          vertical_accuracy: null,\n          course_accuracy: null,\n          speed_accuracy: null,\n        };\n        if (typeof eventData.altitude !== 'undefined' && eventData.altitude !== null) {\n          locationData.altitude = eventData.altitude;\n        }\n        if (typeof eventData.course !== 'undefined' && eventData.course !== null) {\n          locationData.course = eventData.course % 360;\n        }\n        if (typeof eventData.speed !== 'undefined' && eventData.speed !== null) {\n          locationData.speed = eventData.speed;\n        }\n        if (typeof eventData.horizontal_accuracy !== 'undefined' && eventData.horizontal_accuracy !== null) {\n          locationData.horizontal_accuracy = eventData.horizontal_accuracy;\n        }\n        if (typeof eventData.vertical_accuracy !== 'undefined' && eventData.vertical_accuracy !== null) {\n          locationData.vertical_accuracy = eventData.vertical_accuracy;\n        }\n        if (typeof eventData.course_accuracy !== 'undefined' && eventData.course_accuracy !== null) {\n          locationData.course_accuracy = eventData.course_accuracy;\n        }\n        if (typeof eventData.speed_accuracy !== 'undefined' && eventData.speed_accuracy !== null) {\n          locationData.speed_accuracy = eventData.speed_accuracy;\n        }\n      }\n      if (!eventData.available ||\n          !isLocationAvailable ||\n          !isAccessRequested ||\n          !isAccessGranted) {\n        initRequestState.callbacks.push(function() {\n          locationResponse(locationData);\n        });\n        WebView.postEvent('web_app_check_location', false);\n      } else {\n        locationResponse(locationData);\n      }\n    }\n    function locationResponse(response) {\n      if (getRequestState.callbacks.length > 0) {\n        for (var i = 0; i < getRequestState.callbacks.length; i++) {\n          var callback = getRequestState.callbacks[i];\n          callback(response);\n        }\n        getRequestState.callbacks = [];\n      }\n      if (response !== null) {\n        receiveWebViewEvent('locationRequested', {\n          locationData: response\n        });\n      }\n    }\n\n    function checkVersion() {\n      if (!versionAtLeast('8.0')) {\n        console.warn('[Telegram.WebApp] LocationManager is not supported in version ' + webAppVersion);\n        return false;\n      }\n      return true;\n    }\n\n    function checkInit() {\n      if (!isInited) {\n        console.error('[Telegram.WebApp] LocationManager should be inited before using.');\n        throw Error('WebAppLocationManagerNotInited');\n      }\n      return true;\n    }\n\n    locationManager.init = function(callback) {\n      if (!checkVersion()) {\n        return locationManager;\n      }\n      if (isInited) {\n        return locationManager;\n      }\n      if (callback) {\n        initRequestState.callbacks.push(callback);\n      }\n      WebView.postEvent('web_app_check_location', false);\n      return locationManager;\n    };\n    locationManager.getLocation = function(callback) {\n      if (!checkVersion()) {\n        return locationManager;\n      }\n      checkInit();\n      if (!isLocationAvailable) {\n        console.error('[Telegram.WebApp] Location is not available on this device.');\n        throw Error('WebAppLocationManagerLocationNotAvailable');\n      }\n\n      getRequestState.callbacks.push(callback);\n      WebView.postEvent('web_app_request_location');\n      return locationManager;\n    };\n    locationManager.openSettings = function() {\n      if (!checkVersion()) {\n        return locationManager;\n      }\n      checkInit();\n      if (!isLocationAvailable) {\n        console.error('[Telegram.WebApp] Location is not available on this device.');\n        throw Error('WebAppLocationManagerLocationNotAvailable');\n      }\n      if (!isAccessRequested) {\n        console.error('[Telegram.WebApp] Location access was not requested yet.');\n        throw Error('WebAppLocationManagerLocationAccessNotRequested');\n      }\n      if (isAccessGranted) {\n        console.warn('[Telegram.WebApp] Location access was granted by the user, no need to go to settings.');\n        return locationManager;\n      }\n      WebView.postEvent('web_app_open_location_settings', false);\n      return locationManager;\n    };\n    return locationManager;\n  })();\n\n  var Accelerometer = (function() {\n    var isStarted = false;\n    var valueX = null, valueY = null, valueZ = null;\n    var startCallbacks = [], stopCallbacks = [];\n\n    var accelerometer = {};\n    Object.defineProperty(accelerometer, 'isStarted', {\n      get: function(){ return isStarted; },\n      enumerable: true\n    });\n    Object.defineProperty(accelerometer, 'x', {\n      get: function(){ return valueX; },\n      enumerable: true\n    });\n    Object.defineProperty(accelerometer, 'y', {\n      get: function(){ return valueY; },\n      enumerable: true\n    });\n    Object.defineProperty(accelerometer, 'z', {\n      get: function(){ return valueZ; },\n      enumerable: true\n    });\n\n    WebView.onEvent('accelerometer_started', onAccelerometerStarted);\n    WebView.onEvent('accelerometer_stopped', onAccelerometerStopped);\n    WebView.onEvent('accelerometer_changed', onAccelerometerChanged);\n    WebView.onEvent('accelerometer_failed',  onAccelerometerFailed);\n\n    function onAccelerometerStarted(eventType, eventData) {\n      isStarted = true;\n      if (startCallbacks.length > 0) {\n        for (var i = 0; i < startCallbacks.length; i++) {\n          var callback = startCallbacks[i];\n          callback(true);\n        }\n        startCallbacks = [];\n      }\n      receiveWebViewEvent('accelerometerStarted');\n    }\n    function onAccelerometerStopped(eventType, eventData) {\n      isStarted = false;\n      if (stopCallbacks.length > 0) {\n        for (var i = 0; i < stopCallbacks.length; i++) {\n          var callback = stopCallbacks[i];\n          callback(true);\n        }\n        stopCallbacks = [];\n      }\n      receiveWebViewEvent('accelerometerStopped');\n    }\n    function onAccelerometerChanged(eventType, eventData) {\n      valueX = eventData.x;\n      valueY = eventData.y;\n      valueZ = eventData.z;\n      receiveWebViewEvent('accelerometerChanged');\n    }\n    function onAccelerometerFailed(eventType, eventData) {\n      if (startCallbacks.length > 0) {\n        for (var i = 0; i < startCallbacks.length; i++) {\n          var callback = startCallbacks[i];\n          callback(false);\n        }\n        startCallbacks = [];\n      }\n      receiveWebViewEvent('accelerometerFailed', {\n        error: eventData.error\n      });\n    }\n\n    function checkVersion() {\n      if (!versionAtLeast('8.0')) {\n        console.warn('[Telegram.WebApp] Accelerometer is not supported in version ' + webAppVersion);\n        return false;\n      }\n      return true;\n    }\n\n    accelerometer.start = function(params, callback) {\n      params = params || {};\n      if (!checkVersion()) {\n        return accelerometer;\n      }\n      var req_params = {};\n      var refresh_rate = parseInt(params.refresh_rate || 1000);\n      if (isNaN(refresh_rate) || refresh_rate < 20 || refresh_rate > 1000) {\n        console.warn('[Telegram.WebApp] Accelerometer refresh_rate is invalid', refresh_rate);\n      } else {\n        req_params.refresh_rate = refresh_rate;\n      }\n\n      if (callback) {\n        startCallbacks.push(callback);\n      }\n      WebView.postEvent('web_app_start_accelerometer', false, req_params);\n      return accelerometer;\n    };\n    accelerometer.stop = function(callback) {\n      if (!checkVersion()) {\n        return accelerometer;\n      }\n      if (callback) {\n        stopCallbacks.push(callback);\n      }\n      WebView.postEvent('web_app_stop_accelerometer');\n      return accelerometer;\n    };\n    return accelerometer;\n  })();\n\n  var DeviceOrientation = (function() {\n    var isStarted = false;\n    var valueAlpha = null, valueBeta = null, valueGamma = null, valueAbsolute = false;\n    var startCallbacks = [], stopCallbacks = [];\n\n    var deviceOrientation = {};\n    Object.defineProperty(deviceOrientation, 'isStarted', {\n      get: function(){ return isStarted; },\n      enumerable: true\n    });\n    Object.defineProperty(deviceOrientation, 'absolute', {\n      get: function(){ return valueAbsolute; },\n      enumerable: true\n    });\n    Object.defineProperty(deviceOrientation, 'alpha', {\n      get: function(){ return valueAlpha; },\n      enumerable: true\n    });\n    Object.defineProperty(deviceOrientation, 'beta', {\n      get: function(){ return valueBeta; },\n      enumerable: true\n    });\n    Object.defineProperty(deviceOrientation, 'gamma', {\n      get: function(){ return valueGamma; },\n      enumerable: true\n    });\n\n    WebView.onEvent('device_orientation_started',  onDeviceOrientationStarted);\n    WebView.onEvent('device_orientation_stopped',  onDeviceOrientationStopped);\n    WebView.onEvent('device_orientation_changed', onDeviceOrientationChanged);\n    WebView.onEvent('device_orientation_failed',  onDeviceOrientationFailed);\n\n    function onDeviceOrientationStarted(eventType, eventData) {\n      isStarted = true;\n      if (startCallbacks.length > 0) {\n        for (var i = 0; i < startCallbacks.length; i++) {\n          var callback = startCallbacks[i];\n          callback(true);\n        }\n        startCallbacks = [];\n      }\n      receiveWebViewEvent('deviceOrientationStarted');\n    }\n    function onDeviceOrientationStopped(eventType, eventData) {\n      isStarted = false;\n      if (stopCallbacks.length > 0) {\n        for (var i = 0; i < stopCallbacks.length; i++) {\n          var callback = stopCallbacks[i];\n          callback(true);\n        }\n        stopCallbacks = [];\n      }\n      receiveWebViewEvent('deviceOrientationStopped');\n    }\n    function onDeviceOrientationChanged(eventType, eventData) {\n      valueAbsolute = !!eventData.absolute;\n      valueAlpha = eventData.alpha;\n      valueBeta  = eventData.beta;\n      valueGamma = eventData.gamma;\n      receiveWebViewEvent('deviceOrientationChanged');\n    }\n    function onDeviceOrientationFailed(eventType, eventData) {\n      if (startCallbacks.length > 0) {\n        for (var i = 0; i < startCallbacks.length; i++) {\n          var callback = startCallbacks[i];\n          callback(false);\n        }\n        startCallbacks = [];\n      }\n      receiveWebViewEvent('deviceOrientationFailed', {\n        error: eventData.error\n      });\n    }\n\n    function checkVersion() {\n      if (!versionAtLeast('8.0')) {\n        console.warn('[Telegram.WebApp] DeviceOrientation is not supported in version ' + webAppVersion);\n        return false;\n      }\n      return true;\n    }\n\n    deviceOrientation.start = function(params, callback) {\n      params = params || {};\n      if (!checkVersion()) {\n        return deviceOrientation;\n      }\n      var req_params = {};\n      var refresh_rate = parseInt(params.refresh_rate || 1000);\n      if (isNaN(refresh_rate) || refresh_rate < 20 || refresh_rate > 1000) {\n        console.warn('[Telegram.WebApp] DeviceOrientation refresh_rate is invalid', refresh_rate);\n      } else {\n        req_params.refresh_rate = refresh_rate;\n      }\n      req_params.need_absolute = !!params.need_absolute;\n\n      if (callback) {\n        startCallbacks.push(callback);\n      }\n      WebView.postEvent('web_app_start_device_orientation', false, req_params);\n      return deviceOrientation;\n    };\n    deviceOrientation.stop = function(callback) {\n      if (!checkVersion()) {\n        return deviceOrientation;\n      }\n      if (callback) {\n        stopCallbacks.push(callback);\n      }\n      WebView.postEvent('web_app_stop_device_orientation');\n      return deviceOrientation;\n    };\n    return deviceOrientation;\n  })();\n\n  var Gyroscope = (function() {\n    var isStarted = false;\n    var valueX = null, valueY = null, valueZ = null;\n    var startCallbacks = [], stopCallbacks = [];\n\n    var gyroscope = {};\n    Object.defineProperty(gyroscope, 'isStarted', {\n      get: function(){ return isStarted; },\n      enumerable: true\n    });\n    Object.defineProperty(gyroscope, 'x', {\n      get: function(){ return valueX; },\n      enumerable: true\n    });\n    Object.defineProperty(gyroscope, 'y', {\n      get: function(){ return valueY; },\n      enumerable: true\n    });\n    Object.defineProperty(gyroscope, 'z', {\n      get: function(){ return valueZ; },\n      enumerable: true\n    });\n\n    WebView.onEvent('gyroscope_started',  onGyroscopeStarted);\n    WebView.onEvent('gyroscope_stopped',  onGyroscopeStopped);\n    WebView.onEvent('gyroscope_changed', onGyroscopeChanged);\n    WebView.onEvent('gyroscope_failed',  onGyroscopeFailed);\n\n    function onGyroscopeStarted(eventType, eventData) {\n      isStarted = true;\n      if (startCallbacks.length > 0) {\n        for (var i = 0; i < startCallbacks.length; i++) {\n          var callback = startCallbacks[i];\n          callback(true);\n        }\n        startCallbacks = [];\n      }\n      receiveWebViewEvent('gyroscopeStarted');\n    }\n    function onGyroscopeStopped(eventType, eventData) {\n      isStarted = false;\n      if (stopCallbacks.length > 0) {\n        for (var i = 0; i < stopCallbacks.length; i++) {\n          var callback = stopCallbacks[i];\n          callback(true);\n        }\n        stopCallbacks = [];\n      }\n      receiveWebViewEvent('gyroscopeStopped');\n    }\n    function onGyroscopeChanged(eventType, eventData) {\n      valueX = eventData.x;\n      valueY = eventData.y;\n      valueZ = eventData.z;\n      receiveWebViewEvent('gyroscopeChanged');\n    }\n    function onGyroscopeFailed(eventType, eventData) {\n      if (startCallbacks.length > 0) {\n        for (var i = 0; i < startCallbacks.length; i++) {\n          var callback = startCallbacks[i];\n          callback(false);\n        }\n        startCallbacks = [];\n      }\n      receiveWebViewEvent('gyroscopeFailed', {\n        error: eventData.error\n      });\n    }\n\n    function checkVersion() {\n      if (!versionAtLeast('8.0')) {\n        console.warn('[Telegram.WebApp] Gyroscope is not supported in version ' + webAppVersion);\n        return false;\n      }\n      return true;\n    }\n\n    gyroscope.start = function(params, callback) {\n      params = params || {};\n      if (!checkVersion()) {\n        return gyroscope;\n      }\n      var req_params = {};\n      var refresh_rate = parseInt(params.refresh_rate || 1000);\n      if (isNaN(refresh_rate) || refresh_rate < 20 || refresh_rate > 1000) {\n        console.warn('[Telegram.WebApp] Gyroscope refresh_rate is invalid', refresh_rate);\n      } else {\n        req_params.refresh_rate = refresh_rate;\n      }\n\n      if (callback) {\n        startCallbacks.push(callback);\n      }\n      WebView.postEvent('web_app_start_gyroscope', false, req_params);\n      return gyroscope;\n    };\n    gyroscope.stop = function(callback) {\n      if (!checkVersion()) {\n        return gyroscope;\n      }\n      if (callback) {\n        stopCallbacks.push(callback);\n      }\n      WebView.postEvent('web_app_stop_gyroscope');\n      return gyroscope;\n    };\n    return gyroscope;\n  })();\n\n  var webAppInvoices = {};\n  function onInvoiceClosed(eventType, eventData) {\n    if (eventData.slug && webAppInvoices[eventData.slug]) {\n      var invoiceData = webAppInvoices[eventData.slug];\n      delete webAppInvoices[eventData.slug];\n      if (invoiceData.callback) {\n        invoiceData.callback(eventData.status);\n      }\n      receiveWebViewEvent('invoiceClosed', {\n        url: invoiceData.url,\n        status: eventData.status\n      });\n    }\n  }\n\n  var webAppPopupOpened = false;\n  function onPopupClosed(eventType, eventData) {\n    if (webAppPopupOpened) {\n      var popupData = webAppPopupOpened;\n      webAppPopupOpened = false;\n      var button_id = null;\n      if (typeof eventData.button_id !== 'undefined') {\n        button_id = eventData.button_id;\n      }\n      if (popupData.callback) {\n        popupData.callback(button_id);\n      }\n      receiveWebViewEvent('popupClosed', {\n        button_id: button_id\n      });\n    }\n  }\n\n  var webAppScanQrPopupOpened = false;\n  function onQrTextReceived(eventType, eventData) {\n    if (webAppScanQrPopupOpened) {\n      var popupData = webAppScanQrPopupOpened;\n      var data = null;\n      if (typeof eventData.data !== 'undefined') {\n        data = eventData.data;\n      }\n      if (popupData.callback) {\n        if (popupData.callback(data)) {\n          webAppScanQrPopupOpened = false;\n          WebView.postEvent('web_app_close_scan_qr_popup', false);\n        }\n      }\n      receiveWebViewEvent('qrTextReceived', {\n        data: data\n      });\n    }\n  }\n  function onScanQrPopupClosed(eventType, eventData) {\n    webAppScanQrPopupOpened = false;\n    receiveWebViewEvent('scanQrPopupClosed');\n  }\n\n  function onClipboardTextReceived(eventType, eventData) {\n    if (eventData.req_id && webAppCallbacks[eventData.req_id]) {\n      var requestData = webAppCallbacks[eventData.req_id];\n      delete webAppCallbacks[eventData.req_id];\n      var data = null;\n      if (typeof eventData.data !== 'undefined') {\n        data = eventData.data;\n      }\n      if (requestData.callback) {\n        requestData.callback(data);\n      }\n      receiveWebViewEvent('clipboardTextReceived', {\n        data: data\n      });\n    }\n  }\n\n  var WebAppWriteAccessRequested = false;\n  function onWriteAccessRequested(eventType, eventData) {\n    if (WebAppWriteAccessRequested) {\n      var requestData = WebAppWriteAccessRequested;\n      WebAppWriteAccessRequested = false;\n      if (requestData.callback) {\n        requestData.callback(eventData.status == 'allowed');\n      }\n      receiveWebViewEvent('writeAccessRequested', {\n        status: eventData.status\n      });\n    }\n  }\n\n  function getRequestedContact(callback, timeout) {\n    var reqTo, fallbackTo, reqDelay = 0;\n    var reqInvoke = function() {\n      invokeCustomMethod('getRequestedContact', {}, function(err, res) {\n        if (res && res.length) {\n          clearTimeout(fallbackTo);\n          callback(res);\n        } else {\n          reqDelay += 50;\n          reqTo = setTimeout(reqInvoke, reqDelay);\n        }\n      });\n    };\n    var fallbackInvoke = function() {\n      clearTimeout(reqTo);\n      callback('');\n    };\n    fallbackTo = setTimeout(fallbackInvoke, timeout);\n    reqInvoke();\n  }\n\n  var WebAppContactRequested = false;\n  function onPhoneRequested(eventType, eventData) {\n    if (WebAppContactRequested) {\n      var requestData = WebAppContactRequested;\n      WebAppContactRequested = false;\n      var requestSent = eventData.status == 'sent';\n      var webViewEvent = {\n        status: eventData.status\n      };\n      if (requestSent) {\n        getRequestedContact(function(res) {\n          if (res && res.length) {\n            webViewEvent.response = res;\n            webViewEvent.responseUnsafe = Utils.urlParseQueryString(res);\n            for (var key in webViewEvent.responseUnsafe) {\n              var val = webViewEvent.responseUnsafe[key];\n              try {\n                if (val.substr(0, 1) == '{' && val.substr(-1) == '}' ||\n                    val.substr(0, 1) == '[' && val.substr(-1) == ']') {\n                  webViewEvent.responseUnsafe[key] = JSON.parse(val);\n                }\n              } catch (e) {}\n            }\n          }\n          if (requestData.callback) {\n            requestData.callback(requestSent, webViewEvent);\n          }\n          receiveWebViewEvent('contactRequested', webViewEvent);\n        }, 3000);\n      } else {\n        if (requestData.callback) {\n          requestData.callback(requestSent, webViewEvent);\n        }\n        receiveWebViewEvent('contactRequested', webViewEvent);\n      }\n    }\n  }\n\n  var webAppDownloadFileRequested = false;\n  function onFileDownloadRequested(eventType, eventData) {\n    if (webAppDownloadFileRequested) {\n      var requestData = webAppDownloadFileRequested;\n      webAppDownloadFileRequested = false;\n      var isDownloading = eventData.status == 'downloading';\n      if (requestData.callback) {\n        requestData.callback(isDownloading);\n      }\n      receiveWebViewEvent('fileDownloadRequested', {\n        status: isDownloading ? 'downloading' : 'cancelled'\n      });\n    }\n  }\n\n  function onCustomMethodInvoked(eventType, eventData) {\n    if (eventData.req_id && webAppCallbacks[eventData.req_id]) {\n      var requestData = webAppCallbacks[eventData.req_id];\n      delete webAppCallbacks[eventData.req_id];\n      var res = null, err = null;\n      if (typeof eventData.result !== 'undefined') {\n        res = eventData.result;\n      }\n      if (typeof eventData.error !== 'undefined') {\n        err = eventData.error;\n      }\n      if (requestData.callback) {\n        requestData.callback(err, res);\n      }\n    }\n  }\n\n  function invokeCustomMethod(method, params, callback) {\n    if (!versionAtLeast('6.9')) {\n      console.error('[Telegram.WebApp] Method invokeCustomMethod is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    var req_id = generateCallbackId(16);\n    var req_params = {req_id: req_id, method: method, params: params || {}};\n    webAppCallbacks[req_id] = {\n      callback: callback\n    };\n    WebView.postEvent('web_app_invoke_custom_method', false, req_params);\n  };\n\n  if (!window.Telegram) {\n    window.Telegram = {};\n  }\n\n  Object.defineProperty(WebApp, 'initData', {\n    get: function(){ return webAppInitData; },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'initDataUnsafe', {\n    get: function(){ return webAppInitDataUnsafe; },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'version', {\n    get: function(){ return webAppVersion; },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'platform', {\n    get: function(){ return webAppPlatform; },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'colorScheme', {\n    get: function(){ return colorScheme; },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'themeParams', {\n    get: function(){ return themeParams; },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'isExpanded', {\n    get: function(){ return isExpanded; },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'viewportHeight', {\n    get: function(){ return (viewportHeight === false ? window.innerHeight : viewportHeight) - bottomBarHeight; },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'viewportStableHeight', {\n    get: function(){ return (viewportStableHeight === false ? window.innerHeight : viewportStableHeight) - bottomBarHeight; },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'safeAreaInset', {\n    get: function(){ return safeAreaInset; },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'contentSafeAreaInset', {\n    get: function(){ return contentSafeAreaInset; },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'isClosingConfirmationEnabled', {\n    set: function(val){ setClosingConfirmation(val); },\n    get: function(){ return isClosingConfirmationEnabled; },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'isVerticalSwipesEnabled', {\n    set: function(val){ toggleVerticalSwipes(val); },\n    get: function(){ return isVerticalSwipesEnabled; },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'isFullscreen', {\n    get: function(){ return webAppIsFullscreen; },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'isOrientationLocked', {\n    set: function(val){ toggleOrientationLock(val); },\n    get: function(){ return webAppIsOrientationLocked; },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'isActive', {\n    get: function(){ return webAppIsActive; },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'headerColor', {\n    set: function(val){ setHeaderColor(val); },\n    get: function(){ return getHeaderColor(); },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'backgroundColor', {\n    set: function(val){ setBackgroundColor(val); },\n    get: function(){ return getBackgroundColor(); },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'bottomBarColor', {\n    set: function(val){ setBottomBarColor(val); },\n    get: function(){ return getBottomBarColor(); },\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'BackButton', {\n    value: BackButton,\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'MainButton', {\n    value: MainButton,\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'SecondaryButton', {\n    value: SecondaryButton,\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'SettingsButton', {\n    value: SettingsButton,\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'HapticFeedback', {\n    value: HapticFeedback,\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'CloudStorage', {\n    value: CloudStorage,\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'BiometricManager', {\n    value: BiometricManager,\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'Accelerometer', {\n    value: Accelerometer,\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'DeviceOrientation', {\n    value: DeviceOrientation,\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'Gyroscope', {\n    value: Gyroscope,\n    enumerable: true\n  });\n  Object.defineProperty(WebApp, 'LocationManager', {\n    value: LocationManager,\n    enumerable: true\n  });\n  WebApp.isVersionAtLeast = function(ver) {\n    return versionAtLeast(ver);\n  };\n  WebApp.setHeaderColor = function(color_key) {\n    WebApp.headerColor = color_key;\n  };\n  WebApp.setBackgroundColor = function(color) {\n    WebApp.backgroundColor = color;\n  };\n  WebApp.setBottomBarColor = function(color) {\n    WebApp.bottomBarColor = color;\n  };\n  WebApp.enableClosingConfirmation = function() {\n    WebApp.isClosingConfirmationEnabled = true;\n  };\n  WebApp.disableClosingConfirmation = function() {\n    WebApp.isClosingConfirmationEnabled = false;\n  };\n  WebApp.enableVerticalSwipes = function() {\n    WebApp.isVerticalSwipesEnabled = true;\n  };\n  WebApp.disableVerticalSwipes = function() {\n    WebApp.isVerticalSwipesEnabled = false;\n  };\n  WebApp.lockOrientation = function() {\n    WebApp.isOrientationLocked = true;\n  };\n  WebApp.unlockOrientation = function() {\n    WebApp.isOrientationLocked = false;\n  };\n  WebApp.requestFullscreen = function() {\n    if (!versionAtLeast('8.0')) {\n      console.error('[Telegram.WebApp] Method requestFullscreen is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    WebView.postEvent('web_app_request_fullscreen');\n  };\n  WebApp.exitFullscreen = function() {\n    if (!versionAtLeast('8.0')) {\n      console.error('[Telegram.WebApp] Method exitFullscreen is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    WebView.postEvent('web_app_exit_fullscreen');\n  };\n  WebApp.addToHomeScreen = function() {\n    if (!versionAtLeast('8.0')) {\n      console.error('[Telegram.WebApp] Method addToHomeScreen is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    WebView.postEvent('web_app_add_to_home_screen');\n  };\n  WebApp.checkHomeScreenStatus = function(callback) {\n    if (!versionAtLeast('8.0')) {\n      console.error('[Telegram.WebApp] Method checkHomeScreenStatus is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    if (callback) {\n      homeScreenCallbacks.push(callback);\n    }\n    WebView.postEvent('web_app_check_home_screen');\n  };\n  WebApp.onEvent = function(eventType, callback) {\n    onWebViewEvent(eventType, callback);\n  };\n  WebApp.offEvent = function(eventType, callback) {offWebViewEvent(eventType, callback);\n  };\n  WebApp.sendData = function (data) {\n    if (!data || !data.length) {\n      console.error('[Telegram.WebApp] Data is required', data);\n      throw Error('WebAppDataInvalid');\n    }\n    if (byteLength(data) > 4096) {\n      console.error('[Telegram.WebApp] Data is too long', data);\n      throw Error('WebAppDataInvalid');\n    }\n    WebView.postEvent('web_app_data_send', false, {data: data});\n  };\n  WebApp.switchInlineQuery = function (query, choose_chat_types) {\n    if (!versionAtLeast('6.6')) {\n      console.error('[Telegram.WebApp] Method switchInlineQuery is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    if (!initParams.tgWebAppBotInline) {\n      console.error('[Telegram.WebApp] Inline mode is disabled for this bot. Read more about inline mode: https://core.telegram.org/bots/inline');\n      throw Error('WebAppInlineModeDisabled');\n    }\n    query = query || '';\n    if (query.length > 256) {\n      console.error('[Telegram.WebApp] Inline query is too long', query);\n      throw Error('WebAppInlineQueryInvalid');\n    }\n    var chat_types = [];\n    if (choose_chat_types) {\n      if (!Array.isArray(choose_chat_types)) {\n        console.error('[Telegram.WebApp] Choose chat types should be an array', choose_chat_types);\n        throw Error('WebAppInlineChooseChatTypesInvalid');\n      }\n      var good_types = {users: 1, bots: 1, groups: 1, channels: 1};\n      for (var i = 0; i < choose_chat_types.length; i++) {\n        var chat_type = choose_chat_types[i];\n        if (!good_types[chat_type]) {\n          console.error('[Telegram.WebApp] Choose chat type is invalid', chat_type);\n          throw Error('WebAppInlineChooseChatTypeInvalid');\n        }\n        if (good_types[chat_type] != 2) {\n          good_types[chat_type] = 2;\n          chat_types.push(chat_type);\n        }\n      }\n    }\n    WebView.postEvent('web_app_switch_inline_query', false, {query: query, chat_types: chat_types});\n  };\n  WebApp.openLink = function (url, options) {\n    var a = document.createElement('A');\n    a.href = url;\n    if (a.protocol != 'http:' &&\n        a.protocol != 'https:') {\n      console.error('[Telegram.WebApp] Url protocol is not supported', url);\n      throw Error('WebAppTgUrlInvalid');\n    }\n    var url = a.href;\n    options = options || {};\n    if (versionAtLeast('6.1')) {\n      var req_params = {url: url};\n      if (versionAtLeast('6.4') && options.try_instant_view) {\n        req_params.try_instant_view = true;\n      }\n      if (versionAtLeast('7.6') && options.try_browser) {\n        req_params.try_browser = options.try_browser;\n      }\n      WebView.postEvent('web_app_open_link', false, req_params);\n    } else {\n      window.open(url, '_blank');\n    }\n  };\n  WebApp.openTelegramLink = function (url, options) {\n    var a = document.createElement('A');\n    a.href = url;\n    if (a.protocol != 'http:' &&\n        a.protocol != 'https:') {\n      console.error('[Telegram.WebApp] Url protocol is not supported', url);\n      throw Error('WebAppTgUrlInvalid');\n    }\n    if (a.hostname != 't.me') {\n      console.error('[Telegram.WebApp] Url host is not supported', url);\n      throw Error('WebAppTgUrlInvalid');\n    }\n    var path_full = a.pathname + a.search;\n    options = options || {};\n    if (isIframe || versionAtLeast('6.1')) {\n      var req_params = {path_full: path_full};\n      if (options.force_request) {\n        req_params.force_request = true;\n      }\n      WebView.postEvent('web_app_open_tg_link', false, req_params);\n    } else {\n      location.href = 'https://t.me' + path_full;\n    }\n  };\n  WebApp.openInvoice = function (url, callback) {\n    var a = document.createElement('A'), match, slug;\n    a.href = url;\n    if (a.protocol != 'http:' &&\n        a.protocol != 'https:' ||\n        a.hostname != 't.me' ||\n        !(match = a.pathname.match(/^\\/(\\$|invoice\\/)([A-Za-z0-9\\-_=]+)$/)) ||\n        !(slug = match[2])) {\n      console.error('[Telegram.WebApp] Invoice url is invalid', url);\n      throw Error('WebAppInvoiceUrlInvalid');\n    }\n    if (!versionAtLeast('6.1')) {\n      console.error('[Telegram.WebApp] Method openInvoice is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    if (webAppInvoices[slug]) {\n      console.error('[Telegram.WebApp] Invoice is already opened');\n      throw Error('WebAppInvoiceOpened');\n    }\n    webAppInvoices[slug] = {\n      url: url,\n      callback: callback\n    };\n    WebView.postEvent('web_app_open_invoice', false, {slug: slug});\n  };\n  WebApp.showPopup = function (params, callback) {\n    if (!versionAtLeast('6.2')) {\n      console.error('[Telegram.WebApp] Method showPopup is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    if (webAppPopupOpened) {\n      console.error('[Telegram.WebApp] Popup is already opened');\n      throw Error('WebAppPopupOpened');\n    }\n    var title = '';\n    var message = '';\n    var buttons = [];\n    var popup_buttons = {};\n    var popup_params = {};\n    if (typeof params.title !== 'undefined') {\n      title = strTrim(params.title);\n      if (title.length > 64) {\n        console.error('[Telegram.WebApp] Popup title is too long', title);\n        throw Error('WebAppPopupParamInvalid');\n      }\n      if (title.length > 0) {\n        popup_params.title = title;\n      }\n    }\n    if (typeof params.message !== 'undefined') {\n      message = strTrim(params.message);\n    }\n    if (!message.length) {\n      console.error('[Telegram.WebApp] Popup message is required', params.message);\n      throw Error('WebAppPopupParamInvalid');\n    }\n    if (message.length > 256) {\n      console.error('[Telegram.WebApp] Popup message is too long', message);\n      throw Error('WebAppPopupParamInvalid');\n    }\n    popup_params.message = message;\n    if (typeof params.buttons !== 'undefined') {\n      if (!Array.isArray(params.buttons)) {\n        console.error('[Telegram.WebApp] Popup buttons should be an array', params.buttons);\n        throw Error('WebAppPopupParamInvalid');\n      }\n      for (var i = 0; i < params.buttons.length; i++) {\n        var button = params.buttons[i];\n        var btn = {};\n        var id = '';\n        if (typeof button.id !== 'undefined') {\n          id = button.id.toString();\n          if (id.length > 64) {\n            console.error('[Telegram.WebApp] Popup button id is too long', id);\n            throw Error('WebAppPopupParamInvalid');\n          }\n        }\n        btn.id = id;\n        var button_type = button.type;\n        if (typeof button_type === 'undefined') {\n          button_type = 'default';\n        }\n        btn.type = button_type;\n        if (button_type == 'ok' ||\n            button_type == 'close' ||\n            button_type == 'cancel') {\n          // no params needed\n        } else if (button_type == 'default' ||\n            button_type == 'destructive') {\n          var text = '';\n          if (typeof button.text !== 'undefined') {\n            text = strTrim(button.text);\n          }\n          if (!text.length) {\n            console.error('[Telegram.WebApp] Popup button text is required for type ' + button_type, button.text);\n            throw Error('WebAppPopupParamInvalid');\n          }\n          if (text.length > 64) {\n            console.error('[Telegram.WebApp] Popup button text is too long', text);\n            throw Error('WebAppPopupParamInvalid');\n          }\n          btn.text = text;\n        } else {\n          console.error('[Telegram.WebApp] Popup button type is invalid', button_type);\n          throw Error('WebAppPopupParamInvalid');\n        }\n        buttons.push(btn);\n      }\n    } else {\n      buttons.push({id: '', type: 'close'});\n    }\n    if (buttons.length < 1) {\n      console.error('[Telegram.WebApp] Popup should have at least one button');\n      throw Error('WebAppPopupParamInvalid');\n    }\n    if (buttons.length > 3) {\n      console.error('[Telegram.WebApp] Popup should not have more than 3 buttons');\n      throw Error('WebAppPopupParamInvalid');\n    }\n    popup_params.buttons = buttons;\n\n    webAppPopupOpened = {\n      callback: callback\n    };\n    WebView.postEvent('web_app_open_popup', false, popup_params);\n  };\n  WebApp.showAlert = function (message, callback) {\n    WebApp.showPopup({\n      message: message\n    }, callback ? function(){ callback(); } : null);\n  };\n  WebApp.showConfirm = function (message, callback) {\n    WebApp.showPopup({\n      message: message,\n      buttons: [\n        {type: 'ok', id: 'ok'},\n        {type: 'cancel'}\n      ]\n    }, callback ? function (button_id) {\n      callback(button_id == 'ok');\n    } : null);\n  };\n  WebApp.showScanQrPopup = function (params, callback) {\n    if (!versionAtLeast('6.4')) {\n      console.error('[Telegram.WebApp] Method showScanQrPopup is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    if (webAppScanQrPopupOpened) {\n      console.error('[Telegram.WebApp] Popup is already opened');\n      throw Error('WebAppScanQrPopupOpened');\n    }\n    var text = '';\n    var popup_params = {};\n    if (typeof params.text !== 'undefined') {\n      text = strTrim(params.text);\n      if (text.length > 64) {\n        console.error('[Telegram.WebApp] Scan QR popup text is too long', text);\n        throw Error('WebAppScanQrPopupParamInvalid');\n      }\n      if (text.length > 0) {\n        popup_params.text = text;\n      }\n    }\n\n    webAppScanQrPopupOpened = {\n      callback: callback\n    };\n    WebView.postEvent('web_app_open_scan_qr_popup', false, popup_params);\n  };\n  WebApp.closeScanQrPopup = function () {\n    if (!versionAtLeast('6.4')) {\n      console.error('[Telegram.WebApp] Method closeScanQrPopup is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n\n    webAppScanQrPopupOpened = false;\n    WebView.postEvent('web_app_close_scan_qr_popup', false);\n  };\n  WebApp.readTextFromClipboard = function (callback) {\n    if (!versionAtLeast('6.4')) {\n      console.error('[Telegram.WebApp] Method readTextFromClipboard is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    var req_id = generateCallbackId(16);\n    var req_params = {req_id: req_id};\n    webAppCallbacks[req_id] = {\n      callback: callback\n    };\n    WebView.postEvent('web_app_read_text_from_clipboard', false, req_params);\n  };\n  WebApp.requestWriteAccess = function (callback) {\n    if (!versionAtLeast('6.9')) {\n      console.error('[Telegram.WebApp] Method requestWriteAccess is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    if (WebAppWriteAccessRequested) {\n      console.error('[Telegram.WebApp] Write access is already requested');\n      throw Error('WebAppWriteAccessRequested');\n    }\n    WebAppWriteAccessRequested = {\n      callback: callback\n    };\n    WebView.postEvent('web_app_request_write_access');\n  };\n  WebApp.requestContact = function (callback) {\n    if (!versionAtLeast('6.9')) {\n      console.error('[Telegram.WebApp] Method requestContact is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    if (WebAppContactRequested) {\n      console.error('[Telegram.WebApp] Contact is already requested');\n      throw Error('WebAppContactRequested');\n    }\n    WebAppContactRequested = {\n      callback: callback\n    };\n    WebView.postEvent('web_app_request_phone');\n  };\n  WebApp.downloadFile = function (params, callback) {\n    if (!versionAtLeast('8.0')) {\n      console.error('[Telegram.WebApp] Method downloadFile is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    if (webAppDownloadFileRequested) {\n      console.error('[Telegram.WebApp] Popup is already opened');\n      throw Error('WebAppDownloadFilePopupOpened');\n    }\n    var a = document.createElement('A');\n\n    var dl_params = {};\n    if (!params || !params.url || !params.url.length) {\n      console.error('[Telegram.WebApp] Url is required');\n      throw Error('WebAppDownloadFileParamInvalid');\n    }\n    a.href = params.url;\n    if (a.protocol != 'https:') {\n      console.error('[Telegram.WebApp] Url protocol is not supported', url);\n      throw Error('WebAppDownloadFileParamInvalid');\n    }\n    dl_params.url = a.href;\n\n    if (!params || !params.file_name || !params.file_name.length) {\n      console.error('[Telegram.WebApp] File name is required');\n      throw Error('WebAppDownloadFileParamInvalid');\n    }\n    dl_params.file_name = params.file_name;\n\n    webAppDownloadFileRequested = {\n      callback: callback\n    };\n    WebView.postEvent('web_app_request_file_download', false, dl_params);\n  };\n  WebApp.shareToStory = function (media_url, params) {\n    params = params || {};\n    if (!versionAtLeast('7.8')) {\n      console.error('[Telegram.WebApp] Method shareToStory is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    var a = document.createElement('A');\n    a.href = media_url;\n    if (a.protocol != 'http:' &&\n        a.protocol != 'https:') {\n      console.error('[Telegram.WebApp] Media url protocol is not supported', url);\n      throw Error('WebAppMediaUrlInvalid');\n    }\n    var share_params = {};\n    share_params.media_url = a.href;\n    if (typeof params.text !== 'undefined') {\n      var text = strTrim(params.text);\n      if (text.length > 2048) {\n        console.error('[Telegram.WebApp] Text is too long', text);\n        throw Error('WebAppShareToStoryParamInvalid');\n      }\n      if (text.length > 0) {\n        share_params.text = text;\n      }\n    }\n    if (typeof params.widget_link !== 'undefined') {\n      params.widget_link = params.widget_link || {};\n      a.href = params.widget_link.url;\n      if (a.protocol != 'http:' &&\n          a.protocol != 'https:') {\n        console.error('[Telegram.WebApp] Link protocol is not supported', url);\n        throw Error('WebAppShareToStoryParamInvalid');\n      }\n      var widget_link = {\n        url: a.href\n      };\n      if (typeof params.widget_link.name !== 'undefined') {\n        var link_name = strTrim(params.widget_link.name);\n        if (link_name.length > 48) {\n          console.error('[Telegram.WebApp] Link name is too long', link_name);\n          throw Error('WebAppShareToStoryParamInvalid');\n        }\n        if (link_name.length > 0) {\n          widget_link.name = link_name;\n        }\n      }\n      share_params.widget_link = widget_link;\n    }\n\n    WebView.postEvent('web_app_share_to_story', false, share_params);\n  };\n  WebApp.shareMessage = function (msg_id, callback) {\n    if (!versionAtLeast('8.0')) {\n      console.error('[Telegram.WebApp] Method shareMessage is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    if (WebAppShareMessageOpened) {\n      console.error('[Telegram.WebApp] Share message is already opened');\n      throw Error('WebAppShareMessageOpened');\n    }\n    WebAppShareMessageOpened = {\n      callback: callback\n    };\n    WebView.postEvent('web_app_send_prepared_message', false, {id: msg_id});\n  };\n  WebApp.setEmojiStatus = function (custom_emoji_id, params, callback) {\n    params = params || {};\n    if (!versionAtLeast('8.0')) {\n      console.error('[Telegram.WebApp] Method setEmojiStatus is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    var status_params = {};\n    status_params.custom_emoji_id = custom_emoji_id;\n    if (typeof params.duration !== 'undefined') {\n      status_params.duration = params.duration;\n    }\n    if (WebAppEmojiStatusRequested) {\n      console.error('[Telegram.WebApp] Emoji status is already requested');\n      throw Error('WebAppEmojiStatusRequested');\n    }\n    WebAppEmojiStatusRequested = {\n      callback: callback\n    };\n    WebView.postEvent('web_app_set_emoji_status', false, status_params);\n  };\n  WebApp.requestEmojiStatusAccess = function (callback) {\n    if (!versionAtLeast('8.0')) {\n      console.error('[Telegram.WebApp] Method requestEmojiStatusAccess is not supported in version ' + webAppVersion);\n      throw Error('WebAppMethodUnsupported');\n    }\n    if (WebAppEmojiStatusAccessRequested) {\n      console.error('[Telegram.WebApp] Emoji status permission is already requested');\n      throw Error('WebAppEmojiStatusAccessRequested');\n    }\n    WebAppEmojiStatusAccessRequested = {\n      callback: callback\n    };\n    WebView.postEvent('web_app_request_emoji_status_access');\n  };\n  WebApp.invokeCustomMethod = function (method, params, callback) {\n    invokeCustomMethod(method, params, callback);\n  };\n  WebApp.ready = function () {\n    WebView.postEvent('web_app_ready');\n  };\n  WebApp.expand = function () {\n    WebView.postEvent('web_app_expand');\n  };\n  WebApp.close = function (options) {\n    options = options || {};\n    var req_params = {};\n    if (versionAtLeast('7.6') && options.return_back) {\n      req_params.return_back = true;\n    }\n    WebView.postEvent('web_app_close', false, req_params);\n  };\n\n  window.Telegram.WebApp = WebApp;\n\n  updateHeaderColor();\n  updateBackgroundColor();\n  updateBottomBarColor();\n  setViewportHeight();\n  if (initParams.tgWebAppShowSettings) {\n    SettingsButton.show();\n  }\n\n  window.addEventListener('resize', onWindowResize);\n  if (isIframe) {\n    document.addEventListener('click', linkHandler);\n  }\n\n  WebView.onEvent('theme_changed', onThemeChanged);\n  WebView.onEvent('viewport_changed', onViewportChanged);\n  WebView.onEvent('safe_area_changed', onSafeAreaChanged);\n  WebView.onEvent('content_safe_area_changed', onContentSafeAreaChanged);\n  WebView.onEvent('visibility_changed', onVisibilityChanged);\n  WebView.onEvent('invoice_closed', onInvoiceClosed);\n  WebView.onEvent('popup_closed', onPopupClosed);\n  WebView.onEvent('qr_text_received', onQrTextReceived);\n  WebView.onEvent('scan_qr_popup_closed', onScanQrPopupClosed);\n  WebView.onEvent('clipboard_text_received', onClipboardTextReceived);\n  WebView.onEvent('write_access_requested', onWriteAccessRequested);\n  WebView.onEvent('phone_requested', onPhoneRequested);\n  WebView.onEvent('file_download_requested', onFileDownloadRequested);\n  WebView.onEvent('custom_method_invoked', onCustomMethodInvoked);\n  WebView.onEvent('fullscreen_changed', onFullscreenChanged);\n  WebView.onEvent('fullscreen_failed', onFullscreenFailed);\n  WebView.onEvent('home_screen_added', onHomeScreenAdded);\n  WebView.onEvent('home_screen_checked', onHomeScreenChecked);\n  WebView.onEvent('prepared_message_sent', onPreparedMessageSent);\n  WebView.onEvent('prepared_message_failed', onPreparedMessageFailed);\n  WebView.onEvent('emoji_status_set', onEmojiStatusSet);\n  WebView.onEvent('emoji_status_failed', onEmojiStatusFailed);\n  WebView.onEvent('emoji_status_access_requested', onEmojiStatusAccessRequested);\n  WebView.postEvent('web_app_request_theme');\n  WebView.postEvent('web_app_request_viewport');\n  WebView.postEvent('web_app_request_safe_area');\n  WebView.postEvent('web_app_request_content_safe_area');\n\n})();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}